{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 841813310a34df6b652d","webpack:///./src/console/console.js","webpack:///./src/lisp.js","webpack:///./src/lpep.js","webpack:///./src/sql_where.js","webpack:///./src/sql_context.js","webpack:///./src/index.js","webpack:///./src/lpel.js","webpack:///./src/utils/utils.js"],"names":["console","isArray","arg","Object","prototype","toString","call","isString","isHash","isFunction","$var$","ctx","varName","value","theCtx","result","undefined","length","makeMacro","fn","ast","aListToHashTable","alist","forEach","pair","makeLetBindings","bindings","Error","SPECIAL_FORMS","rs","EVAL","slice","macroexpand","reduce","acc","astItem","f","push","STDLIB","args","every","v","a","b","eval_context","JSON","eval","bind","apply","arguments","Array","map","c","k","el","RegExp","parse","stringify","splice","i","arr","minimal","resolveString","env_bind","exprs","create","eval_ast","e","op","x","init_lisp","val","eval_lisp","evaluate","make_parse","symbol_table","token","tokens","token_nr","expr_scope","pop","operator_aliases","operator_alias","from","to","itself","scope","find","n","o","s","original_symbol","nud","led","lbp","expr_logical_scope","parent","tp","expr_lpe_scope","new_expression_scope","advance","id","t","makeError","type","arity","sexpr","statement","std","expression","statements","concat","rbp","left","symbol","bp","infix","first","right","second","infixr","prefix","expr","comma","third","lift_funseq","node","lift_funseq_2","source","LPESyntaxError","message","constructor","__proto__","captureStackTrace","name","errorDescription","parser","str","parseResult","err","error","stack","sql_where_context","_vars","_context","try_to_quote_column","colname","h","try_to_quote_order_by_column","log","resolve_literal","lit","resolve_order_by_literal","ret","key","join","cnt","period_type","pt","test","reg","replace","regExp","prnt","ar","match","argel","l","r","inexpr","sql","id_val","res_json","plv8","execute","frst","axis_condition","split","e2","indexOf","substr","fts","tree","ilike","values","col","ac","eval_sql_where","_expr","predicate","TypeError","list","thisArg","sql_context","q","find_part","p","sel","where","srt","parse_sql_expr","do_select_from","fr","parse_sql_apidb_expr","_forced_table","_forced_where","cache","w","isDigit","tokenize","suffix","make","charAt","isFinite","parseInt","String","fromCharCode","db_quote_literal","intxt"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA,mDAA2C,cAAc;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;AC/DA,yDAAeA,OAAf,E;;;;;;;;;;;;;;;;;;;;;;;;;ACDA;;;;;;;;AAOA;;;;;AAMA;;AAEA,IAAMC,OAAO,GAAG,SAAVA,OAAU,CAACC,GAAD;AAAA,SAASC,MAAM,CAACC,SAAP,CAAiBC,QAAjB,CAA0BC,IAA1B,CAA+BJ,GAA/B,MAAwC,gBAAjD;AAAA,CAAhB;;AACA,IAAMK,QAAQ,GAAG,SAAXA,QAAW,CAACL,GAAD;AAAA,SAAU,OAAOA,GAAP,KAAe,QAAzB;AAAA,CAAjB;;AACA,IAAMM,MAAM,GAAG,SAATA,MAAS,CAACN,GAAD;AAAA,SAAU,QAAOA,GAAP,MAAe,QAAhB,IAA8BA,GAAG,KAAK,IAAtC,IAA+C,CAACD,OAAO,CAACC,GAAD,CAAhE;AAAA,CAAf;;AACA,IAAMO,UAAU,GAAG,SAAbA,UAAa,CAACP,GAAD;AAAA,SAAU,OAAOA,GAAP,KAAe,UAAzB;AAAA,CAAnB;AAGA;;;;;;;;AAMA,SAASQ,KAAT,CAAeC,GAAf,EAAoBC,OAApB,EAA6BC,KAA7B,EAAoC;AAClC,MAAIZ,OAAO,CAACU,GAAD,CAAX,EAAkB;AAA4D;AAA5D;AAAA;AAAA;;AAAA;AAChB,2BAAmBA,GAAnB,8HAAwB;AAAA,YAAfG,MAAe;AACtB,YAAMC,MAAM,GAAGL,KAAK,CAACI,MAAD,EAASF,OAAT,CAApB;AACA,YAAIG,MAAM,KAAKC,SAAf,EAA0B,SAFJ,CAEoD;;AAC1E,YAAIH,KAAK,KAAKG,SAAd,EAAyB,OAAOD,MAAP,CAHH,CAGoD;;AAC1E,eAAOL,KAAK,CAACI,MAAD,EAASF,OAAT,EAAkBC,KAAlB,CAAZ,CAJsB,CAIoD;AAC3E;AANe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAOhB,QAAIA,KAAK,KAAKG,SAAd,EAAyB,OAAOA,SAAP,CAPT,CAO4D;;AAC5E,QAAIL,GAAG,CAACM,MAAR,EAAgBP,KAAK,CAACC,GAAG,CAAC,CAAD,CAAJ,EAASC,OAAT,EAAkBC,KAAlB,CAAL,CARA,CAQ4D;;AAC5E,WAAOG,SAAP,CATgB,CAS4D;AAC7E;;AAED,MAAIP,UAAU,CAACE,GAAD,CAAd,EAAqB,OAAOA,GAAG,CAACC,OAAD,EAAUC,KAAV,CAAV;;AAErB,MAAIL,MAAM,CAACG,GAAD,CAAV,EAAiB;AACf,WAAQE,KAAK,KAAKG,SAAX,GAAwBL,GAAG,CAACC,OAAD,CAA3B,GAAwCD,GAAG,CAACC,OAAD,CAAH,GAAeC,KAA9D;AACD;;AAED,SAAOG,SAAP;AACD;;AAED,SAASE,SAAT,CAAmBC,EAAnB,EAAuB;AACrBA,IAAE,CAACC,GAAH,GAAS,CAAC,EAAD,EAAI,EAAJ,EAAO,EAAP,EAAU,CAAV,CAAT,CADqB,CACE;;AACvB,SAAOD,EAAP;AACD;;AAED,SAASE,gBAAT,CAA0BC,KAA1B,EAAiC;AAC/B,MAAIP,MAAM,GAAG,EAAb;AACAO,OAAK,CAACC,OAAN,CAAc,UAAAC,IAAI;AAAA,WAAIT,MAAM,CAACS,IAAI,CAAC,CAAD,CAAL,CAAN,GAAkBA,IAAI,CAAC,CAAD,CAA1B;AAAA,GAAlB;AACA,SAAOT,MAAP;AACD;;AAED,SAASU,eAAT,CAAyBC,QAAzB,EAAmC;AACjC,MAAIlB,MAAM,CAACkB,QAAD,CAAV,EAAsB,yBAAWA,QAAX;AACtB,MAAIzB,OAAO,CAACyB,QAAD,CAAX,EAAuB,OAAOL,gBAAgB,CAACK,QAAD,CAAvB;AACvB,MAAIjB,UAAU,CAACiB,QAAD,CAAd,EAA0B,OAAOA,QAAP;AAC1B,QAAM,IAAIC,KAAJ,CAAU,0CAA0CP,GAApD,CAAN;AACD;;AAGD,IAAMQ,aAAa,GAAG;AAA0D;AAC9E,SAAO,cAACR,GAAD,EAAMT,GAAN,EAAWkB,EAAX;AAAA,WAAkBC,IAAI,EAAE,OAAF,4BAAcV,GAAG,CAACW,KAAJ,CAAU,CAAV,CAAd,IAA6B,CAACN,eAAe,CAACL,GAAG,CAAC,CAAD,CAAJ,CAAhB,EAA0BT,GAA1B,CAA7B,EAA6DkB,EAA7D,CAAtB;AAAA,GADa;AAEpB,OAAK,WAACT,GAAD,EAAMT,GAAN;AAAA,WAAcS,GAAG,CAAC,CAAD,CAAjB;AAAA,GAFe;AAE0D;AAC9E,iBAAeY,WAHK;AAIpB,WAAS,eAACZ,GAAD,EAAMT,GAAN;AAAA,WAAcS,GAAG,CAACa,MAAJ,CAAW,UAACC,GAAD,EAAMC,OAAN;AAAA,aAAkBL,IAAI,CAACK,OAAD,EAAUxB,GAAV,CAAtB;AAAA,KAAX,EAAiD,IAAjD,CAAd;AAAA,GAJW;AAKpB,QAAM,aAACS,GAAD,EAAMT,GAAN,EAAc;AAAE,UAAM,IAAIgB,KAAJ,CAAU,oBAAV,CAAN;AAAuC,GALzC;AAMpB,QAAM,aAACP,GAAD,EAAMT,GAAN,EAAWkB,EAAX,EAAkB;AACtB;AACA,WAAOC,IAAI,CAACV,GAAG,CAAC,CAAD,CAAJ,EAAST,GAAT,EAAc,KAAd,CAAJ,GAA2BmB,IAAI,CAACV,GAAG,CAAC,CAAD,CAAJ,EAAST,GAAT,EAAckB,EAAd,CAA/B,GAAmDC,IAAI,CAACV,GAAG,CAAC,CAAD,CAAJ,EAAST,GAAT,EAAckB,EAAd,CAA9D;AACD,GATmB;AAUpB,OAAK,WAACT,GAAD,EAAMT,GAAN,EAAWkB,EAAX,EAAkB;AAAuD;AAC5E,QAAMO,CAAC,GAAGN,IAAI,CAACV,GAAG,CAAC,CAAD,CAAJ,EAAST,GAAT,EAAckB,EAAd,CAAd,CADqB,CACuD;;AAC5EO,KAAC,CAAChB,GAAF,CAAMiB,IAAN,CAAW,CAAX,EAFqB,CAEN;;AACf,WAAOD,CAAP;AACD;AAdmB,CAAtB;AAmBA,IAAME,MAAM,GAAG;AACb;AACA,QAAM,IAFO;AAGb,QAAM,KAHO;AAIb,SAAO,IAJM;AAMb;AACA,OAAK;AAAA,sCAAIC,IAAJ;AAAIA,UAAJ;AAAA;;AAAA,WAAaA,IAAI,CAACC,KAAL,CAAW,UAAAC,CAAC;AAAA,aAAIA,CAAC,KAAKF,IAAI,CAAC,CAAD,CAAd;AAAA,KAAZ,CAAb;AAAA,GAPQ;AAQb,OAAK;AAAA,uCAAIA,IAAJ;AAAIA,UAAJ;AAAA;;AAAA,WAAaA,IAAI,CAACN,MAAL,CAAY,UAACS,CAAD,EAAIC,CAAJ;AAAA,aAAUD,CAAC,GAAGC,CAAd;AAAA,KAAZ,CAAb;AAAA,GARQ;AASb,OAAK;AAAA,uCAAIJ,IAAJ;AAAIA,UAAJ;AAAA;;AAAA,WAAaA,IAAI,CAACtB,MAAL,KAAgB,CAAhB,GAAoB,CAACsB,IAAI,CAAC,CAAD,CAAzB,GAA+BA,IAAI,CAACN,MAAL,CAAY,UAACS,CAAD,EAAIC,CAAJ;AAAA,aAAUD,CAAC,GAAGC,CAAd;AAAA,KAAZ,CAA5C;AAAA,GATQ;AAUb,OAAK;AAAA,uCAAIJ,IAAJ;AAAIA,UAAJ;AAAA;;AAAA,WAAaA,IAAI,CAACN,MAAL,CAAY,UAACS,CAAD,EAAIC,CAAJ;AAAA,aAAUD,CAAC,GAAGC,CAAd;AAAA,KAAZ,CAAb;AAAA,GAVQ;AAWb,OAAK;AAAA,uCAAIJ,IAAJ;AAAIA,UAAJ;AAAA;;AAAA,WAAaA,IAAI,CAACtB,MAAL,KAAgB,CAAhB,GAAoB,IAAIsB,IAAI,CAAC,CAAD,CAA5B,GAAkCA,IAAI,CAACN,MAAL,CAAY,UAACS,CAAD,EAAIC,CAAJ;AAAA,aAAUD,CAAC,GAAGC,CAAd;AAAA,KAAZ,CAA/C;AAAA,GAXQ;AAcb;AACA;AAEA;AACA;AACAC,cAAY,EAAEA,YAnBD;AAmByC;AACtDC,MAAI,EAAEA,IApBO;AAqBb7C,SAAO,EAAE,iEArBI;AAsBb8C,MAAI,EAAE,eAACJ,CAAD;AAAA,WAAOZ,IAAI,CAACY,CAAD,EAAIJ,MAAJ,CAAX;AAAA;AAtBO,CAAf,C,CA2BA;;AACAA,MAAM,CAAC,GAAD,CAAN,GAAkB,UAASI,CAAT,EAAWC,CAAX,EAAc;AAAE,SAAOD,CAAC,GAACC,CAAT;AAAa,CAA/C;;AACAL,MAAM,CAAC,GAAD,CAAN,GAAkB,UAASI,CAAT,EAAWC,CAAX,EAAc;AAAE,SAAOD,CAAC,GAACC,CAAT;AAAa,CAA/C;;AACAL,MAAM,CAAC,KAAD,CAAN,GAAkB,UAASI,CAAT,EAAWC,CAAX,EAAc;AAAE,SAAOD,CAAC,YAAYC,CAApB;AAAwB,CAA1D;;AACAL,MAAM,CAAC,MAAD,CAAN,GAAkB,UAASI,CAAT,EAAc;AAAE,iBAAcA,CAAd;AAAkB,CAApD,C,CACA;;;AACAJ,MAAM,CAAC,KAAD,CAAN,GAAkB,UAASI,CAAT,EAAc;AAAE,SAAO,KAAKA,CAAC,CAACK,IAAF,CAAOC,KAAP,CAAaN,CAAb,EAAgBO,SAAhB,CAAL,GAAP;AAA0C,CAA5E;;AACAX,MAAM,CAAC,KAAD,CAAN,GAAkB,UAASI,CAAT,EAAWC,CAAX,EAAc;AAAE,SAAO,OAAOD,CAAC,CAACC,CAAD,CAAf;AAAqB,CAAvD;;AACAL,MAAM,CAAC,MAAD,CAAN,GAAkB,YAAW;AAAE,SAAOY,KAAK,CAAC9C,SAAN,CAAgB2B,KAAhB,CAAsBzB,IAAtB,CAA2B2C,SAA3B,CAAP;AAA+C,CAA9E;;AACAX,MAAM,CAAC,QAAD,CAAN,GAAoB;AAAA,qCAAIC,IAAJ;AAAIA,QAAJ;AAAA;;AAAA,SAAaA,IAAb;AAAA,CAApB;;AACAD,MAAM,CAAC,KAAD,CAAN,GAAkB,UAASI,CAAT,EAAWC,CAAX,EAAc;AAAE,SAAOA,CAAC,CAACQ,GAAF,CAAMT,CAAN,CAAP;AAAkB,CAApD;;AACAJ,MAAM,CAAC,OAAD,CAAN,GAAkB,UAASI,CAAT,EAAc;AAAE,QAAMA,CAAN;AAAW,CAA7C;;AACAJ,MAAM,CAAC,UAAD,CAAN,GAAqB,UAASI,CAAT,EAAY;AAAE,SAAOA,CAAP;AAAU,CAA7C,C,CAGA;;;AACAJ,MAAM,CAAC,OAAD,CAAN,GAAkB,UAASc,CAAT,EAAWC,CAAX,EAAc;AAAE,SAAOD,CAAC,CAACD,GAAF,CAAM,UAASG,EAAT,EAAY;AAAC,WAAOA,EAAE,CAACD,CAAD,CAAT;AAAa,GAAhC,CAAP;AAA2C,CAA7E,C,CAGA;;;AACAf,MAAM,CAAC,QAAD,CAAN,GAAmB,UAASI,CAAT,EAAY;AAAE,SAAOa,MAAM,CAACP,KAAP,CAAa,IAAb,EAAmBC,SAAnB,CAAP;AAAsC,CAAvE;;AAGAX,MAAM,CAAC,GAAD,CAAN,GAAc,UAASI,CAAT,EAAY;AAAE,SAAOA,CAAC,CAACrC,QAAF,EAAP;AAAsB,CAAlD;;AACAiC,MAAM,CAAC,GAAD,CAAN,CAAYlB,GAAZ,GAAkB,CAAC,EAAD,EAAI,EAAJ,EAAO,EAAP,EAAU,CAAV,CAAlB,C,CAAgC;;AAGhCkB,MAAM,CAAC,GAAD,CAAN,GAAc,UAASI,CAAT,EAAY;AAAE,SAAOA,CAAC,CAACrC,QAAF,EAAP;AAAsB,CAAlD;;AACAiC,MAAM,CAAC,GAAD,CAAN,CAAYlB,GAAZ,GAAkB,CAAC,EAAD,EAAI,EAAJ,EAAO,EAAP,EAAU,CAAV,CAAlB,C,CAAgC;;AAEhCkB,MAAM,CAAC,GAAD,CAAN,GAAc,YAAW;AAAE,SAAOY,KAAK,CAAC9C,SAAN,CAAgB2B,KAAhB,CAAsBzB,IAAtB,CAA2B2C,SAA3B,CAAP;AAA+C,CAA1E;;AAGAX,MAAM,CAAC,aAAD,CAAN,GAAwB,UAASI,CAAT,EAAY;AAAE,SAAOG,IAAI,CAACW,KAAL,CAAWd,CAAX,CAAP;AAAuB,CAA7D,C,CACA;AACA;;;AAGAJ,MAAM,CAAC,KAAD,CAAN,GAAgB,UAAUI,CAAV,EAAa;AAC3B,SAAOG,IAAI,CAACY,SAAL,CAAe3B,IAAI,CAACe,IAAI,CAACW,KAAL,CAAWd,CAAX,CAAD,EAAgBJ,MAAhB,CAAnB,CAAP;AACD,CAFD;;AAKAA,MAAM,CAAC,IAAD,CAAN,GAAe,YAAW;AACxB,SAAOY,KAAK,CAAC9C,SAAN,CAAgB2B,KAAhB,CAAsBzB,IAAtB,CAA2B2C,SAA3B,EAAsCS,MAAtC,CAA6C,CAA7C,CAAP;AACD,CAFD;;AAGApB,MAAM,CAAC,IAAD,CAAN,CAAalB,GAAb,GAAmB,CAAC,EAAD,EAAI,EAAJ,EAAO,EAAP,EAAU,CAAV,CAAnB,C,CAAiC;;AAGjCkB,MAAM,CAAC,IAAD,CAAN,GAAe,YAAW;AACxB;AACA;AACA;AACA,MAAIJ,GAAG,GAAGe,SAAS,CAAC,CAAD,CAAnB;AACA,MAAI7B,GAAG,GAAG8B,KAAK,CAAC9C,SAAN,CAAgB2B,KAAhB,CAAsBzB,IAAtB,CAA2B2C,SAA3B,CAAV;;AACA,OAAI,IAAIU,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGvC,GAAG,CAACH,MAAvB,EAA+B0C,CAAC,EAAhC,EAAoC;AAClC,QAAIC,GAAG,GAAGxC,GAAG,CAACuC,CAAD,CAAb;;AACA,QAAI,CAAC1D,OAAO,CAAC2D,GAAD,CAAZ,EAAmB;AACjB;AACAA,SAAG,GAAG,CAAC,IAAD,EAAO1B,GAAP,EAAY0B,GAAZ,CAAN;AACD,KAHD,MAGO,IAAIA,GAAG,CAAC,CAAD,CAAH,KAAW,IAAX,IAAmBA,GAAG,CAAC3C,MAAJ,IAAc,CAAjC,KAAuC,OAAO2C,GAAG,CAAC,CAAD,CAAV,KAAmB,QAAnB,IAA+B,OAAOA,GAAG,CAAC,CAAD,CAAV,KAAmB,QAAzF,CAAJ,EAAwG;AAC7GA,SAAG,GAAG,CAAC,IAAD,EAAO1B,GAAP,EAAY0B,GAAG,CAAC,CAAD,CAAf,CAAN;AACD,KAFM,MAEA;AACL;AACAA,SAAG,CAACF,MAAJ,CAAW,CAAX,EAAc,CAAd,EAAiBxB,GAAjB;AACD;;AACDA,OAAG,GAAG0B,GAAN,CAXkC,CAYlC;AACD;;AACD,SAAO1B,GAAP,CApBwB,CAqBxB;AACD,CAtBD;;AAuBAI,MAAM,CAAC,IAAD,CAAN,CAAalB,GAAb,GAAmB,CAAC,EAAD,EAAI,EAAJ,EAAO,EAAP,EAAU,CAAV,CAAnB,C,CAAiC;;AAGjCkB,MAAM,CAAC,KAAD,CAAN,GAAgB,YAAW;AACzB;AACA;AACA;AACA,MAAIJ,GAAG,GAAGe,SAAS,CAAC,CAAD,CAAnB;AACA,MAAI7B,GAAG,GAAG8B,KAAK,CAAC9C,SAAN,CAAgB2B,KAAhB,CAAsBzB,IAAtB,CAA2B2C,SAA3B,CAAV;;AACA,OAAI,IAAIU,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGvC,GAAG,CAACH,MAAvB,EAA+B0C,CAAC,EAAhC,EAAoC;AAClCvC,OAAG,CAACuC,CAAD,CAAH,CAAOtB,IAAP,CAAYH,GAAZ;AACAA,OAAG,GAAGd,GAAG,CAACuC,CAAD,CAAT,CAFkC,CAGlC;AACD;;AACD,SAAOzB,GAAP,CAXyB,CAYzB;AACD,CAbD;;AAcAI,MAAM,CAAC,KAAD,CAAN,CAAclB,GAAd,GAAoB,CAAC,EAAD,EAAI,EAAJ,EAAO,EAAP,EAAU,CAAV,CAApB,C,CAAkC;AAGlC;AACA;AACA;;AACAkB,MAAM,CAAC,QAAD,CAAN,GAAmB,YAAW;AAC5B,MAAIlB,GAAG,GAAG8B,KAAK,CAAC9C,SAAN,CAAgB2B,KAAhB,CAAsBzB,IAAtB,CAA2B2C,SAA3B,CAAV;AACA7B,KAAG,CAACsC,MAAJ,CAAW,CAAX,EAAa,CAAb,EAAe,GAAf;AACA,SAAOtC,GAAP;AACD,CAJD;;AAKAkB,MAAM,CAAC,QAAD,CAAN,CAAiBlB,GAAjB,GAAuB,CAAC,EAAD,EAAI,EAAJ,EAAO,EAAP,EAAU,CAAV,CAAvB,C,CAAqC;;AAGrC,IAAIyC,OAAO,GAAG,CAAC,OAAD,EACZ;AACA,CAAC,KAAD,EAAQ,KAAR,EAAe,CAAC,IAAD,EAAO,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAAP,EACb,CAAC,GAAD,EAAM,SAAN,EAAiB,CAAC,GAAD,EAAM,WAAN,CAAjB,EAAqC,GAArC,EAA0C,GAA1C,CADa,CAAf,CAFY,EAIZ,CAAC,KAAD,EAAQ,KAAR,EAAe,CAAC,IAAD,EAAO,CAAC,GAAD,EAAM,GAAN,CAAP,EACb,CAAC,GAAD,EAAM,SAAN,EAAiB,CAAC,GAAD,EAAM,gBAAN,CAAjB,EAA0C,GAA1C,EAA+C,GAA/C,CADa,CAAf,CAJY,EAMZ,CAAC,KAAD,EAAQ,KAAR,EAAe,CAAC,IAAD,EAAO,CAAC,GAAD,EAAM,GAAN,CAAP,EACb,CAAC,GAAD,EAAM,GAAN,EAAW,CAAC,GAAD,EAAM,KAAN,CAAX,EAAyB,CAAC,IAAD,EAAO,CAAC,GAAD,CAAP,EAAc,CAAC,GAAD,EAAM,GAAN,CAAd,CAAzB,CADa,CAAf,CANY,EAQZ,CAAC,KAAD,EAAQ,MAAR,EAAgB,CAAC,IAAD,EAAO,CAAC,GAAD,EAAM,GAAN,CAAP,EAAmB,GAAnB,CAAhB,CARY,EASZ,CAAC,KAAD,EAAQ,IAAR,EAAc,CAAC,IAAD,EAAO,CAAC,GAAD,EAAM,GAAN,CAAP,EACZ,CAAC,IAAD,EAAO,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAAP,EAAwB,KAAxB,EAA+B,IAA/B,CADY,CAAd,CATY,EAWZ,CAAC,KAAD,EAAQ,GAAR,EAAa,CAAC,IAAD,EAAO,CAAC,GAAD,EAAM,GAAN,CAAP,EACX,CAAC,IAAD,EAAO,CAAC,IAAD,EAAO,GAAP,EAAY,GAAZ,CAAP,EACE,CAAC,IAAD,EAAO,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAAP,EAAwB,KAAxB,EAA+B,IAA/B,CADF,EAEE,KAFF,CADW,CAAb,CAXY,EAeZ,CAAC,KAAD,EAAQ,IAAR,EAAc,CAAC,IAAD,EAAO,CAAC,GAAD,EAAM,GAAN,CAAP,EACZ,CAAC,IAAD,EAAO,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAAP,EAAwB,KAAxB,EAA+B,IAA/B,CADY,CAAd,CAfY,EAkBZ,CAAC,KAAD,EAAQ,SAAR,EAAmB,CAAC,IAAD,EAAO,CAAC,GAAD,CAAP,EACjB,CAAC,GAAD,EAAM,CAAC,IAAD,EAAO,CAAC,IAAD,EAAO,QAAP,EAAiB,CAAC,GAAD,EAAM,WAAN,CAAjB,CAAP,EAA6C,CAAC,GAAD,EAAM,UAAN,CAA7C,CAAN,EACE,CAAC,GAAD,EAAM,MAAN,CADF,EACiB,GADjB,CADiB,CAAnB,CAlBY,EAsBZ,CAAC,KAAD,EAAQ,KAAR,EAAe,CAAC,IAAD,EAAO,CAAC,GAAD,CAAP,EAAc,CAAC,IAAD,EAAO,GAAP,EAAY,KAAZ,EAAmB,IAAnB,CAAd,CAAf,CAtBY,EAwBZ,CAAC,KAAD,EAAQ,OAAR,EAAiB,CAAC,IAAD,EAAO,CAAC,GAAD,CAAP,EAAc,CAAC,GAAD,EAAM,IAAN,EAAY,GAAZ,CAAd,CAAjB,CAxBY,EAyBZ,CAAC,KAAD,EAAQ,OAAR,EAAiB,CAAC,IAAD,EAAO,CAAC,GAAD,CAAP,EAAc,CAAC,GAAD,EAAM,IAAN,EAAY,GAAZ,CAAd,CAAjB,CAzBY,EA0BZ,CAAC,KAAD,EAAQ,QAAR,EAAkB,CAAC,IAAD,EAAO,CAAC,GAAD,CAAP,EAAc,CAAC,GAAD,EAAM,KAAN,EAAa,GAAb,CAAd,CAAlB,CA1BY,EA2BZ,CAAC,KAAD,EAAQ,SAAR,EAAmB,CAAC,IAAD,EAAO,CAAC,GAAD,CAAP,EACjB,CAAC,IAAD,EAAO,CAAC,GAAD,EAAM,GAAN,EAAW,IAAX,CAAP,EACE,KADF,EAEE,CAAC,GAAD,EAAM,CAAC,GAAD,EAAM,QAAN,CAAN,EACE,CAAC,IAAD,EAAO,CAAC,IAAD,EAAO,GAAP,EAAY,CAAC,GAAD,EAAM,aAAN,CAAZ,CAAP,EACE,CAAC,GAAD,EAAM,MAAN,CADF,CADF,CAFF,CADiB,CAAnB,CA3BY,EAkCZ,CAAC,KAAD,EAAQ,QAAR,EAAkB,CAAC,IAAD,EAAO,CAAC,GAAD,EAAM,GAAN,CAAP,EAChB,CAAC,GAAD,EAAM,CAAC,KAAD,EAAQ,CAAC,IAAD,EAAO,MAAP,EAAe,CAAC,GAAD,EAAM,WAAN,CAAf,CAAR,EAA4C,GAA5C,CAAN,EACE,CAAC,GAAD,EAAM,MAAN,CADF,EACiB,CAAC,GAAD,EAAM,GAAN,CADjB,CADgB,CAAlB,CAlCY,EAqCZ,CAAC,KAAD,EAAQ,KAAR,EAAe,CAAC,IAAD,EAAO,CAAC,GAAD,EAAM,GAAN,CAAP,EACb,CAAC,GAAD,EAAM,CAAC,KAAD,EAAQ,CAAC,IAAD,EAAO,CAAC,GAAD,CAAP,EACZ,CAAC,IAAD,EAAO,CAAC,SAAD,EAAY,GAAZ,CAAP,EACE,GADF,EAEE,CAAC,GAAD,EAAM,MAAN,EAAc,CAAC,GAAD,EAAM,WAAN,CAAd,EAAkC,GAAlC,CAFF,CADY,CAAR,EAIJ,GAJI,CAAN,EAKE,CAAC,GAAD,EAAM,MAAN,CALF,EAKiB,CAAC,GAAD,EAAM,EAAN,CALjB,CADa,CAAf,CArCY,EA4CZ,CAAC,KAAD,EAAQ,KAAR,EAAe,CAAC,IAAD,EAAO,CAAC,GAAD,EAAM,GAAN,CAAP,EACb,CAAC,OAAD,EACE,CAAC,GAAD,EAAM,SAAN,EAAiB,CAAC,GAAD,EAAM,KAAN,CAAjB,EACI,CAAC,GAAD,EAAM,CAAC,KAAD,EAAQ,CAAC,IAAD,EAAO,MAAP,EAAe,CAAC,GAAD,EAAM,WAAN,CAAf,CAAR,EAA4C,GAA5C,CAAN,EACF,CAAC,GAAD,EAAM,MAAN,CADE,EACa,CAAC,GAAD,EAAM,GAAN,CADb,CADJ,CADF,EAIE,IAJF,CADa,CAAf,CA5CY,EAkDZ,CAAC,KAAD,EAAQ,SAAR,EAAmB,CAAC,IAAD,EAAO,CAAC,GAAD,EAAM,GAAN,CAAP,EACjB,CAAC,OAAD,EAAU,CAAC,GAAD,EAAM,SAAN,EAAiB,CAAC,GAAD,EAAM,KAAN,CAAjB,EACR,CAAC,GAAD,EAAM,CAAC,KAAD,EAAQ,CAAC,IAAD,EAAO,CAAC,GAAD,CAAP,EACZ,CAAC,IAAD,EAAO,CAAC,SAAD,EAAY,GAAZ,CAAP,EACE,GADF,EAEE,CAAC,GAAD,EAAM,MAAN,EAAc,CAAC,GAAD,EAAM,WAAN,CAAd,EAAkC,GAAlC,CAFF,CADY,CAAR,EAIJ,GAJI,CAAN,EAKE,CAAC,GAAD,EAAM,MAAN,CALF,EAKiB,CAAC,GAAD,EAAM,GAAN,CALjB,CADQ,CAAV,EAOE,IAPF,CADiB,CAAnB,CAlDY,EA4DZ,CAAC,KAAD,EAAQ,OAAR,EAAiB,CAAC,IAAD,EAAO,CAAC,GAAD,CAAP,EACf,CAAC,GAAD,EAAM,OAAN,EAAe,CAAC,GAAD,EAAM,SAAN,CAAf,EAAiC,GAAjC,CADe,CAAjB,CA5DY,EA8DZ,CAAC,KAAD,EAAQ,WAAR,EAAqB,CAAC,IAAD,EAAO,CAAC,GAAD,EAAM,GAAN,CAAP,EACnB,CAAC,GAAD,EAAM,GAAN,EAAW,CAAC,GAAD,EAAM,gBAAN,CAAX,EAAoC,GAApC,CADmB,CAArB,CA9DY,EAgEZ,CAAC,KAAD,EAAQ,KAAR,EAAe,CAAC,IAAD,EAAO,CAAC,GAAD,EAAM,GAAN,CAAP,EACb,CAAC,IAAD,EAAO,CAAC,WAAD,EAAc,GAAd,EAAmB,GAAnB,CAAP,EAAgC,CAAC,IAAD,EAAO,GAAP,EAAY,GAAZ,CAAhC,EAAkD,IAAlD,CADa,CAAf,CAhEY,EAkEZ,CAAC,KAAD,EAAQ,KAAR,EAAe,CAAC,IAAD,EAAO,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAAP,EACb,CAAC,OAAD,EAAU,CAAC,IAAD,EAAO,GAAP,EAAY,GAAZ,EAAiB,GAAjB,CAAV,EAAiC,GAAjC,CADa,CAAf,CAlEY,EAoEZ,CAAC,KAAD,EAAQ,MAAR,EAAgB,CAAC,IAAD,EAAO,CAAC,GAAD,CAAP,EACd,CAAC,GAAD,EAAM,QAAN,EAAgB,CAAC,GAAD,EAAM,MAAN,CAAhB,EAA+B,GAA/B,CADc,CAAhB,CApEY,EAsEZ,CAAC,KAAD,EAAQ,MAAR,EAAgB,CAAC,IAAD,EAAO,CAAC,GAAD,CAAP,EACd,CAAC,GAAD,EAAM,QAAN,EAAgB,CAAC,GAAD,EAAM,QAAN,CAAhB,EAAiC,GAAjC,CADc,CAAhB,CAtEY,EAyEZ,CAAC,KAAD,EAAQ,MAAR,EAAgB,CAAC,IAAD,EAAO,CAAC,GAAD,EAAM,GAAN,CAAP,EACd,CAAC,GAAD,EAAM,CAAC,GAAD,EAAM,EAAN,CAAN,EACE,CAAC,GAAD,EAAM,QAAN,CADF,EACmB,CAAC,MAAD,EAAS,GAAT,CADnB,EACkC,GADlC,CADc,CAAhB,CAzEY,EA4EZ,CAAC,KAAD,EAAQ,QAAR,EAAkB,CAAC,IAAD,EAAO,CAAC,GAAD,EAAM,GAAN,CAAP,EAChB,CAAC,GAAD,EAAM,CAAC,IAAD,EAAO,CAAC,MAAD,CAAP,EAAiB,CAAC,GAAD,EAAM,QAAN,CAAjB,CAAN,EACE,CAAC,GAAD,EAAM,OAAN,CADF,EACkB,CAAC,MAAD,CADlB,EAC4B,GAD5B,CADgB,CAAlB,CA5EY,EA+EZ,CAAC,KAAD,EAAQ,KAAR,EAAe,KAAf,CA/EY,EAgFZ,CAAC,KAAD,EAAQ,OAAR,EAAiB,CAAC,IAAD,EAAO,CAAC,GAAD,CAAP,EACf,CAAC,IAAD,EAAO,CAAC,GAAD,EAAM,CAAC,IAAD,EAAO,GAAP,EAAY,CAAC,GAAD,EAAM,QAAN,CAAZ,CAAN,EAAoC,CAApC,CAAP,EACE,CAAC,KAAD,EAAQ,GAAR,EAAa,CAAb,CADF,EAEE,IAFF,CADe,CAAjB,CAhFY,EAoFZ,CAAC,KAAD,EAAQ,MAAR,EAAgB,CAAC,IAAD,EAAO,CAAC,GAAD,CAAP,EACd,CAAC,KAAD,EAAQ,GAAR,EAAa,CAAC,GAAD,EAAM,CAAC,IAAD,EAAO,GAAP,EAAY,CAAC,GAAD,EAAM,QAAN,CAAZ,CAAN,EAAoC,CAApC,CAAb,CADc,CAAhB,CApFY,EAsFZ,CAAC,KAAD,EAAQ,OAAR,EAAiB,CAAC,IAAD,EAAO,CAAC,GAAD,CAAP,EACf,CAAC,IAAD,EAAO,GAAP,EAAY,CAAC,GAAD,EAAM,QAAN,CAAZ,CADe,CAAjB,CAtFY,EAwFZ,CAAC,KAAD,EAAQ,QAAR,EAAkB,CAAC,IAAD,EAAO,CAAC,GAAD,CAAP,EAChB,CAAC,IAAD,EAAO,CAAC,OAAD,EAAU,GAAV,CAAP,EACE,CAAC,GAAD,EAAM,CAAN,EAAS,CAAC,IAAD,EAAO,GAAP,EAAY,CAAC,GAAD,EAAM,QAAN,CAAZ,CAAT,CADF,EAEE,CAAC,GAAD,EAAM,GAAN,EAAW,IAAX,CAFF,CADgB,CAAlB,CAxFY,EA4FZ,CAAC,KAAD,EAAQ,OAAR,EAAiB,CAAC,IAAD,EAAO,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,KAAhB,CAAP,EACf,CAAC,GAAD,EAAM,GAAN,EAAW,CAAC,GAAD,EAAM,OAAN,CAAX,EAA2B,GAA3B,EACE,CAAC,IAAD,EAAO,CAAC,GAAD,EAAM,CAAC,IAAD,EAAO,KAAP,EAAc,CAAC,GAAD,EAAM,QAAN,CAAd,CAAN,EAAsC,CAAtC,CAAP,EACE,CAAC,KAAD,EAAQ,KAAR,EAAe,CAAf,CADF,EAEE,CAAC,IAAD,EAAO,GAAP,EAAY,CAAC,GAAD,EAAM,QAAN,CAAZ,CAFF,CADF,CADe,CAAjB,CA5FY,EAiGZ,CAAC,KAAD,EAAQ,MAAR,EAAgB,CAAC,IAAD,EAAO,CAAC,GAAD,CAAP,EAAc,CAAC,OAAD,EAAU,GAAV,EAAe,CAAf,CAAd,CAAhB,CAjGY,EAmGZ,CAAC,KAAD,EAAQ,OAAR,EAAiB,CAAC,IAAD,EAAO,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAAP,EACf,CAAC,GAAD,EAAM,GAAN,EAAW,CAAC,GAAD,EAAM,OAAN,CAAX,EAA2B,GAA3B,EACE,CAAC,QAAD,EAAW,CAAC,OAAD,EAAU,GAAV,EAAe,CAAf,EAAkB,CAAC,CAAnB,CAAX,EAAkC,CAAC,MAAD,EAAS,GAAT,CAAlC,CADF,CADe,CAAjB,CAnGY,EAuGZ,CAAC,KAAD,EAAQ,KAAR,EAAe,CAAC,GAAD,EAAM,CAAC,IAAD,EAAO,CAAC,GAAD,EAAM,IAAN,CAAP,EACnB,CAAC,IAAD,EAAO,CAAC,QAAD,EAAW,IAAX,CAAP,EACE,IADF,EAEE,CAAC,IAAD,EAAO,CAAC,GAAD,EAAM,CAAN,EAAS,CAAC,IAAD,EAAO,IAAP,EAAa,CAAC,GAAD,EAAM,QAAN,CAAb,CAAT,CAAP,EACE,CAAC,OAAD,EAAU,IAAV,CADF,EAEE,CAAC,MAAD,EAAS,CAAC,GAAD,EAAM,KAAN,CAAT,EAAuB,CAAC,MAAD,EAAS,CAAC,GAAD,EAAM,OAAN,CAAT,EAAyB,CAAC,OAAD,EAAU,IAAV,CAAzB,CAAvB,EACE,CAAC,MAAD,EAAS,CAAC,GAAD,EAAM,IAAN,CAAT,EAAsB,CAAC,GAAD,EAAM,OAAN,CAAtB,EACE,CAAC,QAAD,EAAW,CAAC,GAAD,EAAM,CAAC,KAAD,CAAN,CAAX,EAA2B,CAAC,MAAD,EAAS,IAAT,CAA3B,CADF,EAEE,CAAC,GAAD,EAAM,OAAN,CAFF,CADF,CAFF,CAFF,CADmB,CAAN,CAAf,CAvGY,EAiHZ,CAAC,KAAD,EAAQ,IAAR,EAAc,CAAC,GAAD,EAAM,CAAC,IAAD,EAAO,CAAC,GAAD,EAAM,IAAN,CAAP,EAClB,CAAC,IAAD,EAAO,CAAC,QAAD,EAAW,IAAX,CAAP,EACE,IADF,EAEE,CAAC,IAAD,EAAO,CAAC,GAAD,EAAM,CAAN,EAAS,CAAC,IAAD,EAAO,IAAP,EAAa,CAAC,GAAD,EAAM,QAAN,CAAb,CAAT,CAAP,EACE,CAAC,OAAD,EAAU,IAAV,CADF,EAEE,CAAC,MAAD,EAAS,CAAC,GAAD,EAAM,KAAN,CAAT,EAAuB,CAAC,MAAD,EAAS,CAAC,GAAD,EAAM,MAAN,CAAT,EAAwB,CAAC,OAAD,EAAU,IAAV,CAAxB,CAAvB,EACE,CAAC,MAAD,EAAS,CAAC,GAAD,EAAM,IAAN,CAAT,EAAsB,CAAC,GAAD,EAAM,MAAN,CAAtB,EACE,CAAC,GAAD,EAAM,MAAN,CADF,EAEE,CAAC,QAAD,EAAW,CAAC,GAAD,EAAM,CAAC,IAAD,CAAN,CAAX,EAA0B,CAAC,MAAD,EAAS,IAAT,CAA1B,CAFF,CADF,CAFF,CAFF,CADkB,CAAN,CAAd,CAjHY,EA0HZ,IA1HY,CAAd;AA6HA/B,IAAI,CAAC+B,OAAD,EAAUvB,MAAV,CAAJ;;AAGA,SAASN,WAAT,CAAqBZ,GAArB,EAA0BT,GAA1B,EAAqD;AAAA,MAAtBmD,aAAsB,uEAAN,IAAM;;AACnD,SAAO,IAAP,EAAa;AACX,QAAI,CAAC7D,OAAO,CAACmB,GAAD,CAAZ,EAAmB;AACnB,QAAI,OAAOA,GAAG,CAAC,CAAD,CAAV,KAAkB,QAAtB,EAAgC;AAEhC,QAAMqB,CAAC,GAAG/B,KAAK,CAACC,GAAD,EAAMS,GAAG,CAAC,CAAD,CAAT,CAAf;AACA,QAAI,CAACX,UAAU,CAACgC,CAAD,CAAf,EAAoB;AAEpB,QAAI,CAACxC,OAAO,CAACwC,CAAC,CAACrB,GAAH,CAAZ,EAAqB;AACrB,QAAI,CAACqB,CAAC,CAACrB,GAAF,CAAM,CAAN,CAAL,EAAe,MARJ,CAUX;;AACAA,OAAG,GAAGqB,CAAC,CAACO,KAAF,CAAQP,CAAR,EAAWrB,GAAG,CAACW,KAAJ,CAAU,CAAV,CAAX,CAAN;AACD;;AACD,SAAOX,GAAP;AACD;;AAGD,SAAS2C,QAAT,CAAkB3C,GAAlB,EAAuBT,GAAvB,EAA4BqD,KAA5B,EAAmC;AACjC;AACA;AACArD,KAAG,GAAGR,MAAM,CAAC8D,MAAP,CAActD,GAAd,CAAN;;AACA,OAAK,IAAIgD,CAAC,GAAC,CAAX,EAAcA,CAAC,GAACvC,GAAG,CAACH,MAApB,EAA4B0C,CAAC,EAA7B,EAAiC;AAC/B,QAAIvC,GAAG,CAACuC,CAAD,CAAH,IAAU,GAAd,EAAmB;AACjB;AACAhD,SAAG,CAACS,GAAG,CAACuC,CAAC,GAAC,CAAH,CAAJ,CAAH,GAAgBT,KAAK,CAAC9C,SAAN,CAAgB2B,KAAhB,CAAsBzB,IAAtB,CAA2B0D,KAA3B,EAAkCL,CAAlC,CAAhB;AACA;AACD,KAJD,MAIO;AACLhD,SAAG,CAACS,GAAG,CAACuC,CAAD,CAAJ,CAAH,GAAcK,KAAK,CAACL,CAAD,CAAnB;AACD;AACF;;AACD,SAAOhD,GAAP;AACD;;AAGD,SAASuD,QAAT,CAAkB9C,GAAlB,EAAuBT,GAAvB,EAAkD;AAAA,MAAtBmD,aAAsB,uEAAN,IAAM;;AAChD,MAAI7D,OAAO,CAACmB,GAAD,CAAX,EAAkB;AAAwB;AACxC,WAAOA,GAAG,CAAC+B,GAAJ,CAAQ,UAAAgB,CAAC;AAAA,aAAIrC,IAAI,CAACqC,CAAD,EAAIxD,GAAJ,EAASmD,aAAT,CAAR;AAAA,KAAT,CAAP;AACD;;AAED,MAAIvD,QAAQ,CAAC,QAAD,CAAZ,EAAwB;AACtB,QAAMM,KAAK,GAAGH,KAAK,CAACC,GAAD,EAAMS,GAAN,CAAnB;;AAEA,QAAIP,KAAK,KAAKG,SAAd,EAAyB;AAAqB;AAC5C,aAAOH,KAAP;AACD,KALqB,CAOtB;;;AACA,WAAOiD,aAAa,GAAG1C,GAAH,GAASJ,SAA7B;AACD;;AAED,SAAOI,GAAP;AACD;;AAGD,SAASU,IAAT,CAAcV,GAAd,EAAmBT,GAAnB,EAA8C;AAAA,MAAtBmD,aAAsB,uEAAN,IAAM;;AAC5C,SAAO,IAAP,EAAa;AACX,QAAI,CAAC7D,OAAO,CAACmB,GAAD,CAAZ,EAAmB;AACjB,aAAO8C,QAAQ,CAAC9C,GAAD,EAAMT,GAAN,EAAWmD,aAAX,CAAf;AACD,KAHU,CAKX;;;AACA1C,OAAG,GAAGY,WAAW,CAACZ,GAAD,EAAMT,GAAN,CAAjB;AACA,QAAI,CAACuC,KAAK,CAACjD,OAAN,CAAcmB,GAAd,CAAL,EAAyB,OAAOA,GAAP,CAPd,CAOiE;;AAC5E,QAAIA,GAAG,CAACH,MAAJ,KAAe,CAAnB,EAAsB,OAAO,IAAP,CARX,CAQiE;;AAE5E,QAAMmD,EAAE,GAAGhD,GAAG,CAAC,CAAD,CAAd;;AAEA,QAAIb,QAAQ,CAAC6D,EAAD,CAAR,IAAiBA,EAAE,IAAIxC,aAA3B,EAA2C;AACzC,aAAOA,aAAa,CAACwC,EAAD,CAAb,CAAkBhD,GAAG,CAACW,KAAJ,CAAU,CAAV,CAAlB,EAAgCpB,GAAhC,EAAqCmD,aAArC,CAAP;AACD;;AAED,QAAI1C,GAAG,CAAC,CAAD,CAAH,KAAW,KAAf,EAAsB;AAAS;AAC7B,aAAQT,GAAG,CAACS,GAAG,CAAC,CAAD,CAAJ,CAAH,GAAcU,IAAI,CAACV,GAAG,CAAC,CAAD,CAAJ,EAAST,GAAT,EAAcmD,aAAd,CAA1B;AAED,KAHD,MAGO,IAAI1C,GAAG,CAAC,CAAD,CAAH,KAAW,IAAf,EAAqB;AAAG;AAC7B,UAAIkC,EAAE,GAAGY,QAAQ,CAAC9C,GAAG,CAACW,KAAJ,CAAU,CAAV,CAAD,EAAepB,GAAf,EAAoBmD,aAApB,CAAjB;AACA,UAAIO,CAAC,GAAGf,EAAE,CAAC,CAAD,CAAF,CAAMA,EAAE,CAAC,CAAD,CAAR,CAAR;AACA,aAAO,KAAKA,EAAL,GAAUA,EAAE,CAAC,CAAD,CAAF,CAAMA,EAAE,CAAC,CAAD,CAAR,IAAeA,EAAE,CAAC,CAAD,CAA3B,GAAiCe,CAAxC;AACD,KAJM,MAIA,IAAIjD,GAAG,CAAC,CAAD,CAAH,IAAU,GAAd,EAAmB;AAAI;AAC5B,UAAIkC,EAAE,GAAGY,QAAQ,CAAC9C,GAAG,CAACW,KAAJ,CAAU,CAAV,CAAD,EAAepB,GAAf,EAAoBmD,aAApB,CAAjB;AACA,UAAIO,CAAC,GAAGf,EAAE,CAAC,CAAD,CAAF,CAAMA,EAAE,CAAC,CAAD,CAAR,CAAR,CAFwB,CAGxB;AACA;AACA;;AACA,aAAOe,CAAC,CAACrB,KAAF,CAAQM,EAAE,CAAC,CAAD,CAAV,EAAeA,EAAE,CAACvB,KAAH,CAAS,CAAT,CAAf,CAAP;AACD,KAPM,MAOA,IAAIX,GAAG,CAAC,CAAD,CAAH,IAAU,KAAd,EAAqB;AAAE;AAC5B,UAAI;AACF,eAAOU,IAAI,CAACV,GAAG,CAAC,CAAD,CAAJ,EAAST,GAAT,CAAX;AACD,OAFD,CAEE,OAAOwD,CAAP,EAAU;AACV,eAAOrC,IAAI,CAACV,GAAG,CAAC,CAAD,CAAH,CAAO,CAAP,CAAD,EAAY2C,QAAQ,CAAC,CAAC3C,GAAG,CAAC,CAAD,CAAH,CAAO,CAAP,CAAD,CAAD,EAAcT,GAAd,EAAmB,CAACwD,CAAD,CAAnB,CAApB,CAAX;AACD,OALyB,CAO5B;AACA;;AAEC,KAVM,MAUA,IAAI/C,GAAG,CAAC,CAAD,CAAH,IAAU,IAAd,EAAoB;AAAG;AAC5B,UAAIgB,CAAC,GAAG,aAAW;AACjB,eAAON,IAAI,CAACV,GAAG,CAAC,CAAD,CAAJ,EAAS2C,QAAQ,CAAC3C,GAAG,CAAC,CAAD,CAAJ,EAAST,GAAT,EAAcsC,SAAd,CAAjB,EAA2Ca,aAA3C,CAAX;AACD,OAFD;;AAGA1B,OAAC,CAAChB,GAAF,GAAQ,CAACA,GAAG,CAAC,CAAD,CAAJ,EAAST,GAAT,EAAcS,GAAG,CAAC,CAAD,CAAjB,CAAR,CAJyB,CAIM;;AAC/B,aAAOgB,CAAP;AACD,KANM,MAMA,IAAIhB,GAAG,CAAC,CAAD,CAAH,IAAU,IAAd,EAAoB;AAAG;AAC5B,WAAK,IAAIuC,CAAC,GAAC,CAAX,EAAcA,CAAC,GAACvC,GAAG,CAACH,MAApB,EAA4B0C,CAAC,EAA7B,EAAiC;AAC/B,YAAI7B,IAAI,CAACV,GAAG,CAACuC,CAAD,CAAJ,EAAShD,GAAT,CAAJ,EAAmBmD,aAAvB,EAAsC;AACpC,iBAAO,IAAP;AACD;AACF;;AACD,aAAO,KAAP;AACD,KAPM,MAOA,IAAI1C,GAAG,CAAC,CAAD,CAAH,IAAU,IAAd,EAAoB;AAAG;AAC5B,WAAK,IAAIuC,CAAC,GAAC,CAAX,EAAcA,CAAC,GAACvC,GAAG,CAACH,MAApB,EAA4B0C,CAAC,EAA7B,EAAiC;AAC/B,YAAI,CAAC7B,IAAI,CAACV,GAAG,CAACuC,CAAD,CAAJ,EAAShD,GAAT,EAAcmD,aAAd,CAAT,EAAuC;AACrC,iBAAO,KAAP;AACD;AACF;;AACD,aAAO,IAAP;AAED,KARM,MAQA;AAAqE;AAC1E,UAAIR,EAAE,GAAGlC,GAAG,CAAC+B,GAAJ,CAAQ,UAAA/B,GAAG;AAAA,eAAIU,IAAI,CAACV,GAAD,EAAMT,GAAN,EAAWmD,aAAX,CAAR;AAAA,OAAX,CAAT;AACA,UAAI1B,CAAC,GAAGkB,EAAE,CAAC,CAAD,CAAV;;AACA,UAAIlB,CAAC,CAAChB,GAAN,EAAW;AACTA,WAAG,GAAGgB,CAAC,CAAChB,GAAF,CAAM,CAAN,CAAN;AACAT,WAAG,GAAGoD,QAAQ,CAAC3B,CAAC,CAAChB,GAAF,CAAM,CAAN,CAAD,EAAWgB,CAAC,CAAChB,GAAF,CAAM,CAAN,CAAX,EAAqBkC,EAAE,CAACvB,KAAH,CAAS,CAAT,CAArB,CAAd,CAFS,CAEwC;AAClD,OAHD,MAGO;AACL,eAAOK,CAAC,CAACY,KAAF,CAAQZ,CAAR,EAAWkB,EAAE,CAACvB,KAAH,CAAS,CAAT,CAAX,CAAP;AACD;AACF;AACF;AACF,C,CAAC;;;AAGF,SAASa,YAAT,CAAsBxB,GAAtB,EAA2BT,GAA3B,EAAgC;AAC9B,MAAMI,MAAM,GAAGe,IAAI,CAACV,GAAD,EAAM,CAACT,GAAD,EAAM2B,MAAN,CAAN,CAAnB;AACA,SAAOvB,MAAP;AACD,C,CAGD;;;AACO,SAASuD,SAAT,CAAmB3D,GAAnB,EAAwB;AAC7BA,KAAG,GAAG,CAACA,GAAG,IAAI,EAAR,EAAY2B,MAAZ,CAAN;AACA,SAAO;AACLQ,QAAI,EAAE,eAAC1B,GAAD;AAAA,aAASwB,YAAY,CAACxB,GAAD,EAAMT,GAAN,CAArB;AAAA,KADD;AAEL4D,OAAG,EAAE,aAAC3D,OAAD,EAAUC,KAAV;AAAA,aAAoBH,KAAK,CAACE,OAAD,EAAUC,KAAV,CAAzB;AAAA;AAFA,GAAP;AAID;AAGM,SAAS2D,SAAT,CAAmBpD,GAAnB,EAAwBT,GAAxB,EAA6B;AAClC,MAAMI,MAAM,GAAG6B,YAAY,CAACxB,GAAD,EAAMT,GAAN,CAA3B;;AAEA,MAAI,OAAOI,MAAP,IAAkB,UAAtB,EAAkC;AAChC,WAAO,cAAP;AACD,GAFD,MAEO;AACL,WAAOA,MAAP;AACD;AACF;AAGM,SAAS0D,QAAT,CAAkBrD,GAAlB,EAAuBT,GAAvB,EAA4B;AACjC,SAAO6D,SAAS,CAACpD,GAAD,EAAMT,GAAN,CAAhB;AACD,C;;;;;;;;;;ACzfD;AAAA;;;;;;;;;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;;AAIA,IAAI+D,UAAU,GAAG,SAAbA,UAAa,GAAY;AAC3B,MAAIC,YAAY,GAAG,EAAnB;AACA,MAAIC,KAAJ;AACA,MAAIC,MAAJ;AACA,MAAIC,QAAJ,CAJ2B,CAM3B;;AACA,MAAIC,UAAU,GAAG;AAAEC,OAAG,EAAE,eAAY,CAAE;AAArB,GAAjB,CAP2B,CAOc;AAEzC;;AACA,MAAIC,gBAAgB,GAAG,EAAvB;;AAEA,MAAIC,cAAc,GAAG,SAAjBA,cAAiB,CAASC,IAAT,EAAeC,EAAf,EAAmB;AACtCH,oBAAgB,CAACE,IAAD,CAAhB,GAAyBC,EAAzB;AACD,GAFD;;AAIA,MAAIC,MAAM,GAAG,SAATA,MAAS,GAAY;AACvB,WAAO,IAAP;AACD,GAFD;;AAIA,MAAIC,KAAK,GAAG;AACVC,QAAI,EAAE,cAAUC,CAAV,EAAa;AACjB,UAAIrB,CAAC,GAAG,IAAR;AAAA,UAAcsB,CAAd;AACA,UAAIC,CAAC,GAAGvF,MAAM,CAAC8D,MAAP,CAAc0B,eAAd,CAAR;AACAD,OAAC,CAACE,GAAF,GAAaP,MAAb;AACAK,OAAC,CAACG,GAAF,GAAa,IAAb;AACAH,OAAC,CAACI,GAAF,GAAa,CAAb;AACA,aAAOJ,CAAP;AACD;AARS,GAAZ;AAWA,MAAIK,kBAAkB,GAAG;AACvBf,OAAG,EAAE,eAAY;AACfD,gBAAU,GAAG,KAAKiB,MAAlB;AACD,KAHsB;AAIvBA,UAAM,EAAE,IAJe;AAKvBC,MAAE,EAAE;AALmB,GAAzB;AAQA,MAAIC,cAAc,GAAG;AACnBlB,OAAG,EAAE,eAAY;AACfD,gBAAU,GAAG,KAAKiB,MAAlB;AACD,KAHkB;AAInBA,UAAM,EAAE,IAJW;AAKnBC,MAAE,EAAE;AALe,GAArB;;AAQA,MAAIE,oBAAoB,GAAG,SAAvBA,oBAAuB,CAAUF,EAAV,EAAc;AACvC,QAAIP,CAAC,GAAGX,UAAR;AACAA,cAAU,GAAG5E,MAAM,CAAC8D,MAAP,CAAcgC,EAAE,IAAI,SAAN,GAAgBF,kBAAhB,GAAmCG,cAAjD,CAAb;AACAnB,cAAU,CAACiB,MAAX,GAAoBN,CAApB;AACA,WAAOX,UAAP;AACD,GALD;;AAOA,MAAIqB,OAAO,GAAG,SAAVA,OAAU,CAAUC,EAAV,EAAc;AACtB,QAAI3D,CAAJ,EAAO+C,CAAP,EAAUa,CAAV,EAAa7D,CAAb;;AACA,QAAI4D,EAAE,IAAIzB,KAAK,CAACyB,EAAN,KAAaA,EAAvB,EAA2B;AACvBE,eAAS,CAAC3B,KAAD,EAAQ,SAASA,KAAK,CAAC/D,KAAf,GAAuB,iBAAvB,GAA2CwF,EAA3C,GAAgD,IAAxD,CAAT;AACH;;AACD,QAAIvB,QAAQ,IAAID,MAAM,CAAC5D,MAAvB,EAA+B;AAC3B2D,WAAK,GAAGD,YAAY,CAAC,OAAD,CAApB;AACA;AACH;;AACD2B,KAAC,GAAGzB,MAAM,CAACC,QAAD,CAAV;AACAA,YAAQ,IAAI,CAAZ;AACArC,KAAC,GAAG6D,CAAC,CAACzF,KAAN;AACA6B,KAAC,GAAG4D,CAAC,CAACE,IAAN;;AACA,QAAI9D,CAAC,KAAK,MAAV,EAAkB;AACd,UAAIqC,UAAU,CAACkB,EAAX,IAAiB,SAArB,EAAgC;AAC9B,YAAIxD,CAAC,KAAK,IAAN,IAAcA,CAAC,KAAK,KAApB,IAA6BA,CAAC,KAAK,KAAnC,IAA4CA,CAAC,KAAK,IAAlD,IAA0DA,CAAC,KAAK,IAApE,EAA0E;AACxEC,WAAC,GAAG,UAAJ;AACA+C,WAAC,GAAGd,YAAY,CAAClC,CAAD,CAAhB;;AACA,cAAI,CAACgD,CAAL,EAAQ;AACJc,qBAAS,CAACD,CAAD,EAAI,2BAAJ,CAAT;AACH;AACF,SAND,MAMO;AACLb,WAAC,GAAGH,KAAK,CAACC,IAAN,CAAW9C,CAAX,CAAJ;AACD;AACF,OAVD,MAUO;AACLgD,SAAC,GAAGH,KAAK,CAACC,IAAN,CAAW9C,CAAX,CAAJ;AACD;AACJ,KAdD,MAcO,IAAIC,CAAC,KAAK,UAAV,EAAsB;AACzB+C,OAAC,GAAGd,YAAY,CAAClC,CAAD,CAAhB;;AACA,UAAI,CAACgD,CAAL,EAAQ;AACJc,iBAAS,CAACD,CAAD,EAAI,mBAAJ,CAAT;AACH;AACJ,KALM,MAKA,IAAI5D,CAAC,KAAK,eAAV,EAA2B;AAC9B+C,OAAC,GAAGd,YAAY,CAAC,yBAAD,CAAhB;AACAjC,OAAC,GAAG,SAAJ;AACH,KAHM,MAGA,IAAIA,CAAC,KAAK,eAAV,EAA2B;AAC9B+C,OAAC,GAAGd,YAAY,CAAC,yBAAD,CAAhB;AACAjC,OAAC,GAAG,SAAJ;AACH,KAHM,MAGA,IAAIA,CAAC,KAAM,QAAX,EAAqB;AACxB+C,OAAC,GAAGd,YAAY,CAAC,kBAAD,CAAhB;AACAjC,OAAC,GAAG,SAAJ;AACH,KAHM,MAGA;AACH6D,eAAS,CAACD,CAAD,EAAI,mBAAJ,CAAT;AACH;;AACD1B,SAAK,GAAGzE,MAAM,CAAC8D,MAAP,CAAcwB,CAAd,CAAR;AACAb,SAAK,CAACO,IAAN,GAAcmB,CAAC,CAACnB,IAAhB;AACAP,SAAK,CAACQ,EAAN,GAAckB,CAAC,CAAClB,EAAhB;AACAR,SAAK,CAAC/D,KAAN,GAAc4B,CAAd;AACAmC,SAAK,CAAC6B,KAAN,GAAc/D,CAAd;;AACA,QAAIA,CAAC,IAAI,UAAT,EAAqB;AACjBkC,WAAK,CAAC8B,KAAN,GAAczB,gBAAgB,CAACxC,CAAD,CAA9B;AACH,KAFD,MAEO;AACLmC,WAAK,CAAC8B,KAAN,GAAcjE,CAAd,CADK,CACY;AAClB;;AACD,WAAOmC,KAAP;AACL,GAvDD;;AAyDA,MAAI+B,SAAS,GAAG,SAAZA,SAAY,GAAY;AAC1B,QAAInB,CAAC,GAAGZ,KAAR;AAAA,QAAenC,CAAf;;AAEA,QAAI+C,CAAC,CAACoB,GAAN,EAAW;AACPR,aAAO,GADA,CAEP;;AACA,aAAOZ,CAAC,CAACoB,GAAF,EAAP;AACH;;AACDnE,KAAC,GAAGoE,UAAU,CAAC,CAAD,CAAd,CAR0B,CAS1B;;AACA;;;;AAIA;;AACA,WAAOpE,CAAP;AACD,GAhBD;;AAkBA,MAAIqE,UAAU,GAAG,SAAbA,UAAa,GAAY;AAC3B,QAAIpE,CAAC,GAAG,EAAR;AAAA,QAAYgD,CAAZ;;AACA,WAAO,IAAP,EAAa;AACT;AACA,UAAKd,KAAK,CAACyB,EAAN,KAAa,OAAlB,EAA2B;AACvB;AACH,OAFD,MAEO,IAAGzB,KAAK,CAAC/D,KAAN,KAAgB,GAAnB,EAAuB;AAC5B;AACCuF,eAAO;AACT;;AACDV,OAAC,GAAGiB,SAAS,EAAb,CARS,CAST;;AACA,UAAIjB,CAAJ,EAAO;AACHhD,SAAC,CAACL,IAAF,CAAOqD,CAAP;AACH;AACJ;;AACD,WAAOhD,CAAC,CAACzB,MAAF,KAAa,CAAb,GAAiB,IAAjB,GAAwByB,CAAC,CAACzB,MAAF,KAAa,CAAb,GAAiByB,CAAC,CAAC,CAAD,CAAlB,GAAuB;AAAC,eAAS,CAAC,IAAD,EAAOqE,MAAP,CAAcrE,CAAC,CAACS,GAAF,CAAM,UAASG,EAAT,EAAY;AAAC,eAAOA,EAAE,CAAC,OAAD,CAAT;AAAoB,OAAvC,CAAd;AAAV,KAAtD;AACD,GAjBD;;AAmBA,MAAIuD,UAAU,GAAG,SAAbA,UAAa,CAAUG,GAAV,EAAe;AAC9B,QAAIC,IAAJ;AACA,QAAIX,CAAC,GAAG1B,KAAR;AACAwB,WAAO;AACPa,QAAI,GAAGX,CAAC,CAACV,GAAF,EAAP;;AACA,WAAOoB,GAAG,GAAGpC,KAAK,CAACkB,GAAnB,EAAwB;AACtBQ,OAAC,GAAG1B,KAAJ;AACAwB,aAAO;AACPa,UAAI,GAAGX,CAAC,CAACT,GAAF,CAAMoB,IAAN,CAAP;AACD;;AACD,WAAOA,IAAP;AACD,GAXD;;AAaA,MAAItB,eAAe,GAAG;AACpBC,OAAG,EAAE,eAAY;AACfW,eAAS,CAAC,IAAD,EAAO,YAAP,CAAT;AACD,KAHmB;AAIpBV,OAAG,EAAE,aAAUoB,IAAV,EAAgB;AACnBV,eAAS,CAAC,IAAD,EAAO,mBAAP,CAAT;AACD;AANmB,GAAtB;;AASA,MAAIW,MAAM,GAAG,SAATA,MAAS,CAAUb,EAAV,EAAcc,EAAd,EAAkB;AAC7B,QAAIzB,CAAC,GAAGf,YAAY,CAAC0B,EAAD,CAApB;AACAc,MAAE,GAAGA,EAAE,IAAI,CAAX;;AACA,QAAIzB,CAAJ,EAAO;AACL,UAAIyB,EAAE,IAAIzB,CAAC,CAACI,GAAZ,EAAiB;AACfJ,SAAC,CAACI,GAAF,GAAQqB,EAAR;AACD;AACF,KAJD,MAIO;AACLzB,OAAC,GAAGvF,MAAM,CAAC8D,MAAP,CAAc0B,eAAd,CAAJ;AACAD,OAAC,CAACW,EAAF,GAAOX,CAAC,CAAC7E,KAAF,GAAUwF,EAAjB;AACAX,OAAC,CAACI,GAAF,GAAQqB,EAAR;AACAxC,kBAAY,CAAC0B,EAAD,CAAZ,GAAmBX,CAAnB;AACD;;AACDR,kBAAc,CAACmB,EAAD,EAAKA,EAAL,CAAd;AACA,WAAOX,CAAP;AACD,GAfD;;AAiBA,MAAI0B,KAAK,GAAG,SAARA,KAAQ,CAAUf,EAAV,EAAcc,EAAd,EAAkBtB,GAAlB,EAAuB;AACjC,QAAIH,CAAC,GAAGwB,MAAM,CAACb,EAAD,EAAKc,EAAL,CAAd;;AACAzB,KAAC,CAACG,GAAF,GAAQA,GAAG,IAAI,UAAUoB,IAAV,EAAgB;AAC7B,WAAKI,KAAL,GAAaJ,IAAb;AACA,UAAIK,KAAK,GAAGT,UAAU,CAACM,EAAD,CAAtB;AACA,WAAKI,MAAL,GAAcD,KAAd;AACA,WAAKb,KAAL,GAAa,QAAb;AACA,WAAKC,KAAL,GAAa,CAAC,KAAKA,KAAN,EAAaO,IAAI,CAACP,KAAlB,EAAyBY,KAAK,CAACZ,KAA/B,CAAb;AACA,aAAO,IAAP;AACD,KAPD;;AAQA,WAAOhB,CAAP;AACD,GAXD;;AAaA,MAAI8B,MAAM,GAAG,SAATA,MAAS,CAAUnB,EAAV,EAAcc,EAAd,EAAkBtB,GAAlB,EAAuB;AAClC,QAAIH,CAAC,GAAGwB,MAAM,CAACb,EAAD,EAAKc,EAAL,CAAd;;AACAzB,KAAC,CAACG,GAAF,GAAQA,GAAG,IAAI,UAAUoB,IAAV,EAAgB;AAC7B,WAAKI,KAAL,GAAaJ,IAAb;AACA,UAAIK,KAAK,GAAGT,UAAU,CAACM,EAAE,GAAG,CAAN,CAAtB;AACA,WAAKI,MAAL,GAAcD,KAAd;AACA,WAAKb,KAAL,GAAa,QAAb;AACA,WAAKC,KAAL,GAAa,CAAC,KAAKA,KAAN,EAAaO,IAAI,CAACP,KAAlB,EAAyBY,KAAK,CAACZ,KAA/B,CAAb;AACA,aAAO,IAAP;AACD,KAPD;;AAQA,WAAOhB,CAAP;AACD,GAXD;;AAaA,MAAI+B,MAAM,GAAG,SAATA,MAAS,CAAUpB,EAAV,EAAcT,GAAd,EAAmB;AAC9B,QAAIF,CAAC,GAAGwB,MAAM,CAACb,EAAD,CAAd;;AACAX,KAAC,CAACE,GAAF,GAAQA,GAAG,IAAI,YAAY;AACzB;AACA,UAAI8B,IAAI,GAAGb,UAAU,CAAC,EAAD,CAArB;AACA,WAAKQ,KAAL,GAAaK,IAAb;AACA,WAAKjB,KAAL,GAAa,OAAb;AACA,WAAKC,KAAL,GAAa,CAAC,KAAKA,KAAN,EAAagB,IAAI,CAAChB,KAAlB,CAAb;AACA,aAAO,IAAP;AACD,KAPD;;AAQA,WAAOhB,CAAP;AACD,GAXD;;AAaAwB,QAAM,CAAC,OAAD,CAAN;AACAA,QAAM,CAAC,QAAD,CAAN;AACAA,QAAM,CAAC,QAAD,CAAN;AACAA,QAAM,CAAC,GAAD,CAAN;AACAA,QAAM,CAAC,GAAD,CAAN;AACAA,QAAM,CAAC,GAAD,CAAN;AACAA,QAAM,CAAC,GAAD,CAAN;AACAA,QAAM,CAAC,GAAD,CAAN,CAzO2B,CA2O3B;;AACA,MAAIS,KAAK,GAAGT,MAAM,CAAC,GAAD,CAAlB;;AAEAA,QAAM,CAAC,yBAAD,CAAN,CAAkCtB,GAAlC,GAAwC,YAAW;AACjD,SAAKyB,KAAL,GAAa,GAAb;AACA,SAAKZ,KAAL,GAAa,OAAb;AACA,SAAKC,KAAL,GAAa,CAAC,GAAD,EAAM,KAAKA,KAAX,CAAb;AACA,WAAO,IAAP;AACD,GALD;;AAOAQ,QAAM,CAAC,yBAAD,CAAN,CAAkCtB,GAAlC,GAAwC,YAAW;AACjD,SAAKyB,KAAL,GAAa,GAAb;AACA,SAAKZ,KAAL,GAAa,OAAb;AACA,SAAKC,KAAL,GAAa,CAAC,GAAD,EAAM,KAAKA,KAAX,CAAb;AACA,WAAO,IAAP;AACD,GALD;;AAOAQ,QAAM,CAAC,kBAAD,CAAN,CAA2BtB,GAA3B,GAAiCP,MAAjC;AAEA+B,OAAK,CAAC,GAAD,EAAM,EAAN,EAAU,UAAUH,IAAV,EAAgB;AAC7B;AACA,SAAKI,KAAL,GAAaJ,IAAb;AACA,SAAKM,MAAL,GAAcV,UAAU,CAAC,CAAD,CAAxB;AACAT,WAAO,CAAC,GAAD,CAAP;AACA,SAAKwB,KAAL,GAAaf,UAAU,CAAC,CAAD,CAAvB;AACA,SAAKJ,KAAL,GAAa,SAAb;AACA,WAAO,IAAP;AACD,GARI,CAAL;AAUAe,QAAM,CAAC,IAAD,EAAO,EAAP,CAAN;AACAA,QAAM,CAAC,GAAD,EAAM,EAAN,CAAN;AACAtC,gBAAc,CAAC,IAAD,EAAM,KAAN,CAAd;AACAA,gBAAc,CAAC,GAAD,EAAK,KAAL,CAAd;AAEAsC,QAAM,CAAC,IAAD,EAAO,EAAP,CAAN;AACAA,QAAM,CAAC,GAAD,EAAM,EAAN,CAAN;AAEAtC,gBAAc,CAAC,IAAD,EAAM,IAAN,CAAd;AACAA,gBAAc,CAAC,GAAD,EAAK,IAAL,CAAd;AAEA;;AACAsC,QAAM,CAAC,KAAD,EAAQ,EAAR,CAAN;AACAA,QAAM,CAAC,IAAD,EAAO,EAAP,CAAN,CArR2B,CAsR3B;;AACAA,QAAM,CAAC,IAAD,EAAO,EAAP,CAAN;AACAA,QAAM,CAAC,IAAD,EAAO,EAAP,CAAN;AACAC,QAAM,CAAC,KAAD,CAAN,CAzR2B,CA2R3B;;AACAD,QAAM,CAAC,IAAD,EAAO,EAAP,CAAN,CA5R2B,CA8R3B;;AACAA,QAAM,CAAC,GAAD,EAAM,EAAN,CAAN;AAEAA,QAAM,CAAC,GAAD,EAAM,EAAN,CAAN;AACAA,QAAM,CAAC,IAAD,EAAO,EAAP,CAAN;AACAA,QAAM,CAAC,GAAD,EAAM,EAAN,CAAN;AACAA,QAAM,CAAC,GAAD,EAAM,EAAN,CAAN;AACAtC,gBAAc,CAAC,GAAD,EAAM,IAAN,CAAd,CArS2B,CAqSA;;AAE3BsC,QAAM,CAAC,IAAD,EAAO,EAAP,CAAN;AACAA,QAAM,CAAC,KAAD,EAAQ,EAAR,CAAN;AACAA,QAAM,CAAC,IAAD,EAAO,EAAP,CAAN;AACAA,QAAM,CAAC,GAAD,EAAM,EAAN,CAAN;AACAA,QAAM,CAAC,IAAD,EAAO,EAAP,CAAN;AACAA,QAAM,CAAC,GAAD,EAAM,EAAN,CAAN;AACAtC,gBAAc,CAAC,GAAD,EAAM,IAAN,CAAd;AAEAsC,QAAM,CAAC,GAAD,EAAM,EAAN,CAAN;AACAA,QAAM,CAAC,IAAD,EAAO,EAAP,CAAN;AACAA,QAAM,CAAC,GAAD,EAAM,EAAN,CAAN;AACAtC,gBAAc,CAAC,GAAD,EAAK,IAAL,CAAd;AACAsC,QAAM,CAAC,IAAD,EAAO,EAAP,CAAN;AAEAJ,OAAK,CAAC,GAAD,EAAM,EAAN,CAAL;AACAA,OAAK,CAAC,GAAD,EAAM,EAAN,CAAL;AAEAA,OAAK,CAAC,GAAD,EAAM,EAAN,CAAL;AACAA,OAAK,CAAC,GAAD,EAAM,EAAN,CAAL;AAEAA,OAAK,CAAC,GAAD,EAAM,EAAN,EAAU,UAAUH,IAAV,EAAgB;AAC7B,QAAIvE,CAAC,GAAG,EAAR;;AACA,QAAIuE,IAAI,CAACZ,EAAL,KAAY,GAAhB,EAAqB;AACf;AACA,WAAKI,KAAL,GAAa,SAAb;AACA,WAAKY,KAAL,GAAaJ,IAAI,CAACI,KAAlB;AACA,WAAKE,MAAL,GAAcN,IAAI,CAACM,MAAnB;AACA,WAAKK,KAAL,GAAalF,CAAb;AACL,KAND,MAMO;AACD,WAAK+D,KAAL,GAAa,QAAb;AACA,WAAKY,KAAL,GAAaJ,IAAb;AACA,WAAKpG,KAAL,GAAa,GAAb,CAHC,CAGiB;;AAClB,WAAK0G,MAAL,GAAc7E,CAAd;;AACA,UAAI,CAACuE,IAAI,CAACR,KAAL,KAAe,OAAf,IAA0BQ,IAAI,CAACZ,EAAL,KAAY,UAAvC,KACAY,IAAI,CAACR,KAAL,KAAe,MADf,IACyBQ,IAAI,CAACZ,EAAL,KAAY,GADrC,IAEAY,IAAI,CAACZ,EAAL,KAAY,IAFZ,IAEoBY,IAAI,CAACZ,EAAL,KAAY,IAFhC,IAEwCY,IAAI,CAACZ,EAAL,KAAY,GAFxD,EAE6D;AAC3DE,iBAAS,CAACU,IAAD,EAAO,2BAAP,CAAT;AACD;AACN,KAlB4B,CAmB7B;;;AACA,QAAIrC,KAAK,CAACyB,EAAN,KAAa,GAAjB,EAAsB;AACpB,UAAI,KAAJ,EAAoC;AAClC;AACA;AACAF,4BAAoB,CAAC,SAAD,CAApB;AACA,YAAIhC,CAAC,GAAG0C,UAAU,CAAC,CAAD,CAAlB;AACA9B,kBAAU,CAACC,GAAX;AACAtC,SAAC,CAACL,IAAF,CAAO8B,CAAP;AACD,OAPD,MAOO;AACLgC,4BAAoB,CAAC,KAAD,CAApB;;AACA,eAAO,IAAP,EAAa;AACX;AACA,cAAIvB,KAAK,CAACyB,EAAN,KAAa,GAAjB,EAAsB;AACpB3D,aAAC,CAACL,IAAF,CAAO;AACLxB,mBAAK,EAAE,IADF;AAEL4F,mBAAK,EAAE;AAFF,aAAP;AAIAL,mBAAO;AACR,WAND,MAMO,IAAIxB,KAAK,CAACyB,EAAN,KAAa,GAAjB,EAAsB;AAC3B3D,aAAC,CAACL,IAAF,CAAO;AACLxB,mBAAK,EAAE,IADF;AAEL4F,mBAAK,EAAE;AAFF,aAAP;AAIA;AACD,WANM,MAMA;AACLN,gCAAoB,CAAC,SAAD,CAApB;AACA,gBAAIhC,CAAC,GAAG0C,UAAU,CAAC,CAAD,CAAlB;AACA9B,sBAAU,CAACC,GAAX,GAHK,CAIL;;AACAtC,aAAC,CAACL,IAAF,CAAO8B,CAAP;;AACA,gBAAIS,KAAK,CAACyB,EAAN,KAAa,GAAjB,EAAsB;AACpB;AACD;;AACDD,mBAAO,CAAC,GAAD,CAAP;AACD;AACF;;AACDrB,kBAAU,CAACC,GAAX;AACD;AACF;;AAED,SAAK0B,KAAL,GAAa,CAAC,KAAKW,KAAL,CAAWxG,KAAZ,EAAmBkG,MAAnB,CAA0BrE,CAAC,CAACS,GAAF,CAAM,UAASG,EAAT,EAAY;AAAC,aAAOA,EAAE,CAACoD,KAAV;AAAgB,KAAnC,CAA1B,CAAb;AACAN,WAAO,CAAC,GAAD,CAAP;AACA,WAAO,IAAP;AACD,GA/DI,CAAL;;AAkEA,WAASyB,WAAT,CAAqBC,IAArB,EAA2B;AACzB,QAAIA,IAAI,CAACjH,KAAL,KAAe,IAAnB,EAAyB;AACvB,aAAOgH,WAAW,CAACC,IAAI,CAACT,KAAN,CAAX,CAAwBN,MAAxB,CAA+Bc,WAAW,CAACC,IAAI,CAACP,MAAN,CAA1C,CAAP;AACD,KAFD,MAEO,IAAIO,IAAI,CAACjH,KAAL,KAAe,IAAnB,EAAyB;AAC9B,UAAIiH,IAAI,CAACT,KAAL,CAAWxG,KAAX,KAAqB,IAAzB,EAA8B;AAC5B;AACA;AACA;AACE,eAAO,CAAC,CAAC,IAAD,EAAOkG,MAAP,CAAcc,WAAW,CAACC,IAAI,CAACT,KAAL,CAAWA,KAAZ,CAAzB,EAA6CN,MAA7C,CAAoDc,WAAW,CAACC,IAAI,CAACT,KAAL,CAAWE,MAAZ,CAA/D,CAAD,CAAP;AACH,OALD,MAKO;AACH,eAAOM,WAAW,CAACC,IAAI,CAACT,KAAN,CAAlB;AACH;AACF,KATM,MASA;AACL,aAAO,CAACS,IAAI,CAACpB,KAAN,CAAP;AACD;AACF;;AAED,WAASqB,aAAT,CAAuBD,IAAvB,EAA6B;AAC3B,QAAIA,IAAI,CAACjH,KAAL,KAAe,KAAnB,EAA0B;AACxB,aAAOgH,WAAW,CAACC,IAAI,CAACT,KAAN,CAAX,CAAwBN,MAAxB,CAA+Bc,WAAW,CAACC,IAAI,CAACP,MAAN,CAA1C,CAAP;AACD,KAFD,MAEO,IAAIO,IAAI,CAACjH,KAAL,KAAe,IAAnB,EAAyB;AAC9B,UAAIiH,IAAI,CAACT,KAAL,CAAWxG,KAAX,KAAqB,KAAzB,EAA+B;AAC7B;AACA;AACA;AACE,eAAO,CAAC,CAAC,KAAD,EAAQkG,MAAR,CAAec,WAAW,CAACC,IAAI,CAACT,KAAL,CAAWA,KAAZ,CAA1B,EAA8CN,MAA9C,CAAqDc,WAAW,CAACC,IAAI,CAACT,KAAL,CAAWE,MAAZ,CAAhE,CAAD,CAAP;AACH,OALD,MAKO;AACH,eAAOM,WAAW,CAACC,IAAI,CAACT,KAAN,CAAlB;AACH;AACF,KATM,MASA;AACL,aAAO,CAACS,IAAI,CAACpB,KAAN,CAAP;AACD;AACF;;AAEDU,OAAK,CAAC,GAAD,EAAM,EAAN,EAAU,UAAUH,IAAV,EAAgB;AAC7B,SAAKI,KAAL,GAAaJ,IAAb,CAD6B,CAE7B;;AACA,SAAKM,MAAL,GAAcV,UAAU,CAAC,EAAD,CAAxB;AACA,SAAKJ,KAAL,GAAa,QAAb;AACA,SAAK5F,KAAL,GAAa,IAAb;AACA,SAAK6F,KAAL,GAAa,CAAC,IAAD,EAAOK,MAAP,CAAcc,WAAW,CAAC,IAAD,CAAzB,CAAb;AACA,WAAO,IAAP;AACD,GARI,CAAL;AAUAT,OAAK,CAAC,IAAD,EAAO,EAAP,EAAW,UAAUH,IAAV,EAAgB;AAC9B,SAAKI,KAAL,GAAaJ,IAAb,CAD8B,CAE9B;;AACA,SAAKM,MAAL,GAAcV,UAAU,CAAC,EAAD,CAAxB;AACA,SAAKJ,KAAL,GAAa,QAAb;AACA,SAAK5F,KAAL,GAAa,KAAb;AACA,SAAK6F,KAAL,GAAa,CAAC,KAAD,EAAQK,MAAR,CAAegB,aAAa,CAAC,IAAD,CAA5B,CAAb;AACA,WAAO,IAAP;AACD,GARI,CAAL,CAza2B,CAmb3B;AACA;;AACAN,QAAM,CAAC,GAAD,CAAN;AAEAA,QAAM,CAAC,GAAD,CAAN;AACAA,QAAM,CAAC,KAAD,CAAN,CAxb2B,CAwbZ;;AACfA,QAAM,CAAC,GAAD,CAAN;AACAvC,gBAAc,CAAC,GAAD,EAAM,KAAN,CAAd;AACAA,gBAAc,CAAC,GAAD,EAAM,KAAN,CAAd,CA3b2B,CA6b3B;;AACAuC,QAAM,CAAC,GAAD,CAAN;AAEAA,QAAM,CAAC,GAAD,EAAK,YAAY;AACrB,QAAIhF,CAAC,GAAGoE,UAAU,CAAC,EAAD,CAAlB;;AACA,QAAIpE,CAAC,CAAC5B,KAAF,KAAY,GAAhB,EAAqB;AACnB0F,eAAS,CAAC9D,CAAD,EAAI,iDAAJ,CAAT;AACD,KAJoB,CAKrB;AACA;AACA;AACA;;;AACA,WAAOA,CAAP;AACD,GAVK,CAAN;AAYAgF,QAAM,CAAC,GAAD,EAAM,YAAY;AACtB,QAAItD,CAAC,GAAG0C,UAAU,CAAC,CAAD,CAAlB;;AACA,QAAI9B,UAAU,CAACkB,EAAX,IAAiB,SAArB,EAAgC;AAC9B;AACA9B,OAAC,CAACuC,KAAF,GAAU,CAAC,IAAD,EAAOvC,CAAC,CAACuC,KAAT,CAAV;AACD,KAHD,MAGO;AACL,UAAIvC,CAAC,CAACtD,KAAF,KAAY,IAAhB,EAAsB;AACpB;AACAsD,SAAC,GAAG;AACFkD,eAAK,EAAElD,CADL;AAEFtD,eAAK,EAAE,IAFL;AAGF4F,eAAK,EAAE,OAHL;AAIFC,eAAK,EAAE,CAAC,IAAD,EAAOvC,CAAC,CAACuC,KAAT;AAJL,SAAJ;AAMD;AACF;;AACDN,WAAO,CAAC,GAAD,CAAP;AACA,WAAOjC,CAAP;AACD,GAlBK,CAAN;AAoBAsD,QAAM,CAAC,GAAD,EAAM,YAAY;AACtB,QAAI/E,CAAC,GAAG,EAAR;;AACA,QAAIkC,KAAK,CAACyB,EAAN,KAAa,GAAjB,EAAsB;AACpB,aAAO,IAAP,EAAa;AACX3D,SAAC,CAACL,IAAF,CAAOwE,UAAU,CAAC,CAAD,CAAjB,EADW,CAEX;;AACA,YAAIjC,KAAK,CAACyB,EAAN,KAAa,GAAjB,EAAsB;AACpB;AACD;;AACDD,eAAO,CAAC,GAAD,CAAP;AACD;AACF;;AACDA,WAAO,CAAC,GAAD,CAAP;AACA,SAAKiB,KAAL,GAAa3E,CAAb;AACA,SAAK+D,KAAL,GAAa,OAAb;AACA,SAAKC,KAAL,GAAa,CAAC,GAAD,EAAMK,MAAN,CAAarE,CAAC,CAACS,GAAF,CAAM,UAACG,EAAD;AAAA,aAAQA,EAAE,CAACoD,KAAX;AAAA,KAAN,CAAb,CAAb;AACA,WAAO,IAAP;AACD,GAjBK,CAAN;AAmBA,SAAO,UAAUsB,MAAV,EAAkB;AACvBnD,UAAM,GAAG,6EAAQ,CAACmD,MAAD,EAAS,gBAAT,EAA2B,SAA3B,CAAjB;AACAlD,YAAQ,GAAG,CAAX;AACAsB,WAAO;AACP,QAAIV,CAAC,GAAGoB,UAAU,EAAlB,CAJuB,CAKvB;;AACAV,WAAO,CAAC,OAAD,CAAP;AACA,WAAOV,CAAP;AACD,GARD;AASD,CA5fD,C,CA+fA;;;AACO,SAASuC,cAAT,CAAwBC,OAAxB,EAAiC;AACtC,OAAKC,WAAL,CAAiB/H,SAAjB,CAA2BgI,SAA3B,GAAuCzG,KAAK,CAACvB,SAA7C;AACAuB,OAAK,CAACrB,IAAN,CAAW,IAAX;AACAqB,OAAK,CAAC0G,iBAAN,CAAwB,IAAxB,EAA8B,KAAKF,WAAnC;AACA,OAAKG,IAAL,GAAY,KAAKH,WAAL,CAAiBG,IAA7B;AACA,OAAKJ,OAAL,GAAeA,OAAf,CALsC,CAMtC;AACD;;AAGD,SAAS3B,SAAT,CAAmBD,CAAnB,EAAsB4B,OAAtB,EAA+B;AAC7B5B,GAAC,CAAC4B,OAAF,GAAYA,OAAZ;AAEA,MAAMK,gBAAgB,GAAG1F,IAAI,CAACY,SAAL,CACvB6C,CADuB,EAEvB,CAAC,MAAD,EAAS,SAAT,EAAoB,MAApB,EAA4B,IAA5B,EAAkC,KAAlC,EAAyC,OAAzC,EAAkD,OAAlD,EAA2D,OAA3D,EAAoE,QAApE,EAA8E,OAA9E,EAAuF,QAAvF,CAFuB,EAGvB,CAHuB,CAAzB;AAKA,QAAM,IAAI2B,cAAJ,CAAmBM,gBAAnB,CAAN;AACD;;AAGD,IAAMC,MAAM,GAAG9D,UAAU,EAAzB,C,CACA;;AAGO,SAASlB,KAAT,CAAeiF,GAAf,EAAoB;AACzB,MAAI;AACF,QAAMC,WAAW,GAAGF,MAAM,CAACC,GAAD,CAA1B,CADE,CACiC;;AACnC,WAAOC,WAAW,CAAChC,KAAnB;AAED,GAJD,CAIE,OAAMiC,GAAN,EAAW;AACX3I,IAAA,iEAAO,CAAC4I,KAAR,CAAc,OAAd,EAAuBD,GAAG,CAACT,OAA3B;AACAlI,IAAA,iEAAO,CAAC4I,KAAR,CAAc,OAAd,EAAuBD,GAAG,CAACE,KAA3B;AACA,UAAMF,GAAN;AACD;AACF,C;;;;;;;;;;;;;;;AC9jBD;;;;;;;;;;;;;;;;;;;;;AAsBA;AACA;AACA;AACA;AAGA;;;;;AAKO,SAASG,iBAAT,CAA2BC,KAA3B,EAAkC;AACvC,MAAIC,QAAQ,GAAGD,KAAf;;AAEA,MAAIE,mBAAmB,GAAG,SAAtBA,mBAAsB,CAASC,OAAT,EAAkB;AAC1C,QAAI,QAAOH,KAAK,CAAC,UAAD,CAAZ,KAA4B,QAAhC,EAA0C;AACxC,UAAII,CAAC,GAAGJ,KAAK,CAAC,UAAD,CAAL,CAAkBG,OAAlB,CAAR;;AACA,UAAI,QAAOC,CAAP,KAAY,QAAhB,EAA0B;AACxBA,SAAC,GAAGA,CAAC,CAAC,MAAD,CAAD,CAAU9I,QAAV,EAAJ,CADwB,CAExB;AACA;;AACA,YAAI8I,CAAC,CAAClI,MAAF,GAAW,CAAf,EAAkB;AAChB;AACA,iBAAOkI,CAAP;AACD;AACF;AACF;;AACD,WAAOD,OAAO,CAAC7I,QAAR,EAAP;AACD,GAdD;;AAgBA,MAAI+I,4BAA4B,GAAG,SAA/BA,4BAA+B,CAASF,OAAT,EAAkB;AACnD,QAAI,QAAOH,KAAK,CAAC,UAAD,CAAZ,KAA4B,QAAhC,EAA0C;AACxC,UAAII,CAAC,GAAGJ,KAAK,CAAC,UAAD,CAAL,CAAkBG,OAAlB,CAAR;;AACA,UAAI,QAAOC,CAAP,KAAY,QAAhB,EAA0B;AACxB,YAAI1D,CAAC,GAAG0D,CAAC,CAAC,OAAD,CAAT;;AACA,YAAI1D,CAAC,KAAKzE,SAAV,EAAqB;AACnByE,WAAC,GAAG0D,CAAC,CAAC,MAAD,CAAL;AACD;;AACDnJ,QAAA,iEAAO,CAACqJ,GAAR,CAAY,qCAAqCxG,IAAI,CAACY,SAAL,CAAegC,CAAf,CAAjD;AACAzF,QAAA,iEAAO,CAACqJ,GAAR,CAAY,6CAA6C5D,CAA7C,CAAZ;;AACA,YAAIA,CAAC,KAAKzE,SAAN,IAAmByE,CAAC,CAACxE,MAAF,GAAW,CAAlC,EAAqC;AACnC;AACA,iBAAOwE,CAAC,CAACpF,QAAF,EAAP;AACD;AACF;AACF;;AACD,WAAO6I,OAAO,CAAC7I,QAAR,EAAP;AACD,GAjBD;;AAmBA,MAAIiJ,eAAe,GAAG,SAAlBA,eAAkB,CAASC,GAAT,EAAc;AAClCvJ,IAAA,iEAAO,CAACqJ,GAAR,CAAY,UAAZ,EAAwBE,GAAxB,EAA6B,YAA7B,EAA2CR,KAAK,CAACQ,GAAD,CAAhD;;AACA,QAAIR,KAAK,CAACQ,GAAD,CAAL,IAAcvI,SAAlB,EAA8B;AAC5B,aAAOiI,mBAAmB,CAACM,GAAD,CAA1B;AACD,KAFD,MAEO;AACL;AACA,aAAO,+EAAS,CAACA,GAAD,EAAMR,KAAN,CAAhB;AACD;AACF,GARD;;AAUA,MAAIS,wBAAwB,GAAG,SAA3BA,wBAA2B,CAASD,GAAT,EAAc;AAC3CvJ,IAAA,iEAAO,CAACqJ,GAAR,CAAY,aAAZ,EAA2BE,GAA3B,EAAgC,WAAhC,EAA6CR,KAAK,CAACQ,GAAD,CAAlD;;AAEA,QAAIR,KAAK,CAACQ,GAAD,CAAL,KAAevI,SAAnB,EAA+B;AAC7B,aAAOoI,4BAA4B,CAACG,GAAD,CAAnC;AACD,KAFD,MAEO;AACL;AACA,aAAO,+EAAS,CAACA,GAAD,EAAMR,KAAN,CAAhB;AACD;AACF,GATD;AAWA;;;AACAC,UAAQ,CAAC,UAAD,CAAR,GAAuB,YAAY;AACjC,QAAIS,GAAG,GAAG,EAAV;AACA,QAAI9I,GAAG,GAAG,EAAV;;AACA,SAAI,IAAI+I,GAAR,IAAeX,KAAf;AAAsBpI,SAAG,CAAC+I,GAAD,CAAH,GAAWX,KAAK,CAACW,GAAD,CAAhB;AAAtB,KAHiC,CAIjC;AACA;AACA;;;AACA/I,OAAG,CAAC,GAAD,CAAH,GAAW,UAAU+B,CAAV,EAAa;AACtB,UAAIA,CAAC,YAAYQ,KAAjB,EAAwB;AACtB,cAAM,gBAAN;AACD,OAFD,MAEO;AACL,eAAOsG,wBAAwB,CAAC9G,CAAD,CAA/B;AACD;AACF,KAND;;AAOA/B,OAAG,CAAC,GAAD,CAAH,CAASS,GAAT,GAAe,CAAC,EAAD,EAAI,EAAJ,EAAO,EAAP,EAAU,CAAV,CAAf,CAdiC,CAcJ;;AAE7BT,OAAG,CAAC,GAAD,CAAH,GAAW,UAAU+B,CAAV,EAAa;AACtB;AACA,UAAIA,CAAC,YAAYQ,KAAjB,EAAwB;AACtB,cAAM,gBAAN;AACD,OAFD,MAEO;AACL,eAAOsG,wBAAwB,CAAC9G,CAAD,CAAxB,GAA8B,GAA9B,GAAoC,MAA3C;AACD;AACF,KAPD;;AAQA/B,OAAG,CAAC,GAAD,CAAH,CAASS,GAAT,GAAe,CAAC,EAAD,EAAI,EAAJ,EAAO,EAAP,EAAU,CAAV,CAAf,CAxBiC,CAwBJ;;AAE7B,SAAI,IAAIuC,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGV,SAAS,CAAChC,MAA7B,EAAqC0C,CAAC,EAAtC,EAA0C;AACtC,UAAIV,SAAS,CAACU,CAAD,CAAT,YAAwBT,KAA5B,EAAmC;AACjCuG,WAAG,CAACpH,IAAJ,CAAS,+EAAS,CAACY,SAAS,CAACU,CAAD,CAAV,EAAehD,GAAf,CAAlB;AACD,OAFD,MAEO;AACL;AACA8I,WAAG,CAACpH,IAAJ,CAASmH,wBAAwB,CAACvG,SAAS,CAACU,CAAD,CAAT,CAAatD,QAAb,EAAD,CAAjC;AACD;AACJ;;AAED,QAAIoJ,GAAG,CAACxI,MAAJ,GAAa,CAAjB,EAAoB;AAClB,aAAO,cAAcwI,GAAG,CAACE,IAAJ,CAAS,GAAT,CAArB;AACD,KAFD,MAEO;AACL,aAAO,EAAP;AACD;AACF,GAxCD;;AA0CAX,UAAQ,CAAC,UAAD,CAAR,CAAqB5H,GAArB,GAA2B,CAAC,EAAD,EAAI,EAAJ,EAAO,EAAP,EAAU,CAAV,CAA3B,CAtGuC,CAsGE;;AAGzC4H,UAAQ,CAAC,aAAD,CAAR,GAA0B,UAAUY,GAAV,EAAeC,WAAf,EAA4B;AACpD,QAAIC,EAAJ;;AACA,QAAID,WAAW,YAAY1J,MAA3B,EAAmC;AACjC2J,QAAE,GAAGD,WAAW,CAAC,MAAD,CAAhB;AACD,KAFD,MAEO;AACLC,QAAE,GAAGD,WAAL;AACD;;AAED,QAAI,QAAQE,IAAR,CAAaD,EAAb,CAAJ,EAAsB;AACpB;AACA,cAAOA,EAAP;AACE,aAAK,CAAL;AAAQA,YAAE,GAAG,QAAL;AAAe;;AACvB,aAAK,CAAL;AAAQA,YAAE,GAAG,QAAL;AAAe;;AACvB,aAAK,CAAL;AAAQA,YAAE,GAAG,MAAL;AAAa;;AACrB,aAAK,CAAL;AAAQA,YAAE,GAAG,KAAL;AAAY;;AACpB,aAAK,CAAL;AAAQA,YAAE,GAAG,MAAL;AAAa;;AACrB,aAAK,CAAL;AAAQA,YAAE,GAAG,OAAL;AAAc;;AACtB,aAAK,CAAL;AAAQA,YAAE,GAAG,SAAL;AAAgB;;AACxB,aAAK,CAAL;AAAQA,YAAE,GAAG,MAAL;AAAa;;AACrB;AAAS,gBAAM,uBAAuBA,EAA7B;AATX;AAWD,KAbD,MAaO;AACL,UAAIE,GAAG,GAAG,IAAIzG,MAAJ,CAAW,QAAX,EAAoB,GAApB,CAAV;AACAuG,QAAE,GAAGA,EAAE,CAACG,OAAH,CAAWD,GAAX,EAAe,EAAf,CAAL;AACD;;AAED,QAAIE,MAAM,GAAG,IAAI3G,MAAJ,CAAW,SAAX,EAAsB,GAAtB,CAAb;;AACA,QAAI2G,MAAM,CAACH,IAAP,CAAYD,EAAZ,CAAJ,EAAoB;AAClB,aAAO,MAAOF,GAAG,GAAG,CAAb,GAAkB,mBAAzB;AACD;;AACD,WAAO,MAAMA,GAAN,GAAY,GAAZ,GAAkBE,EAAlB,GAAuB,aAA9B;AACD,GA/BD,CAzGuC,CA0IvC;;;AACAd,UAAQ,CAAC,QAAD,CAAR,GAAqB,YAAY;AAC7B,QAAIrI,GAAG,GAAG,EAAV;;AACA,SAAI,IAAI+I,GAAR,IAAeX,KAAf;AAAsBpI,SAAG,CAAC+I,GAAD,CAAH,GAAWX,KAAK,CAACW,GAAD,CAAhB;AAAtB;;AAEA,QAAIS,IAAI,GAAG,SAAPA,IAAO,CAASC,EAAT,EAAa;AACtB,UAAIA,EAAE,YAAYlH,KAAlB,EAAyB;AACvB,YAAMkH,EAAE,CAAC,CAAD,CAAF,KAAU,GAAV,IACAA,EAAE,CAAC,CAAD,CAAF,KAAU,GADV,IAEAA,EAAE,CAAC,CAAD,CAAF,KAAU,GAFV,IAGAA,EAAE,CAAC,CAAD,CAAF,KAAU,GAHV,IAIAA,EAAE,CAAC,CAAD,CAAF,KAAU,UAJV,IAKAA,EAAE,CAAC,CAAD,CAAF,KAAU,GALV,IAMAA,EAAE,CAAC,CAAD,CAAF,KAAU,aANhB,EAM+B;AAC7B,iBAAO,+EAAS,CAACA,EAAD,EAAKzJ,GAAL,CAAhB;AACD,SARD,MAQO;AACH,cAAIyJ,EAAE,CAACnJ,MAAH,IAAa,CAAjB,EAAoB;AAClB;AACA,gBAAImJ,EAAE,CAAC,CAAD,CAAF,IAAS,KAAb,EAAoB;AAClB,qBAAOA,EAAE,CAAC,CAAD,CAAF,GAAQ,GAAR,GAAcD,IAAI,CAACC,EAAE,CAAC,CAAD,CAAH,CAAzB;AACD,aAFD,MAEO,IAAIA,EAAE,CAAC,CAAD,CAAF,IAAS,IAAb,EAAmB;AACxB,qBAAO,MAAMD,IAAI,CAACC,EAAE,CAAC,CAAD,CAAH,CAAV,GAAoB,GAA3B;AACD,aAFM,MAEA,IAAIA,EAAE,CAAC,CAAD,CAAF,CAAMC,KAAN,CAAY,UAAZ,CAAJ,EAA4B;AACjC,qBAAOD,EAAE,CAAC,CAAD,CAAF,GAAQD,IAAI,CAACC,EAAE,CAAC,CAAD,CAAH,CAAnB;AACD,aAFM,MAEA;AACL,qBAAOD,IAAI,CAACC,EAAE,CAAC,CAAD,CAAH,CAAJ,GAAc,GAAd,GAAoBD,IAAI,CAACC,EAAE,CAAC,CAAD,CAAH,CAAxB,GAAkC,GAAzC;AACD;AACF,WAXD,MAWO,IAAIA,EAAE,CAACnJ,MAAH,IAAa,CAAjB,EAAoB;AACzB,gBAAImJ,EAAE,CAAC,CAAD,CAAF,IAAS,IAAb,EAAmB;AACjB;AACA;AACA;AACA,qBAAOA,EAAE,CAAC,CAAD,CAAF,GAAQ,GAAR,GAAcA,EAAE,CAAC,CAAD,CAAvB;AACD,aALD,MAKO,IAAIA,EAAE,CAAC,CAAD,CAAF,IAAS,KAAT,IAAkBA,EAAE,CAAC,CAAD,CAAF,IAAS,IAA3B,IAAmCA,EAAE,CAAC,CAAD,CAAF,IAAS,OAA5C,IAAuDA,EAAE,CAAC,CAAD,CAAF,IAAS,MAAhE,IACAA,EAAE,CAAC,CAAD,CAAF,IAAS,IADT,IACiBA,EAAE,CAAC,CAAD,CAAF,IAAS,IAD1B,IACkCA,EAAE,CAAC,CAAD,CAAF,CAAMC,KAAN,CAAY,UAAZ,CADtC,EAC+D;AACpE;AACA,qBAAOF,IAAI,CAACC,EAAE,CAAC,CAAD,CAAH,CAAJ,GAAc,GAAd,GAAoBA,EAAE,CAAC,CAAD,CAAtB,GAA4B,GAA5B,GAAkCD,IAAI,CAACC,EAAE,CAAC,CAAD,CAAH,CAA7C;AACD,aAJM,MAIA;AACL,qBAAOA,EAAE,CAAC,CAAD,CAAF,GAAQ,GAAR,GAAcD,IAAI,CAACC,EAAE,CAAC,CAAD,CAAH,CAAlB,GAA4B,GAA5B,GAAkCD,IAAI,CAACC,EAAE,CAAC,CAAD,CAAH,CAAtC,GAAgD,GAAvD;AACD;AACF,WAbM,MAaA;AACL;AACA,mBAAOA,EAAE,CAAC,CAAD,CAAF,GAAQ,GAAR,GAAcA,EAAE,CAACrI,KAAH,CAAS,CAAT,EAAYoB,GAAZ,CACnB,UAASmH,KAAT,EAAe;AAAC,qBAAOH,IAAI,CAACG,KAAD,CAAX;AAAmB,aADhB,EAEnBX,IAFmB,CAEd,GAFc,CAAd,GAEO,GAFd;AAGD;AACF;AACJ,OAzCD,MAyCO;AACH,eAAOS,EAAP;AACH;AACF,KA7CD;;AA+CAzJ,OAAG,CAAC,GAAD,CAAH,GAAW,UAAU2C,EAAV,EAAc;AACvB,aAAO,MAAMA,EAAE,CAACjD,QAAH,EAAN,GAAsB,GAA7B;AACD,KAFD;;AAIAM,OAAG,CAAC,GAAD,CAAH,GAAW,UAAU2C,EAAV,EAAc;AACvB,aAAO,MAAMA,EAAE,CAACjD,QAAH,EAAN,GAAsB,GAA7B;AACD,KAFD;;AAIAM,OAAG,CAAC,GAAD,CAAH,GAAW,UAAU2C,EAAV,EAAc;AACvB,aAAO,MAAMJ,KAAK,CAAC9C,SAAN,CAAgB2B,KAAhB,CAAsBzB,IAAtB,CAA2B2C,SAA3B,EAAsC0G,IAAtC,CAA2C,GAA3C,CAAN,GAAwD,GAA/D;AACD,KAFD;;AAIAhJ,OAAG,CAAC,GAAD,CAAH,GAAW,UAAU4J,CAAV,EAAYC,CAAZ,EAAe;AACxB,UAAIA,CAAC,YAAYtH,KAAb,IAAsBsH,CAAC,CAAC,CAAD,CAAD,IAAQ,QAAlC,EAA4C;AAC1C,eAAOL,IAAI,CAACI,CAAD,CAAJ,GAAU,OAAV,GAAoBC,CAAC,CAACzI,KAAF,CAAQ,CAAR,EAAWoB,GAAX,CAAe,UAASG,EAAT,EAAY;AAAC,iBAAO6G,IAAI,CAAC7G,EAAD,CAAX;AAAgB,SAA5C,EAA8CqG,IAA9C,CAAmD,GAAnD,CAApB,GAA8E,GAArF;AACD;;AACD,aAAOQ,IAAI,CAACI,CAAD,CAAJ,GAAU,KAAV,GAAkBJ,IAAI,CAACK,CAAD,CAA7B;AACD,KALD;;AAMA7J,OAAG,CAAC,GAAD,CAAH,CAASS,GAAT,GAAe,CAAC,EAAD,EAAI,EAAJ,EAAO,EAAP,EAAU,CAAV,CAAf,CArE6B,CAqEA;AAE7B;AACA;;AACAT,OAAG,CAAC,GAAD,CAAH,GAAW,UAAS8J,MAAT,EAAiB;AAC1B,UAAI/C,IAAI,GAAG,+EAAS,CAAC+C,MAAD,EAASzB,QAAT,CAApB,CAD0B,CACc;;AACxC,UAAItB,IAAI,YAAYxE,KAApB,EAA2B;AACzB;AACA,eAAOwE,IAAI,CAACvE,GAAL,CAAS,UAASG,EAAT,EAAY;AACxB,cAAI,OAAOA,EAAP,KAAa,QAAjB,EAA2B;AACzB,mBAAO,6FAAgB,CAACA,EAAD,CAAvB;AACD,WAFD,MAEO,IAAI,OAAOA,EAAP,KAAe,QAAnB,EAA6B;AAClC,mBAAOA,EAAP;AACD,WAFM,MAEA;AACL,mBAAO,6FAAgB,CAACT,IAAI,CAACY,SAAL,CAAeH,EAAf,CAAD,CAAvB;AACD;AACF,SARI,EAQFqG,IARE,CAQG,GARH,CAAP;AASD;;AACD,aAAO,6FAAgB,CAACjC,IAAD,CAAvB;AACD,KAfD;;AAgBA/G,OAAG,CAAC,GAAD,CAAH,CAASS,GAAT,GAAe,CAAC,EAAD,EAAI,EAAJ,EAAO,EAAP,EAAU,CAAV,CAAf,CAzF6B,CAyFA;AAE7B;;AACAT,OAAG,CAAC,UAAD,CAAH,GAAkB,UAAS+G,IAAT,EAAe;AAC/B,UAAIA,IAAI,YAAYxE,KAApB,EAA2B;AACzB,YAAIwE,IAAI,CAAC,CAAD,CAAJ,KAAY,IAAhB,EAAsB;AACpB,cAAIgD,GAAG,GAAG,aAAahD,IAAI,CAAC,CAAD,CAAjB,GAAsB,UAAtB,GAAkCA,IAAI,CAAC,CAAD,CAAtC,GAA2C,sBAArD;AACA,cAAIiD,MAAM,GAAGrB,eAAe,CAAC5B,IAAI,CAAC,CAAD,CAAJ,CAAQuC,OAAR,CAAgB,IAAhB,EAAqB,KAArB,CAAD,CAA5B,CAFoB,CAIpB;;AAEA,cAAIW,QAAQ,GAAGC,IAAI,CAACC,OAAL,CAAaJ,GAAb,EAAkB,CAAEC,MAAF,CAAlB,CAAf,CANoB,CAOpB;;AACA,cAAII,IAAI,GAAGH,QAAQ,CAAC,CAAD,CAAnB,CARoB,CAUpB;;AAEA,cAAIG,IAAI,KAAK/J,SAAT,IAAsB+J,IAAI,CAACrD,IAAI,CAAC,CAAD,CAAL,CAAJ,KAAkB,IAAxC,IAAgDqD,IAAI,CAACrD,IAAI,CAAC,CAAD,CAAL,CAAJ,CAAczG,MAAd,GAAuB,CAA3E,EAA8E;AAC1E,gBAAI+J,cAAc,GAAG,SAAjBA,cAAiB,CAAS7G,CAAT,EAAW;AAC9B,kBAAIpD,MAAM,GAAGoD,CAAC,CAAC8G,KAAF,CAAQ,GAAR,EAAa9H,GAAb,CAAiB,UAAS+H,EAAT,EAAY;AACtCA,kBAAE,GAAGA,EAAE,CAACjB,OAAH,CAAW,KAAX,EAAmB,IAAnB,CAAL,CADsC,CACP;;AAC/B,uBAAQiB,EAAE,CAACC,OAAH,CAAW,GAAX,KAAmB,CAAnB,GAAuB,UAAQD,EAAE,CAACE,MAAH,CAAU,CAAV,CAAR,GAAqB,GAA5C,GAAkD,MAAIF,EAAJ,GAAO,GAAjE;AACH,eAHY,EAGVvB,IAHU,CAGL,EAHK,EAGDyB,MAHC,CAGM,CAHN,CAAb;AAIA,qBAAOrK,MAAP;AACD,aAND;;AAQA,gBAAIA,MAAM,GAAIiK,cAAc,CAACD,IAAI,CAACrD,IAAI,CAAC,CAAD,CAAL,CAAL,CAA5B;AACA,gBAAG3G,MAAM,KAAKC,SAAX,IAAwBD,MAAM,CAACE,MAAP,IAAiB,CAA5C,EAA+C,OAAO,2BAAP;AAC/C,mBAAOF,MAAP;AACH;AACF;AACF;;AACD,aAAO,0BAAP;AACD,KA9BD;;AA+BAJ,OAAG,CAAC,UAAD,CAAH,CAAgBS,GAAhB,GAAsB,CAAC,EAAD,EAAI,EAAJ,EAAO,EAAP,EAAU,CAAV,CAAtB,CA3H6B,CA2HO;;AAEpC,QAAIqI,GAAG,GAAG,EAAV,CA7H6B,CA8H7B;;AAEA,QAAI4B,GAAG,GAAGtC,KAAK,CAAC,KAAD,CAAf;AACA,QAAIuC,IAAI,GAAGrI,SAAX;;AAEA,QAAKoI,GAAG,KAAKrK,SAAR,IAAqBqK,GAAG,CAACpK,MAAJ,GAAa,CAAvC,EAA0C;AACxCoK,SAAG,GAAGA,GAAG,CAACpB,OAAJ,CAAY,KAAZ,EAAoB,IAApB,CAAN,CADwC,CACP;AACjC;;AACA,UAAI,QAAOlB,KAAK,CAAC,UAAD,CAAZ,KAA4B,QAAhC,EAA0C;AAExC;AAEA,YAAIwC,KAAK,GAAGpL,MAAM,CAACqL,MAAP,CAAczC,KAAK,CAAC,UAAD,CAAnB,EAAiC5F,GAAjC,CAAqC,UAASsI,GAAT,EAAa;AAC5DA,aAAG,CAAC,QAAD,CAAH,KAAkBzK,SAAlB,GACE,CAAC,OAAD,EAAUyK,GAAG,CAAC,QAAD,CAAb,EAAyB,CAAC,KAAD,EAAQ,MAAMJ,GAAN,GAAY,GAApB,CAAzB,CADF,GAEE,IAFF;AAGC,SAJS,EAIPpJ,MAJO,CAIA,UAASyJ,EAAT,EAAapI,EAAb,EAAiB;AAACA,YAAE,IAAI,IAAN,GAAaoI,EAAb,GAAkB,CAAC,IAAD,EAAMA,EAAN,EAASpI,EAAT,CAAlB;AAA+B,SAJjD,CAAZ,CAJwC,CAUxC;;AAEA,YAAIiI,KAAK,KAAKvK,SAAV,IAAuBuK,KAAK,CAACtK,MAAN,GAAe,CAA1C,EAA6C;AAC3C;AACAqK,cAAI,GAAG,CAAC,CAAC,KAAD,EAAOA,IAAI,CAAC,CAAD,CAAX,EAAe,CAAC,IAAD,EAAMC,KAAN,CAAf,CAAD,CAAP;AACD;AACF;AACF;;AAED,SAAI,IAAI5H,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAG2H,IAAI,CAACrK,MAAxB,EAAgC0C,CAAC,EAAjC,EAAqC;AACjC;AACA8F,SAAG,CAACpH,IAAJ,CAAS8H,IAAI,CAAEmB,IAAI,CAAC3H,CAAD,CAAN,EAAWhD,GAAX,CAAb;AACH;;AAED,QAAI6J,CAAC,GAAGf,GAAG,CAAC,CAAD,CAAX,CA9J6B,CA8Jb;;AAChB,QAAIe,CAAC,IAAIxJ,SAAT,EAAoB;AAClBwJ,OAAC,GAAG,EAAJ;AACD;;AACD,WAAOA,CAAP;AACD,GAnKH;;AAoKExB,UAAQ,CAAC,QAAD,CAAR,CAAmB5H,GAAnB,GAAyB,CAAC,EAAD,EAAI,EAAJ,EAAO,EAAP,EAAU,CAAV,CAAzB,CA/SqC,CA+SE;AAGvC;;AACA4H,UAAQ,CAAC,OAAD,CAAR,GAAoB,YAAY;AAC9B;AACA;AACA,QAAIsC,IAAI,GAAGrI,SAAX;AACA,QAAIwG,GAAG,GAAG,EAAV;;AACA,SAAI,IAAI9F,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAG2H,IAAI,CAACrK,MAAxB,EAAgC0C,CAAC,EAAjC,EAAqC;AACnC;AACA,UAAI6G,CAAC,GAAG,+EAAS,CAAC,CAAC,QAAD,EAAWc,IAAI,CAAC3H,CAAD,CAAf,CAAD,EAAsBqF,QAAtB,CAAjB,CAFmC,CAEe;;AAClD,UAAIwB,CAAC,CAACvJ,MAAF,GAAW,CAAf,EAAkB;AAChBwI,WAAG,CAACpH,IAAJ,CAASmI,CAAT;AACD;AACF;;AAED,QAAIf,GAAG,CAACxI,MAAJ,GAAa,CAAjB,EAAoB;AAClB,UAAIwI,GAAG,CAACxI,MAAJ,GAAa,CAAjB,EAAoB;AAClB,eAAO,YAAYwI,GAAG,CAACE,IAAJ,CAAS,SAAT,CAAZ,GAAkC,GAAzC;AACD,OAFD,MAEO;AACL,eAAO,WAAWF,GAAG,CAAC,CAAD,CAArB;AACD;AACF,KAND,MAMO;AACL,aAAO,YAAP;AACD;AACF,GAtBD;;AAuBAT,UAAQ,CAAC,OAAD,CAAR,CAAkB5H,GAAlB,GAAwB,CAAC,EAAD,EAAI,EAAJ,EAAO,EAAP,EAAU,CAAV,CAAxB,CA1UqC,CA0UC;;AAExC,SAAO4H,QAAP;AACD;AAUM,SAAS2C,cAAT,CAAwBC,KAAxB,EAA+B7C,KAA/B,EAAsC;AAC3C,MAAI,OAAOA,KAAP,KAAiB,QAArB,EAA+BA,KAAK,GAAGlG,IAAI,CAACW,KAAL,CAAWuF,KAAX,CAAR;AAE/B,MAAIrC,KAAK,GAAG,2EAAK,CAACkF,KAAD,CAAjB;AAGA5L,EAAA,iEAAO,CAACqJ,GAAR,CAAY,mBAAZ,EAAiCxG,IAAI,CAACY,SAAL,CAAeiD,KAAf,CAAjC;;AAEA,MAAKA,KAAK,YAAYxD,KAAlB,KACCwD,KAAK,CAAC,CAAD,CAAL,KAAW,QAAX,IAAwBA,KAAK,CAACzF,MAAN,IAAe,CAAxC,IAAgDyF,KAAK,CAAC,CAAD,CAAL,KAAW,UAA3D,IAA2EA,KAAK,CAAC,CAAD,CAAL,KAAW,IAAtF,IAAgGA,KAAK,CAAC,CAAD,CAAL,KAAW,OAD3G,CAAJ,EAC2H,CACzH;AACD,GAHD,MAGO;AACL,UAAM,uDAAN;AACD;;AAGD,MAAIsC,QAAQ,GAAGF,iBAAiB,CAACC,KAAD,CAAhC;;AAEA,MAAIU,GAAG,GAAG,+EAAS,CAAC/C,KAAD,EAAQsC,QAAR,CAAnB,CAlB2C,CAoB3C;;AACA,SAAOS,GAAP;AACD,C;;;;;;;;;;;;;AC9YD;AAAA;;;;;;;;;;;;;;;;;;;;;AAsBA;AACA;AACA;CAGA;;AAEA,IAAI,CAACvG,KAAK,CAAC9C,SAAN,CAAgBmF,IAArB,EAA2B;AACzBrC,OAAK,CAAC9C,SAAN,CAAgBmF,IAAhB,GAAuB,UAASsG,SAAT,EAAoB;AACzC,QAAI,QAAQ,IAAZ,EAAkB;AAChB,YAAM,IAAIC,SAAJ,CAAc,kDAAd,CAAN;AACD;;AACD,QAAI,OAAOD,SAAP,KAAqB,UAAzB,EAAqC;AACnC,YAAM,IAAIC,SAAJ,CAAc,8BAAd,CAAN;AACD;;AACD,QAAIC,IAAI,GAAG5L,MAAM,CAAC,IAAD,CAAjB;AACA,QAAIc,MAAM,GAAG8K,IAAI,CAAC9K,MAAL,KAAgB,CAA7B;AACA,QAAI+K,OAAO,GAAG/I,SAAS,CAAC,CAAD,CAAvB;AACA,QAAIpC,KAAJ;;AAEA,SAAK,IAAI8C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG1C,MAApB,EAA4B0C,CAAC,EAA7B,EAAiC;AAC/B9C,WAAK,GAAGkL,IAAI,CAACpI,CAAD,CAAZ;;AACA,UAAIkI,SAAS,CAACvL,IAAV,CAAe0L,OAAf,EAAwBnL,KAAxB,EAA+B8C,CAA/B,EAAkCoI,IAAlC,CAAJ,EAA6C;AAC3C,eAAOlL,KAAP;AACD;AACF;;AACD,WAAOG,SAAP;AACD,GAnBD;AAoBD;;AAGM,SAASiL,WAAT,CAAqBlD,KAArB,EAA4B;AACjC,MAAIC,QAAQ,GAAG,4FAAiB,CAACD,KAAD,CAAhC;AAEA;;;AACAC,UAAQ,CAAC,KAAD,CAAR,GAAkB,YAAW;AAC3B,QAAIkD,CAAJ,CAD2B,CACpB;;AACP,QAAI3J,IAAI,GAAGW,KAAK,CAAC9C,SAAN,CAAgB2B,KAAhB,CAAsBzB,IAAtB,CAA2B2C,SAA3B,CAAX;AACAjD,IAAA,iEAAO,CAACqJ,GAAR,CAAY,UAAZ,EAAwB9G,IAAxB;;AAEA,QAAI4J,SAAS,GAAG,SAAZA,SAAY,CAASC,CAAT,EAAY;AAC1B,aAAO7J,IAAI,CAACgD,IAAL,CAAU,UAACjC,EAAD;AAAA,eAAQ8I,CAAC,IAAI9I,EAAE,CAAC,CAAD,CAAf;AAAA,OAAV,CAAP;AACD,KAFD;;AAIA,QAAI+I,GAAG,GAAGF,SAAS,CAAC,QAAD,CAAnB;AACAnM,IAAA,iEAAO,CAACqJ,GAAR,CAAY,gBAAZ,EAA8BgD,GAA9B;AACAH,KAAC,GAAG,+EAAS,CAACG,GAAD,EAAMrD,QAAN,CAAb;AAEA,QAAI7D,IAAI,GAAGgH,SAAS,CAAC,MAAD,CAApB;AACAnM,IAAA,iEAAO,CAACqJ,GAAR,CAAY,cAAZ,EAA4BlE,IAA5B;AACA+G,KAAC,GAAGA,CAAC,GAAG,GAAJ,GAAU,+EAAS,CAAC/G,IAAD,EAAO6D,QAAP,CAAvB;AAEA,QAAIsD,KAAK,GAAGH,SAAS,CAAC,OAAD,CAArB;AACAnM,IAAA,iEAAO,CAACqJ,GAAR,CAAY,eAAZ,EAA6BiD,KAA7B;;AACA,QAAIA,KAAK,YAAYpJ,KAAjB,IAA0BoJ,KAAK,CAACrL,MAAN,GAAe,CAA7C,EAAgD;AAC9CiL,OAAC,GAAGA,CAAC,GAAG,GAAJ,GAAU,+EAAS,CAACI,KAAD,EAAQtD,QAAR,CAAvB;AACD;;AAED,QAAIuD,GAAG,GAAGJ,SAAS,CAAC,MAAD,CAAnB;AACAnM,IAAA,iEAAO,CAACqJ,GAAR,CAAY,cAAZ,EAA4BkD,GAA5B;;AACA,QAAIA,GAAG,YAAYrJ,KAAf,IAAwBqJ,GAAG,CAACtL,MAAJ,GAAa,CAAzC,EAA4C;AAC1CiL,OAAC,GAAGA,CAAC,GAAG,GAAJ,GAAU,+EAAS,CAAEK,GAAF,EAAOvD,QAAP,CAAvB;AACD;;AAED,WAAOkD,CAAP;AACD,GA9BD;;AA+BAlD,UAAQ,CAAC,KAAD,CAAR,CAAgB5H,GAAhB,GAAsB,CAAC,EAAD,EAAI,EAAJ,EAAO,EAAP,EAAU,CAAV,CAAtB,CAnCiC,CAmCG;;AAEpC,WAAS+I,IAAT,CAAczH,CAAd,EAAiB;AACf1C,IAAA,iEAAO,CAACqJ,GAAR,CAAY,WAAZ,EAAyB3G,CAAzB;;AACA,QAAIA,CAAC,YAAYQ,KAAjB,EAAuB;AACrB,UAAIR,CAAC,CAACzB,MAAF,GAAW,CAAf,EAAkB;AAChB,YAAIyB,CAAC,CAAC,CAAD,CAAD,KAAS,IAAT,IAAiBA,CAAC,CAACzB,MAAF,IAAY,CAAjC,EAAoC;AAClC,iBAAOyB,CAAC,CAAC,CAAD,CAAD,GAAO,IAAP,GAAcA,CAAC,CAAC,CAAD,CAAtB;AACD,SAFD,MAEO,IAAIA,CAAC,CAAC,CAAD,CAAD,KAAS,GAAb,EAAkB;AACvB,iBAAOyH,IAAI,CAACzH,CAAC,CAAC,CAAD,CAAF,CAAJ,GAAa,OAAb,GAAuBA,CAAC,CAAC,CAAD,CAAD,CAAKuH,OAAL,CAAa,GAAb,EAAiB,KAAjB,CAAvB,GAAiD,GAAxD;AACD,SAFM,MAEA;AACL,iBAAOvH,CAAC,CAAC,CAAD,CAAD,GAAO,GAAP,GAAaA,CAAC,CAACX,KAAF,CAAQ,CAAR,EAAWoB,GAAX,CAClB,UAASmH,KAAT,EAAgB;AAAE,mBAAOH,IAAI,CAACG,KAAD,CAAX;AAAoB,WADpB,EAElBX,IAFkB,CAEb,GAFa,CAAb,GAEO,GAFd;AAGD;AACF,OAVD,MAUO;AACL,eAAO,EAAP;AACD;AACF,KAdD,MAcO;AACL,aAAOjH,CAAP;AACD;AACF,GAxDgC,CA0D/B;;;AACFsG,UAAQ,CAAC,QAAD,CAAR,GAAqB,YAAW;AAC9B,QAAItG,CAAC,GAAGQ,KAAK,CAAC9C,SAAN,CAAgB2B,KAAhB,CAAsBzB,IAAtB,CAA2B2C,SAA3B,CAAR;AACAjD,IAAA,iEAAO,CAACqJ,GAAR,CAAY,aAAZ,EAA4BxG,IAAI,CAACY,SAAL,CAAef,CAAf,CAA5B;;AACA,QAAIA,CAAC,CAACzB,MAAF,GAAW,CAAf,EAAkB;AAChB,aAAO,UAAP;AACD,KAFD,MAEO;AACL,aAAO,YAAYyB,CAAC,CAACS,GAAF,CAAMgH,IAAN,EAAYR,IAAZ,CAAiB,GAAjB,CAAnB;AACD;AACF,GARD;;AASAX,UAAQ,CAAC,QAAD,CAAR,CAAmB5H,GAAnB,GAAyB,CAAC,EAAD,EAAI,EAAJ,EAAO,EAAP,EAAU,CAAV,CAAzB,CApEiC,CAoEM;;AAEvC4H,UAAQ,CAAC,MAAD,CAAR,GAAmB,YAAW;AAC5B,QAAItG,CAAC,GAAGQ,KAAK,CAAC9C,SAAN,CAAgB2B,KAAhB,CAAsBzB,IAAtB,CAA2B2C,SAA3B,CAAR;AACAjD,IAAA,iEAAO,CAACqJ,GAAR,CAAY,WAAZ,EAAyB3G,CAAzB;;AACA,QAAIA,CAAC,CAACzB,MAAF,GAAW,CAAf,EAAkB;AAChB,aAAO,EAAP;AACD,KAFD,MAEO;AACL,aAAO,UAAUyB,CAAC,CAACS,GAAF,CAAMgH,IAAN,EAAYR,IAAZ,CAAiB,GAAjB,CAAjB;AACD;AACF,GARD;;AASAX,UAAQ,CAAC,MAAD,CAAR,CAAiB5H,GAAjB,GAAuB,CAAC,EAAD,EAAI,EAAJ,EAAO,EAAP,EAAU,CAAV,CAAvB,CA/EiC,CA+EI;;AAErC,SAAO4H,QAAP;AACD;AAGD;;;;;;;;;;;;;;;;;;;AAmBO,SAASwD,cAAT,CAAwBZ,KAAxB,EAA+B7C,KAA/B,EAAsC;AAC3C,MAAIpI,GAAG,GAAGsL,WAAW,CAAClD,KAAD,CAArB;AACA,MAAIC,QAAQ,GAAGrI,GAAf,CAF2C,CAG3C;;AAEAqI,UAAQ,CAAC,IAAD,CAAR,GAAiB,YAAW;AAC1B,QAAIS,GAAG,GAAG,EAAV;;AAEA,SAAK,IAAI9F,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGV,SAAS,CAAChC,MAA9B,EAAsC0C,CAAC,EAAvC,EAA2C;AACzC8F,SAAG,CAACpH,IAAJ,CAAS,+EAAS,CAAEY,SAAS,CAACU,CAAD,CAAX,EAAgBqF,QAAhB,CAAlB;AACD;;AAED,WAAOS,GAAG,CAACE,IAAJ,CAAS,GAAT,CAAP;AACD,GARD;;AASAX,UAAQ,CAAC,IAAD,CAAR,CAAe5H,GAAf,GAAqB,CAAC,EAAD,EAAI,EAAJ,EAAO,EAAP,EAAU,CAAV,CAArB,CAd2C,CAcR;;AAEnC,MAAIsF,KAAK,GAAG,2EAAK,CAACkF,KAAD,CAAjB;AACA5L,EAAA,iEAAO,CAACqJ,GAAR,CAAY,MAAZ,EAAoB3C,KAApB;AAEA;;;;;AAMA;AACA;;AACA,MAAIA,KAAK,CAAC,CAAD,CAAL,KAAa,IAAjB,EAAuB;AACrBA,SAAK,GAAG,CAAC,IAAD,EAAMA,KAAN,CAAR;AACD,GA7B0C,CA+B3C;AACA;AACA;AACA;;AAEA;;;;;;;AAMA,MAAIgE,GAAG,GAAG,CAAC,KAAD,CAAV;;AACA,MAAI+B,cAAc,GAAG,SAAjBA,cAAiB,CAASJ,GAAT,EAAc;AACjC,QAAI,EAAEA,GAAG,YAAYnJ,KAAjB,CAAJ,EAA6B;AAC3BmJ,SAAG,GAAG,CAACA,GAAD,CAAN;AACD;;AACD,QAAIK,EAAE,GAAGL,GAAG,CAAC,CAAD,CAAZ;AACA,QAAID,CAAC,GAAG,KAAR;;AACA,QAAIM,EAAE,IAAI,OAAN,IAAiBA,EAAE,IAAI,QAAvB,IAAmCA,EAAE,IAAI,MAAzC,IAAmDA,EAAE,IAAI,QAAzD,IAAqEA,EAAE,IAAI,MAA/E,EAAuF;AACrFL,SAAG,CAAC,CAAD,CAAH,GAAS,QAAT;AACAD,OAAC,GAAG,IAAJ;AACD;;AACD1B,OAAG,CAACrI,IAAJ,CAASgK,GAAT;;AACA,QAAID,CAAJ,EAAO;AACL1B,SAAG,CAACrI,IAAJ,CAAS,CAAC,MAAD,EAAQqK,EAAR,CAAT;AACD;;AACD1M,IAAA,iEAAO,CAACqJ,GAAR,CAAY,wBAAZ,EAAsCqB,GAAtC;AACD,GAfD;;AAiBA,OAAK,IAAI/G,CAAC,GAAC,CAAX,EAAcA,CAAC,GAAC+C,KAAK,CAACzF,MAAtB,EAA8B0C,CAAC,EAA/B,EAAkC;AAChC,QAAI+D,IAAI,GAAGhB,KAAK,CAAC/C,CAAD,CAAhB;;AACA,QAAI+D,IAAI,YAAYxE,KAApB,EAA2B;AACzB;AACA,UAAIwE,IAAI,CAAC,CAAD,CAAJ,KAAY,UAAhB,EAA4B;AAACA,YAAI,CAAC,CAAD,CAAJ,GAAQ,MAAR;AAAe;;AAAA;;AAC5C,UAAIA,IAAI,CAAC,CAAD,CAAJ,KAAY,OAAhB,EAAyB;AAACA,YAAI,CAAC,CAAD,CAAJ,GAAQ,OAAR;AAAgB;;AAAA;;AAC1C,UAAKA,IAAI,CAAC,CAAD,CAAJ,KAAY,GAAjB,EAAsB;AACpB;AACA+E,sBAAc,CAAC/E,IAAI,CAAC,CAAD,CAAL,CAAd;AACD,OAHD,MAGO,IAAIsB,QAAQ,CAACtB,IAAI,CAAC,CAAD,CAAJ,CAAQrH,QAAR,EAAD,CAAR,KAAiCW,SAArC,EAAgD;AACrD;AACA;AACA;AACAyL,sBAAc,CAAC/E,IAAD,CAAd;AACD,OALM,MAKA;AACLgD,WAAG,CAACrI,IAAJ,CAASqE,KAAK,CAAC/C,CAAD,CAAd;AACD;AACF,KAfD,MAeO,IAAIqF,QAAQ,CAACtB,IAAI,CAACrH,QAAL,EAAD,CAAR,KAA8BW,SAAlC,EAA6C;AAClD;AACA;AACAyL,oBAAc,CAAC/E,IAAD,CAAd;AACD,KAJM,MAIA;AACL,YAAM,sBAAsB7E,IAAI,CAACY,SAAL,CAAeiE,IAAf,CAA5B;AACD;AACF;;AAED1H,EAAA,iEAAO,CAACqJ,GAAR,CAAY,SAAZ,EAAuBqB,GAAvB;AAEA,MAAIjB,GAAG,GAAG,+EAAS,CAACiB,GAAD,EAAM1B,QAAN,CAAnB,CAxF2C,CAyF3C;;AAEA,SAAOS,GAAP;AACD;AAIM,SAASkD,oBAAT,CAA8Bf,KAA9B,EAAqC7C,KAArC,EAA4C6D,aAA5C,EAA2DC,aAA3D,EAA0E;AAC/E,MAAIlM,GAAG,GAAGsL,WAAW,CAAClD,KAAD,CAArB;AACA,MAAIC,QAAQ,GAAGrI,GAAf,CAF+E,CAG/E;;AAEA,MAAI+F,KAAK,GAAG,2EAAK,CAACkF,KAAD,CAAjB;AACA5L,EAAA,iEAAO,CAACqJ,GAAR,CAAY,YAAZ,EAA0B3C,KAA1B;AAEA;;;;;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAIgE,GAAG,GAAG,CAAC,KAAD,CAAV,CAxB+E,CAwB5D;;AACnB,MAAIoC,KAAK,GAAG;AAAC,aAAQ,EAAT;AAAa,cAAS,EAAtB;AAA0B,gBAAW,EAArC;AAAwC,YAAO;AAA/C,GAAZ;;AACA,OAAK,IAAInJ,CAAC,GAAC,CAAX,EAAcA,CAAC,GAAC+C,KAAK,CAACzF,MAAtB,EAA8B0C,CAAC,EAA/B,EAAkC;AAChC,QAAI+D,IAAI,GAAGhB,KAAK,CAAC/C,CAAD,CAAhB;;AACA,QAAI+D,IAAI,YAAYxE,KAApB,EAA2B;AACzB,UAAIwJ,EAAE,GAAGhF,IAAI,CAAC,CAAD,CAAb;;AACA,UAAIgF,EAAE,IAAI,OAAN,IAAiBA,EAAE,IAAI,QAAvB,IAAmCA,EAAE,IAAI,UAAzC,IAAuDA,EAAE,IAAI,MAA7D,IAAuEA,EAAE,IAAI,GAAjF,EAAsF;AACpF,cAAM,sBAAsB7J,IAAI,CAACY,SAAL,CAAeiJ,EAAf,CAA5B;AACD,OAJwB,CAKzB;;;AACA,UAAIA,EAAE,KAAK,GAAP,IAAchF,IAAI,CAAC,CAAD,CAAJ,CAAQ,CAAR,MAAe,QAAjC,EAA2C;AACzCoF,aAAK,CAAC,QAAD,CAAL,CAAgBzK,IAAhB,CAAqBqF,IAAI,CAAC,CAAD,CAAzB;AACD,OAFD,MAEO;AACLoF,aAAK,CAACJ,EAAD,CAAL,CAAUrK,IAAV,CAAeqF,IAAf;AACD;AACF,KAXD,MAWO;AACL,YAAM,yBAAyB7E,IAAI,CAACY,SAAL,CAAeiE,IAAf,CAA/B;AACD;AACF;;AAED,MAAIkF,aAAa,KAAK5L,SAAtB,EAAiC;AAC/B8L,SAAK,CAACJ,EAAD,CAAL,CAAUrK,IAAV,CAAe,CAAC,MAAD,EAASuK,aAAT,CAAf;AACD;;AAED,MAAIrK,IAAI,GAAGuK,KAAK,CAAC,QAAD,CAAL,CAAgB3J,GAAhB,CAAoB,UAAAiH,EAAE;AAAA,WAAIA,EAAE,CAACrI,KAAH,CAAS,CAAT,CAAJ;AAAA,GAAtB,CAAX;AACA,MAAIsK,GAAG,GAAG,GAAGtF,MAAH,CAAU/D,KAAV,CAAgB,CAAC,QAAD,CAAhB,EAA4BT,IAA5B,CAAV,CAjD+E,CAiDlC;;AAC7CmI,KAAG,CAACrI,IAAJ,CAASgK,GAAT;AAEA3B,KAAG,CAACrI,IAAJ,CAAUyK,KAAK,CAAC,MAAD,CAAL,CAAc9H,GAAd,EAAV;AAEAzC,MAAI,GAAGuK,KAAK,CAAC,OAAD,CAAL,CAAe3J,GAAf,CAAmB,UAAAiH,EAAE;AAAA,WAAIA,EAAE,CAACrI,KAAH,CAAS,CAAT,CAAJ;AAAA,GAArB,CAAP;AACAQ,MAAI,GAAG,GAAGwE,MAAH,CAAU/D,KAAV,CAAgB,EAAhB,EAAoBT,IAApB,CAAP,CAvD+E,CAuD7C;;AAElC,MAAIwK,CAAC,GAAG,CAAC,IAAD,EAAOxK,IAAI,CAAC,CAAD,CAAX,CAAR;;AACA,MAAIA,IAAI,CAACtB,MAAL,GAAc,CAAlB,EAAqB;AACnB,SAAK,IAAI0C,CAAC,GAAC,CAAX,EAAcA,CAAC,GAACpB,IAAI,CAACtB,MAArB,EAA6B0C,CAAC,EAA9B,EAAiC;AAC/BoJ,OAAC,GAAG,CAAC,KAAD,EAAQA,CAAR,EAAW,CAAC,IAAD,EAAOxK,IAAI,CAACoB,CAAD,CAAX,CAAX,CAAJ;AACD;AACF;;AAED+G,KAAG,CAACrI,IAAJ,CAAS,CAAC,OAAD,EAAU0K,CAAV,CAAT;AAEA/M,EAAA,iEAAO,CAACqJ,GAAR,CAAY,OAAZ,EAAqBxG,IAAI,CAACY,SAAL,CAAesJ,CAAf,CAArB;AAEA/M,EAAA,iEAAO,CAACqJ,GAAR,CAAY,eAAZ,EAA6BqB,GAA7B;AAEA,MAAIjB,GAAG,GAAG,+EAAS,CAACiB,GAAD,EAAM1B,QAAN,CAAnB;AAEA,SAAOS,GAAP;AACD,C;;;;;;;;;;;;;;;;;;;;ACtUD;AACA;AACA;AACA;AACA;CAeA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA,uB;;;;;;;;AC1BA;AAAA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AAEA,IAAMuD,OAAO,GAAG,SAAVA,OAAU,CAAC5J,CAAD;AAAA,SAAOA,CAAC,IAAI,GAAL,IAAYA,CAAC,IAAI,GAAxB;AAAA,CAAhB;;AAEe,SAAS6J,QAAT,CAAkBvH,CAAlB,EAAwD;AAAA,MAAnC+B,MAAmC,uEAA1B,OAA0B;AAAA,MAAjByF,MAAiB,uEAAR,MAAQ;AACrE,MAAI9J,CAAJ,CADqE,CACzC;;AAC5B,MAAI+B,IAAJ,CAFqE,CAEzC;;AAC5B,MAAIxB,CAAC,GAAG,CAAR,CAHqE,CAGzC;;AAC5B,MAAI1C,MAAM,GAAGyE,CAAC,CAACzE,MAAf;AACA,MAAIuE,CAAJ,CALqE,CAKzC;;AAC5B,MAAI0G,CAAJ,CANqE,CAMzC;;AAC5B,MAAIzD,GAAJ,CAPqE,CAOzC;;AAC5B,MAAI1H,MAAM,GAAG,EAAb,CARqE,CAQzC;;AAC5B,MAAMoM,IAAI,GAAG,SAAPA,IAAO,CAAC3G,IAAD,EAAO3F,KAAP;AAAA,WAAkB;AAAC2F,UAAI,EAAJA,IAAD;AAAO3F,WAAK,EAALA,KAAP;AAAcsE,UAAI,EAAJA,IAAd;AAAoBC,QAAE,EAAEzB;AAAxB,KAAlB;AAAA,GAAb,CATqE,CASS;AAE9E;;;AACA,MAAI,CAAC+B,CAAL,EAAQ;AACN,WAAO,EAAP;AACD,GAdoE,CAgBrE;;;AACAtC,GAAC,GAAGsC,CAAC,CAAC0H,MAAF,CAASzJ,CAAT,CAAJ;;AACA,SAAOP,CAAP,EAAU;AACR+B,QAAI,GAAGxB,CAAP,CADQ,CAGR;;AACA,QAAIP,CAAC,IAAI,GAAT,EAAc;AACZO,OAAC,IAAI,CAAL;AACAP,OAAC,GAAGsC,CAAC,CAAC0H,MAAF,CAASzJ,CAAT,CAAJ,CAFY,CAId;AACC,KALD,MAKO,IAAKP,CAAC,IAAI,GAAL,IAAYA,CAAC,IAAI,GAAlB,IAA2BA,CAAC,IAAI,GAAL,IAAYA,CAAC,IAAI,GAA5C,IAAoDA,CAAC,KAAK,GAA1D,IAAiEA,CAAC,KAAK,GAA3E,EAAgF;AACrFqF,SAAG,GAAGrF,CAAN;AACAO,OAAC,IAAI,CAAL;;AACA,eAAS;AACPP,SAAC,GAAGsC,CAAC,CAAC0H,MAAF,CAASzJ,CAAT,CAAJ;;AACA,YAAKP,CAAC,IAAI,GAAL,IAAYA,CAAC,IAAI,GAAlB,IAA2BA,CAAC,IAAI,GAAL,IAAYA,CAAC,IAAI,GAA5C,IAAqDA,CAAC,IAAI,GAAL,IAAYA,CAAC,IAAI,GAAtE,IAA8EA,CAAC,KAAK,GAApF,IAA2FA,CAAC,KAAK,GAArG,EAA0G;AACxGqF,aAAG,IAAIrF,CAAP;AACAO,WAAC,IAAI,CAAL;AACD,SAHD,MAGO;AACL;AACD;AACF;;AAED5C,YAAM,CAACsB,IAAP,CAAY8K,IAAI,CAAC,MAAD,EAAS1E,GAAT,CAAhB,EAbqF,CAcvF;AAEA;AACA;AAEC,KAnBM,MAmBA,IAAIrF,CAAC,IAAI,GAAL,IAAYA,CAAC,IAAI,GAArB,EAA0B;AAC/BqF,SAAG,GAAGrF,CAAN;AACAO,OAAC,IAAI,CAAL,CAF+B,CAI/B;;AAEA,eAAS;AACPP,SAAC,GAAGsC,CAAC,CAAC0H,MAAF,CAASzJ,CAAT,CAAJ;;AACA,YAAIP,CAAC,GAAG,GAAJ,IAAWA,CAAC,GAAG,GAAnB,EAAwB;AACtB;AACD;;AACDO,SAAC,IAAI,CAAL;AACA8E,WAAG,IAAIrF,CAAP;AACD,OAb8B,CAe/B;;;AAEA,UAAIA,CAAC,KAAK,GAAV,EAAe;AACbO,SAAC,IAAI,CAAL;AACA8E,WAAG,IAAIrF,CAAP;;AACA,iBAAS;AACPA,WAAC,GAAGsC,CAAC,CAAC0H,MAAF,CAASzJ,CAAT,CAAJ;;AACA,cAAIP,CAAC,GAAG,GAAJ,IAAWA,CAAC,GAAG,GAAnB,EAAwB;AACtB;AACD;;AACDO,WAAC,IAAI,CAAL;AACA8E,aAAG,IAAIrF,CAAP;AACD;AACF,OA5B8B,CA8B/B;;;AACA,UAAIA,CAAC,KAAK,GAAN,IAAaA,CAAC,KAAK,GAAvB,EAA4B;AAC1BO,SAAC,IAAI,CAAL;AACA8E,WAAG,IAAIrF,CAAP;AACAA,SAAC,GAAGsC,CAAC,CAAC0H,MAAF,CAASzJ,CAAT,CAAJ;;AACA,YAAIP,CAAC,KAAK,GAAN,IAAaA,CAAC,KAAK,GAAvB,EAA4B;AAC1BO,WAAC,IAAI,CAAL;AACA8E,aAAG,IAAIrF,CAAP;AACAA,WAAC,GAAGsC,CAAC,CAAC0H,MAAF,CAASzJ,CAAT,CAAJ;AACD;;AACD,YAAIP,CAAC,GAAG,GAAJ,IAAWA,CAAC,GAAG,GAAnB,EAAwB;AACtBmD,mBAAS,CAAC4G,IAAI,CAAC,QAAD,EAAW1E,GAAX,CAAL,EAAsB,cAAtB,CAAT;AACD;;AACD,WAAG;AACD9E,WAAC,IAAI,CAAL;AACA8E,aAAG,IAAIrF,CAAP;AACAA,WAAC,GAAGsC,CAAC,CAAC0H,MAAF,CAASzJ,CAAT,CAAJ;AACD,SAJD,QAISP,CAAC,IAAI,GAAL,IAAYA,CAAC,IAAI,GAJ1B;AAKD,OAhD8B,CAkD/B;;;AAEA,UAAIA,CAAC,IAAI,GAAL,IAAYA,CAAC,IAAI,GAArB,EAA0B;AAChBqF,WAAG,IAAIrF,CAAP;AACAO,SAAC,IAAI,CAAL;AACA4C,iBAAS,CAAC4G,IAAI,CAAC,QAAD,EAAW1E,GAAX,CAAL,EAAsB,YAAtB,CAAT;AACT,OAxD8B,CA0D/B;AACA;AACA;AACA;;;AAGAjD,OAAC,GAAG,CAACiD,GAAL;;AACA,UAAI4E,QAAQ,CAAC7H,CAAD,CAAZ,EAAiB;AACfzE,cAAM,CAACsB,IAAP,CAAY8K,IAAI,CAAC,QAAD,EAAW3H,CAAX,CAAhB;AACD,OAFD,MAEO;AACLe,iBAAS,CAAC4G,IAAI,CAAC,QAAD,EAAW1E,GAAX,CAAL,EAAsB,YAAtB,CAAT;AACD,OArE8B,CAwEjC;;AAEC,KA1EM,MA0EA,IAAIrF,CAAC,KAAK,IAAN,IAAcA,CAAC,KAAK,GAAxB,EAA6B;AAClCqF,SAAG,GAAG,EAAN;AACAyD,OAAC,GAAG9I,CAAJ;AACAO,OAAC,IAAI,CAAL;;AACA,eAAS;AACPP,SAAC,GAAGsC,CAAC,CAAC0H,MAAF,CAASzJ,CAAT,CAAJ;;AACA,YAAIP,CAAC,GAAG,GAAR,EAAa;AACX;AACA;AACA;AACAmD,mBAAS,CAAC4G,IAAI,CAAC,EAAD,EAAK1E,GAAL,CAAJ,IAAiB0E,IAAI,CAACjB,CAAC,KAAG,GAAJ,GAAQ,eAAR,GAAwB,eAAzB,EAA0CzD,GAA1C,CAAtB,EACCrF,CAAC,KAAK,IAAN,IAAcA,CAAC,KAAK,IAApB,IAA4BA,CAAC,KAAK,EAAlC,GACK,sBADL,GAEK,8BAHN,CAAT;AAID,SAVM,CAYP;;;AAEA,YAAIA,CAAC,KAAK8I,CAAV,EAAa;AACX;AACD,SAhBM,CAkBP;;;AAEA,YAAI9I,CAAC,KAAK,IAAV,EAAgB;AACdO,WAAC,IAAI,CAAL;;AACA,cAAIA,CAAC,IAAI1C,MAAT,EAAiB;AACfsF,qBAAS,CAAC4G,IAAI,CAACjB,CAAC,KAAG,GAAJ,GAAQ,eAAR,GAAwB,eAAzB,EAA0CzD,GAA1C,CAAL,EAAqD,qBAArD,CAAT;AACD;;AACDrF,WAAC,GAAGsC,CAAC,CAAC0H,MAAF,CAASzJ,CAAT,CAAJ;;AACA,kBAAQP,CAAR;AACA,iBAAK,GAAL;AACEA,eAAC,GAAG,IAAJ;AACA;;AACF,iBAAK,GAAL;AACEA,eAAC,GAAG,IAAJ;AACA;;AACF,iBAAK,GAAL;AACEA,eAAC,GAAG,IAAJ;AACA;;AACF,iBAAK,GAAL;AACEA,eAAC,GAAG,IAAJ;AACA;;AACF,iBAAK,GAAL;AACEA,eAAC,GAAG,IAAJ;AACA;;AACF,iBAAK,GAAL;AACE,kBAAIO,CAAC,IAAI1C,MAAT,EAAiB;AACfsF,yBAAS,CAAC4G,IAAI,CAACjB,CAAC,KAAG,GAAJ,GAAQ,eAAR,GAAwB,eAAzB,EAA0CzD,GAA1C,CAAL,EAAqD,qBAArD,CAAT;AACD;;AACDrF,eAAC,GAAGkK,QAAQ,CAAC5H,CAAC,CAAC0F,MAAF,CAASzH,CAAC,GAAG,CAAb,EAAgB,CAAhB,CAAD,EAAqB,EAArB,CAAZ;;AACA,kBAAI,CAAC0J,QAAQ,CAACjK,CAAD,CAAT,IAAgBA,CAAC,GAAG,CAAxB,EAA2B;AACzBmD,yBAAS,CAAC4G,IAAI,CAACjB,CAAC,KAAG,GAAJ,GAAQ,eAAR,GAAwB,eAAzB,EAA0CzD,GAA1C,CAAL,EAAqD,qBAArD,CAAT;AACD;;AACDrF,eAAC,GAAGmK,MAAM,CAACC,YAAP,CAAoBpK,CAApB,CAAJ;AACAO,eAAC,IAAI,CAAL;AACA;AA1BF;AA4BD;;AACD8E,WAAG,IAAIrF,CAAP;AACAO,SAAC,IAAI,CAAL;AACD;;AACDA,OAAC,IAAI,CAAL;AACA5C,YAAM,CAACsB,IAAP,CAAY8K,IAAI,CAACjB,CAAC,KAAG,GAAJ,GAAQ,eAAR,GAAwB,eAAzB,EAA0CzD,GAA1C,CAAhB;AACArF,OAAC,GAAGsC,CAAC,CAAC0H,MAAF,CAASzJ,CAAT,CAAJ,CAhEkC,CAkEpC;AACC,KAnEM,MAmEA,IAAIP,CAAC,KAAK,GAAN,IAAasC,CAAC,CAAC0H,MAAF,CAASzJ,CAAC,GAAG,CAAb,MAAoB,GAArC,EAA0C;AAC/CA,OAAC,IAAI,CAAL;;AACA,eAAS;AACPP,SAAC,GAAGsC,CAAC,CAAC0H,MAAF,CAASzJ,CAAT,CAAJ;;AACA,YAAIP,CAAC,KAAK,IAAN,IAAcA,CAAC,KAAK,IAApB,IAA4BA,CAAC,KAAK,EAAtC,EAA0C;AACxC;AACD;;AACDO,SAAC,IAAI,CAAL;AACD,OAR8C,CAUjD;;AAEC,KAZM,MAYA,IAAI8D,MAAM,CAAC0D,OAAP,CAAe/H,CAAf,KAAqB,CAAzB,EAA4B;AACjCqF,SAAG,GAAGrF,CAAN;AACAO,OAAC,IAAI,CAAL;;AACA,aAAO,IAAP,EAAa;AACXP,SAAC,GAAGsC,CAAC,CAAC0H,MAAF,CAASzJ,CAAT,CAAJ;;AACA,YAAIA,CAAC,IAAI1C,MAAL,IAAeiM,MAAM,CAAC/B,OAAP,CAAe/H,CAAf,IAAoB,CAAvC,EAA0C;AACxC;AACD;;AACDqF,WAAG,IAAIrF,CAAP;AACAO,SAAC,IAAI,CAAL;AACD;;AACD5C,YAAM,CAACsB,IAAP,CAAY8K,IAAI,CAAC,UAAD,EAAa1E,GAAb,CAAhB,EAXiC,CAapC;AACE,KAdM,MAcA;AACL9E,OAAC,IAAI,CAAL;AACA5C,YAAM,CAACsB,IAAP,CAAY8K,IAAI,CAAC,UAAD,EAAa/J,CAAb,CAAhB;AACAA,OAAC,GAAGsC,CAAC,CAAC0H,MAAF,CAASzJ,CAAT,CAAJ;AACD;AACF;;AACD,SAAO5C,MAAP;AACD;AAAA,C;;;;;;;;ACvPM,SAAS0M,gBAAT,CAA0BC,KAA1B,EAAiC;AACnC,SAAO,MAAMA,KAAK,CAACrN,QAAN,GAAiB4J,OAAjB,CAAyB,KAAzB,EAAiC,IAAjC,CAAN,GAA+C,GAAtD;AACJ,C","file":"lpe.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"lpe\"] = factory();\n\telse\n\t\troot[\"lpe\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 841813310a34df6b652d","\nexport default console;\n\n\n// WEBPACK FOOTER //\n// ./src/console/console.js","/**\n *  miniMAL lisp interpreter\n *  Copyright (C) 2014 Joel Martin\n *  Licensed under MPL 2.0\n *  https://github.com/kanaka/mal\n * \n */\n/**\n *  The code has been reworked to suite LuxmsBI needs\n *  by esix & Dmitry Dorofeev\n *  2017-2019\n */\n\nimport console from './console/console';\n\nconst isArray = (arg) => Object.prototype.toString.call(arg) === '[object Array]';\nconst isString = (arg) => (typeof arg === 'string');\nconst isHash = (arg) => (typeof arg === 'object') && (arg !== null) && !isArray(arg);\nconst isFunction = (arg) => (typeof arg === 'function');\n\n\n/**\n * Get or Set variable in context\n * @param {*} ctx - array, hashmap or function that stores variables \n * @param {*} varName - the name of variable\n * @param {*} value - optional value to set (undefied if get)\n */\nfunction $var$(ctx, varName, value) {\n  if (isArray(ctx)) {                                                           // contexts chain\n    for (let theCtx of ctx) {\n      const result = $var$(theCtx, varName);\n      if (result === undefined) continue;                                       // no such var in context\n      if (value === undefined) return result;                                   // get => we've got a result\n      return $var$(theCtx, varName, value);                                     // set => redirect 'set' to context with variable.\n    }\n    if (value === undefined) return undefined;                                  // get => variable not found in all contexts\n    if (ctx.length) $var$(ctx[0], varName, value);                              // set => set variable to HEAD context\n    return undefined;                                                           // ??? ctx.length = 0\n  }\n  \n  if (isFunction(ctx)) return ctx(varName, value);\n\n  if (isHash(ctx)) {\n    return (value === undefined) ? ctx[varName] : (ctx[varName] = value);\n  }\n\n  return undefined;\n}\n\nfunction makeMacro(fn) {\n  fn.ast = [[],{},[],1]; // mark as macro\n  return fn;\n}\n\nfunction aListToHashTable(alist) {\n  let result = {};\n  alist.forEach(pair => result[pair[0]] = pair[1]);\n  return result;\n}\n\nfunction makeLetBindings(bindings) {\n  if (isHash(bindings)) return {...bindings};\n  if (isArray(bindings)) return aListToHashTable(bindings);\n  if (isFunction(bindings)) return bindings;\n  throw new Error('LISP: let expression invalid form in ' + ast);\n}\n\n\nconst SPECIAL_FORMS = {                                                         // built-in special forms\n  'let': (ast, ctx, rs) => EVAL(['begin', ...ast.slice(1)], [makeLetBindings(ast[0]), ctx], rs),\n  '`': (ast, ctx) => ast[0],                                                    // quote\n  'macroexpand': macroexpand,\n  'begin': (ast, ctx) => ast.reduce((acc, astItem) => EVAL(astItem, ctx), null),\n  'do': (ast, ctx) => { throw new Error('DO not implemented') },\n  'if': (ast, ctx, rs) => {\n    debugger;\n    return EVAL(ast[0], ctx, false) ? EVAL(ast[1], ctx, rs) : EVAL(ast[2], ctx, rs);\n  },\n  '~': (ast, ctx, rs) => {                                                      // mark as macro\n    const f = EVAL(ast[0], ctx, rs);                                            // eval regular function\n    f.ast.push(1); // mark as macro\n    return f;\n  },\n\n};\n\n\nconst STDLIB = {\n  // built-in variables\n  '#t': true,\n  '#f': false,\n  'NIL': null,\n\n  // built-in function\n  '=': (...args) => args.every(v => v === args[0]),\n  '+': (...args) => args.reduce((a, b) => a + b),\n  '-': (...args) => args.length === 1 ? -args[0] : args.reduce((a, b) => a - b),\n  '*': (...args) => args.reduce((a, b) => a * b),\n  '/': (...args) => args.length === 1 ? 1 / args[0] : args.reduce((a, b) => a / b),\n\n\n  // not implemented yet\n  // 'hash-table->alist'\n\n  // system functions & objects\n  // 'js': eval,\n  eval_context: eval_context,                           // TODO: remove\n  JSON: JSON,\n  console: console,\n  eval: (a) => EVAL(a, STDLIB),\n};\n\n\n\n// These could all also be interop\nSTDLIB[\"<\"]     = function(a,b) { return a<b; };\nSTDLIB[\">\"]     = function(a,b) { return a>b; };\nSTDLIB[\"isa\"]   = function(a,b) { return a instanceof b; };\nSTDLIB[\"type\"]  = function(a)   { return typeof a; };\n// new expecting real object as a argument, can not process string names...\nSTDLIB[\"new\"]   = function(a)   { return new (a.bind.apply(a, arguments)); };\nSTDLIB[\"del\"]   = function(a,b) { return delete a[b]; };\nSTDLIB[\"list\"]  = function() { return Array.prototype.slice.call(arguments); };\nSTDLIB[\"vector\"]  = (...args) => args;\nSTDLIB[\"map\"]   = function(a,b) { return b.map(a); };\nSTDLIB[\"throw\"] = function(a)   { throw(a); };\nSTDLIB[\"identity\"] = function(a) { return a;};\n\n\n// for each array element, get property value, present result as array.\nSTDLIB[\"pluck\"] = function(c,k) { return c.map(function(el){return el[k]}); };\n\n\n// Shortcut for using RegExp\nSTDLIB[\"RegExp\"] = function(a) { return RegExp.apply(null, arguments);};\n\n\nSTDLIB[\"'\"] = function(a) { return a.toString(); };\nSTDLIB[\"'\"].ast = [[],{},[],1]; // mark as macro\n\n\nSTDLIB['\"'] = function(a) { return a.toString(); };\nSTDLIB['\"'].ast = [[],{},[],1]; // mark as macro\n\nSTDLIB[\"[\"] = function() { return Array.prototype.slice.call(arguments); };\n\n\nSTDLIB[\"read-string\"] = function(a) { return JSON.parse(a); };\n// E[\"slurp\"] = function(a)   { return require('fs').readFileSync(a,'utf-8'); }\n// E[\"load-file\"] = function(a) { return EVAL(JSON.parse(E[\"slurp\"](a)),E);  }\n\n\nSTDLIB[\"rep\"] = function (a) {\n  return JSON.stringify(EVAL(JSON.parse(a), STDLIB));\n};\n\n\nSTDLIB[\"()\"] = function() {\n  return Array.prototype.slice.call(arguments).splice(1);\n};\nSTDLIB[\"()\"].ast = [[],{},[],1]; // mark as macro\n\n\nSTDLIB[\"->\"] = function() {\n  // thread first macro\n  //     ->\n  //   : https://clojuredocs.org/clojure.core/-%3E%3E\n  var acc = arguments[0];\n  var ast = Array.prototype.slice.call(arguments);\n  for(var i = 1; i < ast.length; i++) {\n    var arr = ast[i];\n    if (!isArray(arr)) {\n      //           ....\n      arr = [\".-\", acc, arr];\n    } else if (arr[0] === \"()\" && arr.length == 2 && (typeof(arr[1]) === \"string\" || typeof(arr[1]) === \"number\")) {\n      arr = [\".-\", acc, arr[1]];\n    } else {\n      //  \"\"      ...  thread first\n      arr.splice(1, 0, acc);\n    }\n    acc = arr;\n    // console.log(\"->\", JSON.stringify(acc));\n  }\n  return acc;\n  /// end of thread first macro\n};\nSTDLIB[\"->\"].ast = [[],{},[],1]; // mark as macro\n\n\nSTDLIB[\"->>\"] = function() {\n  // thread last macro\n  //     ->>\n  //   : https://clojuredocs.org/clojure.core/-%3E%3E\n  var acc = arguments[0];\n  var ast = Array.prototype.slice.call(arguments);\n  for(var i = 1; i < ast.length; i++) {\n    ast[i].push(acc);\n    acc = ast[i];\n    //console.log(\"->>\", JSON.stringify(acc));\n  }\n  return acc;\n  /// end of thread first macro\n};\nSTDLIB[\"->>\"].ast = [[],{},[],1]; // mark as macro\n\n\n///       LPE    ,       ->\n///        invoke -      .\n/// invoke    ->\nSTDLIB[\"invoke\"] = function() {\n  var ast = Array.prototype.slice.call(arguments);\n  ast.splice(0,0,\".\");\n  return ast;\n};\nSTDLIB[\"invoke\"].ast = [[],{},[],1]; // mark as macro\n\n\nvar minimal = [\"begin\",\n  //  new     a -  regExp   \"RegExp\"  \n  [\"def\", \"new\", [\"fn\", [\"a\", \"&\", \"b\"],\n    [\".\", \"Reflect\", [\"`\", \"construct\"], \"a\", \"b\"]]],\n  [\"def\", \"del\", [\"fn\", [\"a\", \"b\"],\n    [\".\", \"Reflect\", [\"`\", \"deleteProperty\"], \"a\", \"b\"]]],\n  [\"def\", \"map\", [\"fn\", [\"a\", \"b\"],\n    [\".\", \"b\", [\"`\", \"map\"], [\"fn\", [\"x\"], [\"a\", \"x\"]]]]],\n  [\"def\", \"list\", [\"fn\", [\"&\", \"a\"], \"a\"]],\n  [\"def\", \">=\", [\"fn\", [\"a\", \"b\"],\n    [\"if\", [\"<\", \"a\", \"b\"], false, true]]],\n  [\"def\", \">\", [\"fn\", [\"a\", \"b\"],\n    [\"if\", [\">=\", \"a\", \"b\"],\n      [\"if\", [\"=\", \"a\", \"b\"], false, true],\n      false]]],\n  [\"def\", \"<=\", [\"fn\", [\"a\", \"b\"],\n    [\"if\", [\">\", \"a\", \"b\"], false, true]]],\n\n  [\"def\", \"classOf\", [\"fn\", [\"a\"],\n    [\".\", [\".-\", [\".-\", \"Object\", [\"`\", \"prototype\"]], [\"`\", \"toString\"]],\n      [\"`\", \"call\"], \"a\"]]],\n\n  [\"def\", \"not\", [\"fn\", [\"a\"], [\"if\", \"a\", false, true]]],\n\n  [\"def\", \"null?\", [\"fn\", [\"a\"], [\"=\", null, \"a\"]]],\n  [\"def\", \"true?\", [\"fn\", [\"a\"], [\"=\", true, \"a\"]]],\n  [\"def\", \"false?\", [\"fn\", [\"a\"], [\"=\", false, \"a\"]]],\n  [\"def\", \"string?\", [\"fn\", [\"a\"],\n    [\"if\", [\"=\", \"a\", null],\n      false,\n      [\"=\", [\"`\", \"String\"],\n        [\".-\", [\".-\", \"a\", [\"`\", \"constructor\"]],\n          [\"`\", \"name\"]]]]]],\n\n  [\"def\", \"pr-str\", [\"fn\", [\"&\", \"a\"],\n    [\".\", [\"map\", [\".-\", \"JSON\", [\"`\", \"stringify\"]], \"a\"],\n      [\"`\", \"join\"], [\"`\", \" \"]]]],\n  [\"def\", \"str\", [\"fn\", [\"&\", \"a\"],\n    [\".\", [\"map\", [\"fn\", [\"x\"],\n      [\"if\", [\"string?\", \"x\"],\n        \"x\",\n        [\".\", \"JSON\", [\"`\", \"stringify\"], \"x\"]]],\n      \"a\"],\n      [\"`\", \"join\"], [\"`\", \"\"]]]],\n  [\"def\", \"prn\", [\"fn\", [\"&\", \"a\"],\n    [\"begin\",\n      [\".\", \"console\", [\"`\", \"log\"],\n          [\".\", [\"map\", [\".-\", \"JSON\", [\"`\", \"stringify\"]], \"a\"],\n        [\"`\", \"join\"], [\"`\", \" \"]]],\n      null]]],\n  [\"def\", \"println\", [\"fn\", [\"&\", \"a\"],\n    [\"begin\", [\".\", \"console\", [\"`\", \"log\"],\n      [\".\", [\"map\", [\"fn\", [\"x\"],\n        [\"if\", [\"string?\", \"x\"],\n          \"x\",\n          [\".\", \"JSON\", [\"`\", \"stringify\"], \"x\"]]],\n        \"a\"],\n        [\"`\", \"join\"], [\"`\", \" \"]]],\n      null]]],\n\n  [\"def\", \"list?\", [\"fn\", [\"a\"],\n    [\".\", \"Array\", [\"`\", \"isArray\"], \"a\"]]],\n  [\"def\", \"contains?\", [\"fn\", [\"a\", \"b\"],\n    [\".\", \"a\", [\"`\", \"hasOwnProperty\"], \"b\"]]],\n  [\"def\", \"get\", [\"fn\", [\"a\", \"b\"],\n    [\"if\", [\"contains?\", \"a\", \"b\"], [\".-\", \"a\", \"b\"], null]]],\n  [\"def\", \"set\", [\"fn\", [\"a\", \"b\", \"c\"],\n    [\"begin\", [\".-\", \"a\", \"b\", \"c\"], \"a\"]]],\n  [\"def\", \"keys\", [\"fn\", [\"a\"],\n    [\".\", \"Object\", [\"`\", \"keys\"], \"a\"]]],\n  [\"def\", \"vals\", [\"fn\", [\"a\"],\n    [\".\", \"Object\", [\"`\", \"values\"], \"a\"]]],\n\n  [\"def\", \"cons\", [\"fn\", [\"a\", \"b\"],\n    [\".\", [\"`\", []],\n      [\"`\", \"concat\"], [\"list\", \"a\"], \"b\"]]],\n  [\"def\", \"concat\", [\"fn\", [\"&\", \"a\"],\n    [\".\", [\".-\", [\"list\"], [\"`\", \"concat\"]],\n      [\"`\", \"apply\"], [\"list\"], \"a\"]]],\n  [\"def\", \"nth\", \"get\"],\n  [\"def\", \"first\", [\"fn\", [\"a\"],\n    [\"if\", [\">\", [\".-\", \"a\", [\"`\", \"length\"]], 0],\n      [\"nth\", \"a\", 0],\n      null]]],\n  [\"def\", \"last\", [\"fn\", [\"a\"],\n    [\"nth\", \"a\", [\"-\", [\".-\", \"a\", [\"`\", \"length\"]], 1]]]],\n  [\"def\", \"count\", [\"fn\", [\"a\"],\n    [\".-\", \"a\", [\"`\", \"length\"]]]],\n  [\"def\", \"empty?\", [\"fn\", [\"a\"],\n    [\"if\", [\"list?\", \"a\"],\n      [\"=\", 0, [\".-\", \"a\", [\"`\", \"length\"]]],\n      [\"=\", \"a\", null]]]],\n  [\"def\", \"slice\", [\"fn\", [\"a\", \"b\", \"&\", \"end\"],\n    [\".\", \"a\", [\"`\", \"slice\"], \"b\",\n      [\"if\", [\">\", [\".-\", \"end\", [\"`\", \"length\"]], 0],\n        [\"get\", \"end\", 0],\n        [\".-\", \"a\", [\"`\", \"length\"]]]]]],\n  [\"def\", \"rest\", [\"fn\", [\"a\"], [\"slice\", \"a\", 1]]],\n\n  [\"def\", \"apply\", [\"fn\", [\"f\", \"&\", \"b\"],\n    [\".\", \"f\", [\"`\", \"apply\"], \"f\",\n      [\"concat\", [\"slice\", \"b\", 0, -1], [\"last\", \"b\"]]]]],\n\n  [\"def\", \"and\", [\"~\", [\"fn\", [\"&\", \"xs\"],\n    [\"if\", [\"empty?\", \"xs\"],\n      true,\n      [\"if\", [\"=\", 1, [\".-\", \"xs\", [\"`\", \"length\"]]],\n        [\"first\", \"xs\"],\n        [\"list\", [\"`\", \"let\"], [\"list\", [\"`\", \"__and\"], [\"first\", \"xs\"]],\n          [\"list\", [\"`\", \"if\"], [\"`\", \"__and\"],\n            [\"concat\", [\"`\", [\"and\"]], [\"rest\", \"xs\"]],\n            [\"`\", \"__and\"]]]]]]]],\n\n  [\"def\", \"or\", [\"~\", [\"fn\", [\"&\", \"xs\"],\n    [\"if\", [\"empty?\", \"xs\"],\n      null,\n      [\"if\", [\"=\", 1, [\".-\", \"xs\", [\"`\", \"length\"]]],\n        [\"first\", \"xs\"],\n        [\"list\", [\"`\", \"let\"], [\"list\", [\"`\", \"__or\"], [\"first\", \"xs\"]],\n          [\"list\", [\"`\", \"if\"], [\"`\", \"__or\"],\n            [\"`\", \"__or\"],\n            [\"concat\", [\"`\", [\"or\"]], [\"rest\", \"xs\"]]]]]]]]],\n  null\n];\n\nEVAL(minimal, STDLIB);\n\n\nfunction macroexpand(ast, ctx, resolveString = true) {\n  while (true) {\n    if (!isArray(ast)) break;\n    if (typeof ast[0] !== \"string\") break;\n\n    const v = $var$(ctx, ast[0]);\n    if (!isFunction(v)) break;\n\n    if (!isArray(v.ast)) break;\n    if (!v.ast[3]) break;\n\n    //  ! 3-     1  push\n    ast = v.apply(v, ast.slice(1));\n  }\n  return ast;\n}\n\n\nfunction env_bind(ast, ctx, exprs) {\n  // Return new Env with symbols in ast bound to\n  // corresponding values in exprs\n  ctx = Object.create(ctx);\n  for (var i=0; i<ast.length; i++) {\n    if (ast[i] == \"&\") {\n      // variable length arguments\n      ctx[ast[i+1]] = Array.prototype.slice.call(exprs, i);\n      break;\n    } else {\n      ctx[ast[i]] = exprs[i];\n    }\n  }\n  return ctx;\n}\n\n\nfunction eval_ast(ast, ctx, resolveString = true) {\n  if (isArray(ast)) {                       // list?\n    return ast.map(e => EVAL(e, ctx, resolveString));\n  }\n\n  if (isString('string')) {\n    const value = $var$(ctx, ast);\n\n    if (value !== undefined) {                    // variable\n      return value;\n    }\n\n    // if string and not in ctx:\n    return resolveString ? ast : undefined;\n  }\n\n  return ast;\n}\n\n\nfunction EVAL(ast, ctx, resolveString = true) {\n  while (true) {\n    if (!isArray(ast)) {\n      return eval_ast(ast, ctx, resolveString);\n    }\n\n    // apply\n    ast = macroexpand(ast, ctx);\n    if (!Array.isArray(ast)) return ast;                                        // do we need eval here?\n    if (ast.length === 0) return null;                                          // [] => empty list (or, maybe return vector [])\n\n    const op = ast[0];\n\n    if (isString(op) && (op in SPECIAL_FORMS)) {\n      return SPECIAL_FORMS[op](ast.slice(1), ctx, resolveString);\n    }\n\n    if (ast[0] === \"def\") {        // update current environment\n      return (ctx[ast[1]] = EVAL(ast[2], ctx, resolveString));\n\n    } else if (ast[0] === \".-\") {  // get or set attribute\n      var el = eval_ast(ast.slice(1), ctx, resolveString);\n      var x = el[0][el[1]];\n      return 2 in el ? el[0][el[1]] = el[2] : x;\n    } else if (ast[0] == \".\") {   // call object method\n      var el = eval_ast(ast.slice(1), ctx, resolveString);\n      var x = el[0][el[1]];\n      //console.dir(el);\n      //console.dir(ast);\n      //console.log(x);\n      return x.apply(el[0], el.slice(2));\n    } else if (ast[0] == \"try\") { // try/catch\n      try {\n        return EVAL(ast[1], ctx);\n      } catch (e) {\n        return EVAL(ast[2][2], env_bind([ast[2][1]], ctx, [e]));\n      }\n\n    // } else if (ast[0] == \"if\") {  // branching conditional\n    //   ast = EVAL(ast[1], ctx) ? ast[2] : ast[3]; // TCO\n\n    } else if (ast[0] == \"fn\") {  // define new function (lambda)\n      var f = function() {\n        return EVAL(ast[2], env_bind(ast[1], ctx, arguments), resolveString);\n      }\n      f.ast = [ast[2], ctx, ast[1]]; // f.ast compresses more than f.data\n      return f;\n    } else if (ast[0] == \"||\") {  // logical or/ returns true or false\n      for (var i=1; i<ast.length; i++) {\n        if (EVAL(ast[i], ctx), resolveString) {\n          return true;\n        }\n      }\n      return false;\n    } else if (ast[0] == \"&&\") {  // logical and/ returns true or false\n      for (var i=1; i<ast.length; i++) {\n        if (!EVAL(ast[i], ctx, resolveString)) {\n          return false;\n        }\n      }\n      return true;\n\n    } else {                                                                    // invoke list form\n      var el = ast.map(ast => EVAL(ast, ctx, resolveString));\n      var f = el[0];\n      if (f.ast) {\n        ast = f.ast[0];\n        ctx = env_bind(f.ast[2], f.ast[1], el.slice(1)); // TCO\n      } else {\n        return f.apply(f, el.slice(1))\n      }\n    }\n  }\n} // EVAL\n\n\nfunction eval_context(ast, ctx) {\n  const result = EVAL(ast, [ctx, STDLIB]);\n  return result;\n}\n\n\n// Use with care\nexport function init_lisp(ctx) {\n  ctx = [ctx || {}, STDLIB];\n  return {\n    eval: (ast) => eval_context(ast, ctx),\n    val: (varName, value) => $var$(varName, value),\n  }\n}\n\n\nexport function eval_lisp(ast, ctx) {\n  const result = eval_context(ast, ctx);\n\n  if (typeof(result) == \"function\") {\n    return '[\"function\"]';\n  } else {\n    return result;\n  }\n}\n\n\nexport function evaluate(ast, ctx) {\n  return eval_lisp(ast, ctx);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lisp.js","/**\n * LuxPath expressions parser\n *\n * VERSION: 1.0.1\n * \n * DVD: added sexpr property to the token as array to keep s-expressions.\n *      arity and first, second etc will be removed\n * \n */\n\n// Parser for Simplified JavaScript written in Simplified JavaScript\n// From Top Down Operator Precedence\n// http://javascript.crockford.com/tdop/index.html\n// Douglas Crockford\n// 2010-06-26\n//////////////////////////////////////////////////\n// Later hacked to parse LPE instead of JavaScript\n// Dmitry Dorofeev\n// 2017-01-20\n\n\nimport console from './console/console';\nimport tokenize from './lpel';\n\n\n\nvar make_parse = function () {\n  var symbol_table = {};\n  var token;\n  var tokens;\n  var token_nr;\n\n  //    \n  var expr_scope = { pop: function () {}}; //      (A and B or C)\n\n  //     \n  var operator_aliases = {};\n\n  var operator_alias = function(from, to) {\n    operator_aliases[from] = to;\n  }\n\n  var itself = function () {\n    return this;\n  };\n\n  let scope = {\n    find: function (n) {\n      var e = this, o;\n      var s = Object.create(original_symbol);\n      s.nud      = itself;\n      s.led      = null;\n      s.lbp      = 0;\n      return s;\n    },\n  };\n\n  var expr_logical_scope = {\n    pop: function () {\n      expr_scope = this.parent;\n    },\n    parent: null,\n    tp: \"logical\"\n  };\n\n  var expr_lpe_scope = {\n    pop: function () {\n      expr_scope = this.parent;\n    },\n    parent: null,\n    tp: \"lpe\"\n  };\n\n  var new_expression_scope = function (tp) {\n    var s = expr_scope;\n    expr_scope = Object.create(tp == \"logical\"?expr_logical_scope:expr_lpe_scope);\n    expr_scope.parent = s;\n    return expr_scope;\n  };\n\n  var advance = function (id) {\n        var a, o, t, v;\n        if (id && token.id !== id) {\n            makeError(token, \"Got \" + token.value + \" but expected '\" + id + \"'.\");\n        }\n        if (token_nr >= tokens.length) {\n            token = symbol_table[\"(end)\"];\n            return;\n        }\n        t = tokens[token_nr];\n        token_nr += 1;\n        v = t.value;\n        a = t.type;\n        if (a === \"name\") {\n            if (expr_scope.tp == \"logical\") {\n              if (v === \"or\" || v === \"and\" || v === \"not\" || v === \"in\" || v === \"is\") {\n                a = \"operator\";\n                o = symbol_table[v];\n                if (!o) {\n                    makeError(t, \"Unknown logical operator.\");\n                }\n              } else {\n                o = scope.find(v);\n              }\n            } else {\n              o = scope.find(v);\n            }\n        } else if (a === \"operator\") {\n            o = symbol_table[v];\n            if (!o) {\n                makeError(t, \"Unknown operator.\");\n            }\n        } else if (a === \"string_double\") {\n            o = symbol_table[\"(string_literal_double)\"];\n            a = \"literal\";\n        } else if (a === \"string_single\") {\n            o = symbol_table[\"(string_literal_single)\"];\n            a = \"literal\";\n        } else if (a ===  \"number\") {\n            o = symbol_table[\"(number_literal)\"];\n            a = \"literal\";\n        } else {\n            makeError(t, \"Unexpected token.\");\n        }\n        token = Object.create(o);\n        token.from  = t.from;\n        token.to    = t.to;\n        token.value = v;\n        token.arity = a;\n        if (a == \"operator\") {\n            token.sexpr = operator_aliases[v];\n        } else {\n          token.sexpr = v; // by dima\n        }\n        return token;\n  };\n\n  var statement = function () {\n    var n = token, v;\n\n    if (n.std) {\n        advance();\n        //scope.reserve(n);\n        return n.std();\n    }\n    v = expression(0);\n    //if (!v.assignment && v.id !== \"(\") {\n    /*  if (v.id !== \"(\" && v.id !== \"name\" && v.id !== \"number\") {\n        console.log(v);\n        v.error(\"Bad expression statement.\");\n    }*/\n    //advance(\";\");\n    return v;\n  };\n\n  var statements = function () {\n    var a = [], s;\n    while (true) {\n        //console.log(token);\n        if ( token.id === \"(end)\") {\n            break;\n        } else if(token.value === ';'){\n          // skip optional ;\n           advance();\n        }\n        s = statement();\n        //console.log(\"STATEMENT \", s);\n        if (s) {\n            a.push(s);\n        }\n    }\n    return a.length === 0 ? null : a.length === 1 ? a[0]: {\"sexpr\": [\"do\"].concat(a.map(function(el){return el[\"sexpr\"];}))};\n  };\n\n  var expression = function (rbp) {\n    var left;\n    var t = token;\n    advance();\n    left = t.nud();\n    while (rbp < token.lbp) {\n      t = token;\n      advance();\n      left = t.led(left);\n    }\n    return left;\n  };\n\n  var original_symbol = {\n    nud: function () {\n      makeError(this, \"Undefined.\");\n    },\n    led: function (left) {\n      makeError(this, \"Missing operator.\");\n    }\n  };\n\n  var symbol = function (id, bp) {\n    var s = symbol_table[id];\n    bp = bp || 0;\n    if (s) {\n      if (bp >= s.lbp) {\n        s.lbp = bp;\n      }\n    } else {\n      s = Object.create(original_symbol);\n      s.id = s.value = id;\n      s.lbp = bp;\n      symbol_table[id] = s;\n    }\n    operator_alias(id, id);\n    return s;\n  };\n\n  var infix = function (id, bp, led) {\n    var s = symbol(id, bp);\n    s.led = led || function (left) {\n      this.first = left;\n      var right = expression(bp);\n      this.second = right;\n      this.arity = \"binary\";\n      this.sexpr = [this.sexpr, left.sexpr, right.sexpr];\n      return this;\n    };\n    return s;\n  };\n\n  var infixr = function (id, bp, led) {\n    var s = symbol(id, bp);\n    s.led = led || function (left) {\n      this.first = left;\n      var right = expression(bp - 1);\n      this.second = right;\n      this.arity = \"binary\";\n      this.sexpr = [this.sexpr, left.sexpr, right.sexpr];\n      return this;\n    };\n    return s;\n  };\n\n  var prefix = function (id, nud) {\n    var s = symbol(id);\n    s.nud = nud || function () {\n      // scope.reserve(this);\n      var expr = expression(70);\n      this.first = expr;\n      this.arity = \"unary\";\n      this.sexpr = [this.sexpr, expr.sexpr];\n      return this;\n    };\n    return s;\n  };\n\n  symbol(\"(end)\");\n  symbol(\"(name)\");\n  symbol(\"(null)\");\n  symbol(\":\");\n  symbol(\";\");\n  symbol(\")\");\n  symbol(\"]\");\n  symbol(\"}\");\n\n  // allow to skip values in function calls....\n  var comma = symbol(\",\");\n\n  symbol(\"(string_literal_double)\").nud = function() {\n    this.first = '\"';\n    this.arity = \"unary\";\n    this.sexpr = ['\"', this.sexpr];\n    return this;\n  };\n\n  symbol(\"(string_literal_single)\").nud = function() {\n    this.first = \"'\";\n    this.arity = \"unary\";\n    this.sexpr = [\"'\", this.sexpr];\n    return this;\n  };\n\n  symbol(\"(number_literal)\").nud = itself;\n\n  infix(\"?\", 20, function (left) {\n    // FIXME TODO - need sexpr !!!\n    this.first = left;\n    this.second = expression(0);\n    advance(\":\");\n    this.third = expression(0);\n    this.arity = \"ternary\";\n    return this;\n  });\n\n  infixr(\"&&\", 30);\n  infixr(\"\", 30);\n  operator_alias(\"&&\",\"and\");\n  operator_alias(\"\",\"and\");\n\n  infixr(\"||\", 30);\n  infixr(\"\", 30);\n\n  operator_alias(\"||\",\"or\");\n  operator_alias(\"\",\"or\");\n\n  /* will be used in logical scope */\n  infixr(\"and\", 30);\n  infixr(\"or\", 30);\n  // required for SQL logical scope where a in (1,2,3)\n  infixr(\"in\", 30);\n  infixr(\"is\", 30);\n  prefix(\"not\");\n\n  // for SQL types: '10'::BIGINT\n  infixr(\"::\", 90);\n\n  // for SQL as\n  infixr(\":\", 80);\n\n  infixr('~', 40);\n  infixr('!~', 40);\n  infixr('=', 40);\n  infixr('', 40);\n  operator_alias('', '!='); // from to canonical form;\n\n  infixr('==', 40);\n  infixr('!==', 40);\n  infixr('!=', 40);\n  infixr('<', 40);\n  infixr('<=', 40);\n  infixr('', 40);\n  operator_alias('', '<=');\n\n  infixr(\">\", 40);\n  infixr(\">=\", 40);\n  infixr(\"\", 40);\n  operator_alias(\"\",\">=\");\n  infixr(\"<>\", 40);\n\n  infix(\"+\", 50);\n  infix(\"-\", 50);\n\n  infix(\"*\", 60);\n  infix(\"/\", 60);\n\n  infix(\"(\", 80, function (left) {\n    var a = [];\n    if (left.id === \"[\") {\n          // FIXME TODO\n          this.arity = \"ternary\";\n          this.first = left.first;\n          this.second = left.second;\n          this.third = a;\n    } else {\n          this.arity = \"binary\";\n          this.first = left;\n          this.value = \"(\"; // it was '(' by dima\n          this.second = a;\n          if ((left.arity !== \"unary\" || left.id !== \"function\") &&\n              left.arity !== \"name\" && left.id !== \"(\" &&\n              left.id !== \"&&\" && left.id !== \"||\" && left.id !== \"?\") {\n            makeError(left, \"Expected a variable name.\");\n          }\n    }\n    // dima support for missed function arguments...\n    if (token.id !== \")\") {\n      if (false && left.value == \"where\") {\n        //    where - logical expression.\n        //       , and, or, not   ...\n        new_expression_scope(\"logical\");\n        var e = expression(0);\n        expr_scope.pop();\n        a.push(e);\n      } else {\n        new_expression_scope(\"lpe\");\n        while (true) {\n          // console.log(\">\" + token.arity + \" NAME:\" + left.value);\n          if (token.id === ',') {\n            a.push({\n              value: null,\n              arity: \"literal\"\n            });\n            advance();\n          } else if (token.id === ')') {\n            a.push({\n              value: null,\n              arity: \"literal\"\n            });\n            break;\n          } else {\n            new_expression_scope(\"logical\");\n            var e = expression(0);\n            expr_scope.pop();\n            // var e = statements();\n            a.push(e);\n            if (token.id !== \",\") {\n              break;\n            }\n            advance(\",\");\n          }\n        }\n        expr_scope.pop();\n      }\n    }\n\n    this.sexpr = [this.first.value].concat(a.map(function(el){return el.sexpr}));\n    advance(\")\");\n    return this;\n  });\n\n\n  function lift_funseq(node) {\n    if (node.value === \"->\") {\n      return lift_funseq(node.first).concat(lift_funseq(node.second));\n    } else if (node.value === \"()\") {\n      if (node.first.value === \"->\"){\n        //        \"->\",    \n        // if (true).(frst().second()) === if(true) => [->> [first] [second]]   , \n        //   seq     \n          return [[\"->\"].concat(lift_funseq(node.first.first)).concat(lift_funseq(node.first.second))];\n      } else {\n          return lift_funseq(node.first);\n      }\n    } else {\n      return [node.sexpr];\n    }\n  }\n\n  function lift_funseq_2(node) {\n    if (node.value === \"->>\") {\n      return lift_funseq(node.first).concat(lift_funseq(node.second));\n    } else if (node.value === \"()\") {\n      if (node.first.value === \"->>\"){\n        //        \"->\",    \n        // if (true).(frst().second()) === if(true) => [->> [first] [second]]   , \n        //   seq     \n          return [[\"->>\"].concat(lift_funseq(node.first.first)).concat(lift_funseq(node.first.second))];\n      } else {\n          return lift_funseq(node.first);\n      }\n    } else {\n      return [node.sexpr];\n    }\n  }\n\n  infix(\".\", 70, function (left) {\n    this.first = left;\n    // this.second = expression(0);\n    this.second = expression(70);\n    this.arity = \"binary\";\n    this.value = \"->\";\n    this.sexpr = [\"->\"].concat(lift_funseq(this));\n    return this;\n  });\n\n  infix(\"..\", 70, function (left) {\n    this.first = left;\n    // this.second = expression(0);\n    this.second = expression(70);\n    this.arity = \"binary\";\n    this.value = \"->>\";\n    this.sexpr = [\"->>\"].concat(lift_funseq_2(this));\n    return this;\n  });\n\n  // WARNING HACK FIXME DIMA -    order_by(+a)\n  //    /table  +table  htSQL\n  prefix(\"+\");\n\n  prefix(\"!\");\n  prefix(\"not\"); // will be used in logical scope\n  prefix(\"\");\n  operator_alias(\"!\", \"not\");\n  operator_alias(\"\", \"not\");\n\n  // trying to optimize, when we have negated -number\n  prefix(\"-\");\n\n  prefix(\".\",function () {\n    var v = expression(70);\n    if (v.value !== \"(\") {\n      makeError(v, \"Only functions may have dot (.) unary operator.\");\n    }\n    // this.first = v;\n    // this.arity = \"unary\";\n    // return this;\n    // skip unary dot !!!\n    return v;\n  });\n\n  prefix(\"(\", function () {\n    var e = expression(0);\n    if (expr_scope.tp == \"logical\") {\n      // we should remember all brackets to restore original user expression\n      e.sexpr = [\"()\", e.sexpr];\n    } else {\n      if (e.value === \"->\") {\n        //       LPE ,   ,  push \"()\"   AST \n        e = {\n          first: e,\n          value: \"()\",\n          arity: \"unary\",\n          sexpr: [\"()\", e.sexpr]\n        };\n      }\n    }\n    advance(\")\");\n    return e;\n  });\n\n  prefix(\"[\", function () {\n    var a = [];\n    if (token.id !== \"]\") {\n      while (true) {\n        a.push(expression(0));\n        // a.push(statements());\n        if (token.id !== \",\") {\n          break;\n        }\n        advance(\",\");\n      }\n    }\n    advance(\"]\");\n    this.first = a;\n    this.arity = \"unary\";\n    this.sexpr = [\"[\"].concat(a.map((el) => el.sexpr));\n    return this;\n  });\n\n  return function (source) {\n    tokens = tokenize(source, '=<>!+-*&|/%^:.', '=<>&|:.');\n    token_nr = 0;\n    advance();\n    var s = statements();\n    // var s = expression(0);\n    advance(\"(end)\");\n    return s;\n  };\n};\n\n\n// Transform a token object into an exception object and throw it.\nexport function LPESyntaxError(message) {\n  this.constructor.prototype.__proto__ = Error.prototype;\n  Error.call(this);\n  Error.captureStackTrace(this, this.constructor);\n  this.name = this.constructor.name;\n  this.message = message;\n  // this.stack = (new Error()).stack;\n}\n\n\nfunction makeError(t, message) {\n  t.message = message;\n\n  const errorDescription = JSON.stringify(\n    t, \n    ['name', 'message', 'from', 'to', 'key', 'value', 'arity', 'first', 'second', 'third', 'fourth'], \n    4);\n\n  throw new LPESyntaxError(errorDescription);\n}\n\n\nconst parser = make_parse();\n// console.log('LPE Parser initialized')\n\n\nexport function parse(str) {\n  try {\n    const parseResult = parser(str);   // from, to, value, arity, sexpr\n    return parseResult.sexpr;\n\n  } catch(err) {\n    console.error(\"Error\", err.message);\n    console.error(\"Error\", err.stack);\n    throw err;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lpep.js","/**\n Copyright (c) 2019 Luxms Inc.\n\n Permission is hereby granted, free of charge, to any person obtaining\n a copy of this software and associated documentation files (the \"Software\"),\n to deal in the Software without restriction, including without limitation\n the rights to use, copy, modify, merge, publish, distribute, sublicense,\n and/or sell copies of the Software, and to permit persons to whom the Software\n is furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in\n all copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\n IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\n CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\n TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE\n OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport console from './console/console';\nimport {parse} from './lpep';\nimport {db_quote_literal} from './utils/utils';\nimport {eval_lisp} from './lisp';\n\n\n/*\nwhere -    WHERE,   .     WHERE TRUE\nfilter -      \n*/\n\nexport function sql_where_context(_vars) {\n  var _context = _vars;\n\n  var try_to_quote_column = function(colname) {\n    if (typeof _vars['_columns'] == 'object') {\n      var h = _vars['_columns'][colname];\n      if (typeof h == \"object\") {\n        h = h['name'].toString();\n        // console.log(\"-: try_to_quote_column \" + JSON.stringify(h));\n        // console.log(\"-: try_to_quote_column \" + (typeof h));\n        if (h.length > 0) {\n          // return '\"' + h + '\"';\n          return h;\n        }\n      }\n    }\n    return colname.toString();\n  };\n\n  var try_to_quote_order_by_column = function(colname) {\n    if (typeof _vars['_columns'] == 'object') {\n      var h = _vars['_columns'][colname];\n      if (typeof h == \"object\") {\n        var o = h['order'];\n        if (o === undefined) {\n          o = h['name'];\n        }\n        console.log(\"-: try_to_quote_order_by_column \" + JSON.stringify(o));\n        console.log(\"-: try_to_quote_order_by_column \" + (typeof o));\n        if (o !== undefined && o.length > 0) {\n          //return '\"' + o.toString() + '\"';\n          return o.toString();\n        }\n      }\n    }\n    return colname.toString();\n  };\n\n  var resolve_literal = function(lit) {\n    console.log('LITERAL ', lit, '  CONTEXT:', _vars[lit]);\n    if (_vars[lit] == undefined ) {\n      return try_to_quote_column(lit);\n    } else {\n      //     !    - \n      return eval_lisp(lit, _vars);\n    }\n  };\n\n  var resolve_order_by_literal = function(lit) {\n    console.log('OB LITERAL ', lit, ' CONTEXT:', _vars[lit]);\n\n    if (_vars[lit] === undefined ) {\n      return try_to_quote_order_by_column(lit);\n    } else {\n      //     !    - \n      return eval_lisp(lit, _vars);\n    }\n  };\n\n  /*     ,   SQL */\n  _context['order_by'] = function () {\n    var ret = [];\n    var ctx = {};\n    for(var key in _vars) ctx[key] = _vars[key];\n    //   order_by   eval_lisp,       -a,  \n    //    +  -        .\n    //       where -  eval_lisp    ...\n    ctx['+'] = function (a) {\n      if (a instanceof Array) {\n        throw(\"recursive +..-\");\n      } else {\n        return resolve_order_by_literal(a);\n      }\n    }\n    ctx['+'].ast = [[],{},[],1]; // mark as macro\n\n    ctx['-'] = function (a) {\n      //console.log(\"-: call \" + JSON.stringify(a));\n      if (a instanceof Array) {\n        throw(\"recursive -..+\");\n      } else {\n        return resolve_order_by_literal(a) + ' ' + 'DESC';\n      }\n    }\n    ctx['-'].ast = [[],{},[],1]; // mark as macro\n\n    for(var i = 0; i < arguments.length; i++) {\n        if (arguments[i] instanceof Array) {\n          ret.push(eval_lisp(arguments[i], ctx) );\n        } else {\n          // try_to_quote_column        !!!\n          ret.push(resolve_order_by_literal(arguments[i].toString()));\n        }\n    }\n\n    if (ret.length > 0) {\n      return 'ORDER BY ' + ret.join(',');\n    } else {\n      return '';\n    }\n  };\n\n  _context['order_by'].ast = [[],{},[],1]; // mark as macro\n\n\n  _context['pg_interval'] = function (cnt, period_type) {\n    var pt;\n    if (period_type instanceof Object) {\n      pt = period_type[\"unit\"];\n    } else {\n      pt = period_type;\n    }\n\n    if (/^\\d+$/.test(pt)) {\n      // all numbers....\n      switch(pt){\n        case 1: pt = 'second'; break;\n        case 2: pt = 'minute'; break;\n        case 3: pt = 'hour'; break;\n        case 4: pt = 'day'; break;\n        case 5: pt = 'week'; break;\n        case 6: pt = 'month'; break;\n        case 7: pt = 'quarter'; break;\n        case 8: pt = 'year'; break;\n        default: throw(\"wrong period type:\" + pt)\n      }\n    } else {\n      var reg = new RegExp(\"['\\\"]+\",\"g\");\n      pt = pt.replace(reg,\"\");\n    }\n\n    var regExp = new RegExp(/quarter/, \"i\");\n    if (regExp.test(pt)){\n      return \"'\" + (cnt * 3) + \" month'::interval\" ;\n    }\n    return \"'\" + cnt + \" \" + pt + \"'::interval\";\n  }\n\n  // filter\n  _context['filter'] = function () {\n      var ctx = {};\n      for(var key in _vars) ctx[key] = _vars[key];\n\n      var prnt = function(ar) {\n        if (ar instanceof Array) {\n          if (  ar[0] === '$' ||  \n                ar[0] === '\"' || \n                ar[0] === \"'\" || \n                ar[0] === \"[\" || \n                ar[0] === 'parse_kv' || \n                ar[0] === \"=\" ||\n                ar[0] === \"pg_interval\") {\n            return eval_lisp(ar, ctx);\n          } else {\n              if (ar.length == 2) {\n                // unary\n                if (ar[0] == \"not\") {\n                  return ar[0] + ' ' + prnt(ar[1]);\n                } else if (ar[0] == \"()\") {\n                  return \"(\" + prnt(ar[1]) + \")\";\n                } else if (ar[0].match(/^[^\\w]+$/)){\n                  return ar[0] + prnt(ar[1]);\n                } else {\n                  return prnt(ar[0]) + \"(\" + prnt(ar[1]) + \")\";\n                }\n              } else if (ar.length == 3) {\n                if (ar[0] == \"->\") {\n                  //  LPE  ,         ->\n                  //          < >.< >\n                  //return '\"' + ar[1]+ '\".\"' + ar[2] + '\"';\n                  return ar[1] + '.' + ar[2];\n                } else if (ar[0] == \"and\" || ar[0] == \"or\" || ar[0] == \"ilike\" || ar[0] == \"like\" || \n                           ar[0] == \"in\" || ar[0] == \"is\" || ar[0].match(/^[^\\w]+$/)) {\n                  //      \n                  return prnt(ar[1]) + ' ' + ar[0] + ' ' + prnt(ar[2]);\n                } else {\n                  return ar[0] + '(' + prnt(ar[1]) + ',' + prnt(ar[2]) + ')';\n                }\n              } else {\n                //      - \n                return ar[0] + '(' + ar.slice(1).map(\n                  function(argel){return prnt(argel)}\n                ).join(',') + ')';\n              }\n            }\n        } else {\n            return ar;\n        }\n      };\n\n      ctx['\"'] = function (el) {\n        return '\"' + el.toString() + '\"';\n      }\n    \n      ctx[\"'\"] = function (el) {\n        return \"'\" + el.toString() + \"'\";\n      }\n    \n      ctx[\"[\"] = function (el) {\n        return \"[\" + Array.prototype.slice.call(arguments).join(',') + \"]\";\n      }\n\n      ctx['='] = function (l,r) {\n        if (r instanceof Array && r[0] == 'vector') {\n          return prnt(l) + \" in (\" + r.slice(1).map(function(el){return prnt(el)}).join(',') + \")\";\n        }\n        return prnt(l) + \" = \" + prnt(r);\n      }\n      ctx['='].ast = [[],{},[],1]; // mark as macro\n\n      // $(name) will quote text elements !!! suitable for generating things like WHERE title in ('a','b','c')\n      // also, we should evaluate expression, if any.\n      ctx['$'] = function(inexpr) {\n        var expr = eval_lisp(inexpr, _context); // evaluate in a normal LISP context without vars, not in WHERE context\n        if (expr instanceof Array) {\n          // try to print using quotes, use plv8 !!!\n          return expr.map(function(el){\n              if (typeof(el)===\"string\") {\n                return db_quote_literal(el);\n              } else if (typeof(el) === \"number\") {\n                return el;\n              } else {\n                return db_quote_literal(JSON.stringify(el));\n              }\n            }).join(',');\n        }\n        return db_quote_literal(expr);\n      }\n      ctx['$'].ast = [[],{},[],1]; // mark as macro\n\n      //              .\n      ctx['parse_kv'] = function(expr) {\n        if (expr instanceof Array) {\n          if (expr[0] === '->') {\n            var sql = 'select \"' + expr[2]+ '\" from \"'+ expr[1] +'\" where id = $1::INT';\n            var id_val = resolve_literal(expr[1].replace(/.$/,\"_id\"));\n\n            //console.log('SQL: ', sql, \" val:\", id_val);\n\n            var res_json = plv8.execute(sql, [ id_val ] );\n            //var res_json = [{\"src_id\":\"$a::$b:\"}];\n            var frst = res_json[0];\n\n            //console.log('SQL RES: ', frst);\n\n            if (frst !== undefined && frst[expr[2]] !== null && frst[expr[2]].length > 0) {\n                var axis_condition = function(e){\n                  var result = e.split(':').map(function(e2){\n                      e2 = e2.replace(/\\'/g , \"''\"); //' be safe\n                      return (e2.indexOf('$') == 0 ? ' AND '+e2.substr(1)+'=' : \"'\"+e2+\"'\");\n                  }).join('').substr(5);\n                  return result;\n                };\n\n                var result =  axis_condition(frst[expr[2]]);\n                if(result === undefined || result.length == 0) return '(/*kv not resolved*/ 0=1)';\n                return result;\n            }\n          }\n        }\n        return '(/*parse_kv EMPTY*/ 1=0)';\n      };\n      ctx['parse_kv'].ast = [[],{},[],1]; // mark as macro\n\n      var ret = [];\n      //console.log(\"where IN: \", JSON.stringify(Array.prototype.slice.call(arguments)));\n\n      var fts = _vars['fts'];\n      var tree = arguments;\n\n      if ( fts !== undefined && fts.length > 0) {\n        fts = fts.replace(/\\'/g , \"''\"); //' be safe\n        // Full Text Search based on column_list\n        if (typeof _vars['_columns'] == 'object') {\n\n          //console.log(\"FTS: \",  JSON.stringify(fts));\n\n          var ilike = Object.values(_vars['_columns']).map(function(col){\n            col[\"search\"] !== undefined\n            ? [\"ilike\", col[\"search\"], [\"str\", '%' + fts + '%']]\n            : null\n            }).reduce(function(ac, el) {el == null ? ac : ['or',ac,el]});\n\n          //console.log( \"FTS PARSED: \",  JSON.stringify(ilike));\n\n          if (ilike !== undefined && ilike.length > 0) {\n            //   AND   \n            tree = [[\"and\",tree[0],['()',ilike]]];\n          }\n        }\n      }\n\n      for(var i = 0; i < tree.length; i++) {\n          // console.log(\"array \", JSON.stringify(Array.prototype.slice.call(tree[i])));\n          ret.push(prnt( tree[i], ctx));\n      }\n\n      var r = ret[0]; //        !!!\n      if (r == undefined) {\n        r = '';\n      }\n      return r;\n    };\n    _context['filter'].ast = [[],{},[],1]; // mark as macro\n\n\n    // where - we should not eval arguments, so we must mark where as macro!!!\n    _context['where'] = function () {\n      // we should always get ONE argument, for example: [\"=\",[\"$\",[\"->\",\"period\",\"title\"]],3]\n      // BUT if we get two, or more arguments, we eval them one by one, AND combine later with AND operand, skipping empty results...\n      var tree = arguments;\n      var ret = [];\n      for(var i = 0; i < tree.length; i++) {\n        // console.log(\"array \", JSON.stringify(Array.prototype.slice.call(tree[i])));\n        var r = eval_lisp([\"filter\", tree[i]], _context); // r should be string\n        if (r.length > 0) {\n          ret.push(r);\n        }\n      }\n\n      if (ret.length > 0) {\n        if (ret.length > 1) {\n          return 'WHERE (' + ret.join(') AND (') + ')'; \n        } else {\n          return 'WHERE ' + ret[0]; \n        }\n      } else {\n        return 'WHERE TRUE';\n      }\n    };\n    _context['where'].ast = [[],{},[],1]; // mark as macro\n\n  return _context;\n}\n\n\n\n\n\n\n\n\n\nexport function eval_sql_where(_expr, _vars) {\n  if (typeof _vars === 'string') _vars = JSON.parse(_vars);\n\n  var sexpr = parse(_expr);\n\n\n  console.log('sql_where parse: ', JSON.stringify(sexpr));\n\n  if ((sexpr instanceof Array) &&\n     ((sexpr[0]==='filter' && (sexpr.length <=2)) || (sexpr[0]==='order_by') || (sexpr[0]==='if') || (sexpr[0]==='where') )) {\n    // ok\n  } else {\n    throw(\"only single where() or order_by() could be evaluated.\")\n  }\n\n\n  var _context = sql_where_context(_vars);\n\n  var ret = eval_lisp(sexpr, _context);\n\n  // console.log('ret: ',  JSON.stringify(ret));\n  return ret;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/sql_where.js","/**\n    Copyright (c) 2019 Luxms Inc.\n\n    Permission is hereby granted, free of charge, to any person obtaining\n    a copy of this software and associated documentation files (the \"Software\"),\n    to deal in the Software without restriction, including without limitation\n    the rights to use, copy, modify, merge, publish, distribute, sublicense,\n    and/or sell copies of the Software, and to permit persons to whom the Software\n    is furnished to do so, subject to the following conditions:\n\n    The above copyright notice and this permission notice shall be included in\n    all copies or substantial portions of the Software.\n\n    THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n    EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n    OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\n    IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\n    CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\n    TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE\n    OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\n\nimport console from './console/console';\nimport {eval_lisp} from './lisp';\nimport {sql_where_context} from './sql_where';\nimport {parse} from './lpep';\n\n// polyfill = remove in 2020 !!!\n\nif (!Array.prototype.find) {\n  Array.prototype.find = function(predicate) {\n    if (this == null) {\n      throw new TypeError('Array.prototype.find called on null or undefined');\n    }\n    if (typeof predicate !== 'function') {\n      throw new TypeError('predicate must be a function');\n    }\n    var list = Object(this);\n    var length = list.length >>> 0;\n    var thisArg = arguments[1];\n    var value;\n\n    for (var i = 0; i < length; i++) {\n      value = list[i];\n      if (predicate.call(thisArg, value, i, list)) {\n        return value;\n      }\n    }\n    return undefined;\n  };\n}\n\n\nexport function sql_context(_vars) {\n  var _context = sql_where_context(_vars);\n\n  /*     ,   SQL */\n  _context['sql'] = function() {\n    var q; // resulting sql\n    var args = Array.prototype.slice.call(arguments);\n    console.log('SQL IN: ', args);\n\n    var find_part = function(p) {\n      return args.find((el) => p == el[0]);\n    };\n\n    var sel = find_part('select');\n    console.log('FOUND select: ', sel);\n    q = eval_lisp(sel, _context);\n\n    var from = find_part('from');\n    console.log('FOUND from: ', from);\n    q = q + ' ' + eval_lisp(from, _context);\n\n    var where = find_part('where');\n    console.log(\"FOUND where: \", where);\n    if (where instanceof Array && where.length > 1) {\n      q = q + ' ' + eval_lisp(where, _context );\n    }\n\n    var srt = find_part('sort');\n    console.log('FOUND sort: ', srt);\n    if (srt instanceof Array && srt.length > 1) {\n      q = q + ' ' + eval_lisp( srt, _context );\n    }\n\n    return q;\n  };\n  _context['sql'].ast = [[],{},[],1]; // mark as macro\n\n  function prnt(a) {\n    console.log('prnt IN: ', a);\n    if (a instanceof Array){\n      if (a.length > 0) {\n        if (a[0] === '::' && a.length == 3) {\n          return a[1] + '::' + a[2];\n        } else if (a[0] === ':') {\n          return prnt(a[1]) + ' as \"' + a[2].replace(/\"/,'\\\\\"') + '\"';\n        } else {\n          return a[0] + '(' + a.slice(1).map(\n            function(argel) { return prnt(argel) }\n          ).join(',') + ')';\n        }\n      } else {\n        return '';\n      }\n    } else {\n      return a;\n    }\n  }\n\n    //   \n  _context['select'] = function() {\n    var a = Array.prototype.slice.call(arguments);\n    console.log(\"select IN: \",  JSON.stringify(a));\n    if (a.length < 1) {\n      return \"SELECT *\";\n    } else {\n      return \"SELECT \" + a.map(prnt).join(',');\n    }\n  }\n  _context['select'].ast = [[],{},[],1]; // mark as macro\n\n  _context['from'] = function() {\n    var a = Array.prototype.slice.call(arguments);\n    console.log('from IN: ', a);\n    if (a.length < 1) {\n      return \"\";\n    } else {\n      return \"FROM \" + a.map(prnt).join(',');\n    }\n  }\n  _context['from'].ast = [[],{},[],1]; // mark as macro\n\n  return _context;\n}\n\n\n/*\n  !!!    ,   htSQL.  +table(col1,col2).where(col1>3)\n ,   ?    ,        +sch.table(col1,col2)\n ....\n\nselect lpe.parse_sql_expr($$metrics(id).where(id='abcd')$$);\n\n\n htSQL:\n/course.filter(credits<3).select(department_code, no, title)\n/course.sort(credits-).limit(10){department_code, no, credits}\n/course.limit(10).sort(credits-){department_code, no, credits}\n\n ,         .  LuxPath  \n htSQL select    {}    +_(...)\n   +  /    htSQL    ,      !!!\n\n*/\n\nexport function parse_sql_expr(_expr, _vars) {\n  var ctx = sql_context(_vars);\n  var _context = ctx;\n  // for(var key in _vars) _context[key] = _vars[key];\n\n  _context['->'] = function() {\n    var ret = [];\n\n    for (var i = 0; i < arguments.length; i++) {\n      ret.push(eval_lisp( arguments[i], _context));\n    }\n\n    return ret.join(',');\n  }\n  _context['->'].ast = [[],{},[],1]; // mark as macro\n\n  var sexpr = parse(_expr);\n  console.log(\"IN: \", sexpr);\n\n  /*\n  if (ctx.hasOwnProperty('where')){\n    console.log('W O W');\n  }\n  */\n\n  //      ->,     ->  c   \n  //      .from()\n  if (sexpr[0] !== '->') {\n    sexpr = ['->',sexpr];\n  }\n\n  //           .\n  //       : (seq sql(select() from()) sql(...) sql(...) )\n  // [\"seq\",[\"metrics\",\"a\",\"d\",[\"max\",\"c\"]],[\"where\"]]\n  // [\"seq\",[\"+\",[\"metrics\",\"a\",\"d\",[\"max\",\"c\"]]],[\"where\"]]\n\n  /*    IN:\n    metrics(a,d,max(c)).where(a>1 and i < 4).periods.where(a>4)\n    [\"seq\",[\"metrics\",\"a\",\"d\",[\"max\",\"c\"]],[\"where\",[\"and\",[\">\",\"a\",\"1\"],[\"<\",\"i\",\"4\"]]],\"periods\",[\"where\",[\">\",\"a\",\"4\"]]]\n    [\"seq\",[\"sql\",[\"select\",\"a\",\"d\",[\"max\",\"c\"]],[\"from\",\"metrics\"],[\"filter\",[\"and\",[\">\",\"a\",\"1\"],[\"<\",\"i\",\"4\"]]]],[\"sql\",[\"select\"],[\"from\",\"periods\"],[\"filter\",[\">\",\"a\",\"4\"]]]]\n  */\n\n  var sql = ['sql'];\n  var do_select_from = function(sel) {\n    if (!(sel instanceof Array)) {\n      sel = [sel];\n    }\n    var fr = sel[0];\n    var p = false;\n    if (fr != 'where' && fr != 'select' && fr != 'sort' && fr != 'filter' && fr != 'from') {\n      sel[0] = 'select';\n      p = true;\n    }\n    sql.push(sel);\n    if (p) {\n      sql.push([\"from\",fr]);\n    }\n    console.log(\"parse do_select_from: \", sql);\n  };\n\n  for (var i=1; i<sexpr.length; i++){\n    var expr = sexpr[i];\n    if (expr instanceof Array) {\n      // expr: [\"metrics\",\"a\",\"d\",[\"max\",\"c\"]]\n      if (expr[0] === 'order_by') {expr[0]='sort'};\n      if (expr[0] === 'where') {expr[0]='where'};\n      if ( expr[0] === '+' ){\n        // expr: [\"+\",[\"metrics\",\"a\",\"d\",[\"max\",\"c\"]]]\n        do_select_from(expr[1]);\n      } else if (_context[expr[0].toString()] === undefined) {\n        //   ...       ,\n        //   \n        // expr: [\"metrics\",\"a\",\"d\",[\"max\",\"c\"]]\n        do_select_from(expr);\n      } else {\n        sql.push(sexpr[i]);\n      }\n    } else if (_context[expr.toString()] === undefined) {\n      //   =  ...\n      // expr: \"metrics\"\n      do_select_from(expr);\n    } else {\n      throw('unexpected call: ' + JSON.stringify(expr));\n    }\n  }\n\n  console.log('parse: ', sql);\n\n  var ret = eval_lisp(sql, _context);\n  // console.log(\"parse: \", ret);\n\n  return ret;\n}\n\n\n\nexport function parse_sql_apidb_expr(_expr, _vars, _forced_table, _forced_where) {\n  var ctx = sql_context(_vars);\n  var _context = ctx;\n  // for(var key in _vars) _context[key] = _vars[key];\n\n  var sexpr = parse(_expr);\n  console.log(\"DBAPI IN: \", sexpr);\n\n  /*\n  if (ctx.hasOwnProperty('where')){\n    console.log('W O W');\n  }\n  */\n\n\n  //           .\n  //          sql()   select().from().where()\n  //  \n  // select(a,b) === select(a).select(b)\n  // order_by(a,b) === order_by(a).order_by(b)\n  // where(a>1).where(b<1) === where(a>1 and b<1)\n  // from(a).from(b).from(c) === from(c)\n  //      from,     !!!!\n\n  var sql = ['sql']; // wrapped by sql call...\n  var cache = {\"where\":[], \"select\":[], \"order_by\":[],\"from\":[]};\n  for (var i=1; i<sexpr.length; i++){\n    var expr = sexpr[i];\n    if (expr instanceof Array) {\n      var fr = expr[0];\n      if (fr != 'where' && fr != 'select' && fr != 'order_by' && fr != 'from' && fr != ':') {\n        throw('unexpected func: ' + JSON.stringify(fr));\n      }\n      // have no idea how to support aliases for selects...\n      if (fr === ':' && expr[1][0] === 'select') {\n        cache[\"select\"].push(expr[1]);\n      } else {\n        cache[fr].push(expr);\n      }\n    } else {\n      throw('unexpected literal: ' + JSON.stringify(expr));\n    }\n  }\n\n  if (_forced_table !== undefined) {\n    cache[fr].push([\"from\", _forced_table]);\n  }\n\n  var args = cache[\"select\"].map(ar => ar.slice(1));\n  var sel = [].concat.apply([\"select\"], args); //flat\n  sql.push(sel);\n\n  sql.push( cache[\"from\"].pop() );\n\n  args = cache[\"where\"].map(ar => ar.slice(1));\n  args = [].concat.apply([], args); //flat\n\n  var w = [\"()\", args[0]];\n  if (args.length > 1) {\n    for (var i=1; i<args.length; i++){\n      w = [\"and\", w, [\"()\", args[i]]];\n    }\n  }\n\n  sql.push([\"where\", w]);\n\n  console.log(\"WHERE\", JSON.stringify(w));\n\n  console.log('DBAPI parse: ', sql);\n\n  var ret = eval_lisp(sql, _context);\n\n  return ret;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/sql_context.js","import console from './console/console';\nimport {parse, LPESyntaxError} from './lpep';\nimport {eval_lisp, evaluate} from './lisp';\nimport {sql_where_context, eval_sql_where} from './sql_where';\nimport {sql_context, parse_sql_expr, parse_sql_apidb_expr} from './sql_context';\n\n\nexport {\n  parse,\n  LPESyntaxError,\n  eval_sql_where,\n  parse_sql_expr,\n  parse_sql_apidb_expr,\n  evaluate,                         // deprecated\n  eval_lisp,\n};\n\n\n\n// test:\n// var ast = parse('2+2*2');\n// console.log(ast);\n// var res = evaluate(ast, []);\n// console.log(res);\n\n// test:\n// var result = eval_sql_where(\"where(id=[1,2,3,4] and metric.tree_level(id) = 3 and max(id)=now() and $metric_id = 3)\", {\"$metric_id\":\"COOL\",\"id\":\"ID\"});\n// console.log(result);\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","\n// http://javascript.crockford.com/tdop/tdop.html\n\n// 2010-02-23\n\n// (c) 2006 Douglas Crockford\n\n// Produce an array of simple token objects from a string.\n// A simple token object contains these members:\n//      type: 'name', 'string', 'number', 'operator'\n//      value: string or number value of the token\n//      from: index of first character of the token\n//      to: index of the last character + 1\n\n// Comments of the // type are ignored.\n\n// Operators are by default single characters. Multicharacter\n// operators can be made by supplying a string of prefix and\n// suffix characters.\n// characters. For example,\n//      '<>+-&', '=>&:'\n// will match any of these:\n//      <=  >>  >>>  <>  >=  +: -: &: &&: &&\n\nimport console from './console/console';\n\nconst isDigit = (c) => c >= '0' && c <= '9';\n\nexport default function tokenize(s, prefix = '<>+-&', suffix = '=>&:') {\n  let c;                      // The current character.\n  let from;                   // The index of the start of the token.\n  let i = 0;                  // The index of the current character.\n  let length = s.length;\n  let n;                      // The number value.\n  let q;                      // The quote character.\n  let str;                    // The string value.\n  let result = [];            // An array to hold the results.\n  const make = (type, value) => ({type, value, from, to: i});                   // Make a token object.\n\n  // If the source string is empty, return nothing.\n  if (!s) {\n    return [];\n  }\n\n  // Loop through this text, one character at a time.\n  c = s.charAt(i);\n  while (c) {\n    from = i;\n\n    // Ignore whitespace.\n    if (c <= ' ') {\n      i += 1;\n      c = s.charAt(i);\n\n    // name.\n    } else if ((c >= 'a' && c <= 'z') || (c >= 'A' && c <= 'Z') || c === '$' || c === '#') {\n      str = c;\n      i += 1;\n      for (;;) {\n        c = s.charAt(i);\n        if ((c >= 'a' && c <= 'z') || (c >= 'A' && c <= 'Z') || (c >= '0' && c <= '9') || c === '_' || c === '$') {\n          str += c;\n          i += 1;\n        } else {\n          break;\n        }\n      }\n\n      result.push(make('name', str));\n    // number.\n\n    // A number cannot start with a decimal point. It must start with a digit,\n    // possibly '0'.\n\n    } else if (c >= '0' && c <= '9') {\n      str = c;\n      i += 1;\n\n      // Look for more digits.\n\n      for (;;) {\n        c = s.charAt(i);\n        if (c < '0' || c > '9') {\n          break;\n        }\n        i += 1;\n        str += c;\n      }\n\n      // Look for a decimal fraction part.\n\n      if (c === '.') {\n        i += 1;\n        str += c;\n        for (;;) {\n          c = s.charAt(i);\n          if (c < '0' || c > '9') {\n            break;\n          }\n          i += 1;\n          str += c;\n        }\n      }\n\n      // Look for an exponent part.\n      if (c === 'e' || c === 'E') {\n        i += 1;\n        str += c;\n        c = s.charAt(i);\n        if (c === '-' || c === '+') {\n          i += 1;\n          str += c;\n          c = s.charAt(i);\n        }\n        if (c < '0' || c > '9') {\n          makeError(make('number', str), \"Bad exponent\");\n        }\n        do {\n          i += 1;\n          str += c;\n          c = s.charAt(i);\n        } while (c >= '0' && c <= '9');\n      }\n\n      // Make sure the next character is not a letter.\n\n      if (c >= 'a' && c <= 'z') {\n                str += c;\n                i += 1;\n                makeError(make('number', str), \"Bad number\");\n      }\n\n      // Don't convert the string value to a number. If it is finite, then it is a good\n      // token.\n      // result.push(make('number', parseFloat(str)));\n      // result.push(make('number', str));\n\n      \n      n = +str;\n      if (isFinite(n)) {\n        result.push(make('number', n));\n      } else {\n        makeError(make('number', str), \"Bad number\");\n      }\n      \n\n    // string\n\n    } else if (c === '\\'' || c === '\"') {\n      str = '';\n      q = c;\n      i += 1;\n      for (;;) {\n        c = s.charAt(i);\n        if (c < ' ') {\n          // make('string', str).error(c === '\\n' || c === '\\r' || c === '' ?\n          //     \"Unterminated string.\" :\n          //     \"Control character in string.\", make('', str));\n          makeError(make('', str) || make(q==='\"'?'string_double':'string_single', str),\n                    c === '\\n' || c === '\\r' || c === '' ?\n                         \"Unterminated string.\" :\n                         \"Control character in string.\");\n        }\n\n        // Look for the closing quote.\n\n        if (c === q) {\n          break;\n        }\n\n        // Look for escapement.\n\n        if (c === '\\\\') {\n          i += 1;\n          if (i >= length) {\n            makeError(make(q==='\"'?'string_double':'string_single', str), \"Unterminated string\");\n          }\n          c = s.charAt(i);\n          switch (c) {\n          case 'b':\n            c = '\\b';\n            break;\n          case 'f':\n            c = '\\f';\n            break;\n          case 'n':\n            c = '\\n';\n            break;\n          case 'r':\n            c = '\\r';\n            break;\n          case 't':\n            c = '\\t';\n            break;\n          case 'u':\n            if (i >= length) {\n              makeError(make(q==='\"'?'string_double':'string_single', str), \"Unterminated string\");\n            }\n            c = parseInt(s.substr(i + 1, 4), 16);\n            if (!isFinite(c) || c < 0) {\n              makeError(make(q==='\"'?'string_double':'string_single', str), \"Unterminated string\");\n            }\n            c = String.fromCharCode(c);\n            i += 4;\n            break;\n          }\n        }\n        str += c;\n        i += 1;\n      }\n      i += 1;\n      result.push(make(q==='\"'?'string_double':'string_single', str));\n      c = s.charAt(i);\n\n    // comment.\n    } else if (c === '/' && s.charAt(i + 1) === '/') {\n      i += 1;\n      for (;;) {\n        c = s.charAt(i);\n        if (c === '\\n' || c === '\\r' || c === '') {\n          break;\n        }\n        i += 1;\n      }\n\n    // combining\n\n    } else if (prefix.indexOf(c) >= 0) {\n      str = c;\n      i += 1;\n      while (true) {\n        c = s.charAt(i);\n        if (i >= length || suffix.indexOf(c) < 0) {\n          break;\n        }\n        str += c;\n        i += 1;\n      }\n      result.push(make('operator', str));\n\n   // single-character operator\n    } else {\n      i += 1;\n      result.push(make('operator', c));\n      c = s.charAt(i);\n    }\n  }\n  return result;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/lpel.js","\nexport function db_quote_literal(intxt) {\n     return \"'\" + intxt.toString().replace(/\\'/g , \"''\") + \"'\";\n} \n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/utils.js"],"sourceRoot":""}