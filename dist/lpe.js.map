{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap fbb5cc4bcfb493217374","webpack:///./src/console/console.js","webpack:///./src/lisp.js","webpack:///./src/lpep.js","webpack:///./src/sql_where.js","webpack:///./src/sql_context.js","webpack:///./src/index.js","webpack:///./src/lpel.js","webpack:///./src/utils/utils.js"],"names":["console","isArray","arg","Object","prototype","toString","call","isString","isNumber","isHash","isFunction","$var$","ctx","varName","value","theCtx","result","undefined","length","makeMacro","fn","ast","isMacro","makeSF","__isSpecialForm","isSF","makeLetBindings","rs","EVAL","forEach","pair","Error","SPECIAL_FORMS","slice","macroexpand","reduce","acc","astItem","f","push","map","a","obj","propertyName","methodName","args","apply","e","errCtx","env_bind","some","every","STDLIB","Array","Date","JSON","v","b","i","RegExp","bind","arr","it","c","k","el","parse","stringify","hasOwnProperty","x","join","keys","values","log","concat","splice","eval_context","eval","resolveString","exprs","newCtx","opAst","argsAst","op","sfResult","fnResult","init_lisp","val","eval_lisp","evaluate","make_parse","symbol_table","token","tokens","token_nr","expr_scope","pop","operator_aliases","operator_alias","from","to","itself","scope","find","n","o","s","create","original_symbol","nud","led","lbp","expr_logical_scope","parent","tp","expr_lpe_scope","new_expression_scope","advance","id","t","makeError","type","arity","sexpr","statement","std","expression","statements","rbp","left","symbol","bp","infix","first","right","second","infixr","prefix","expr","comma","third","lift_funseq","node","lift_funseq_2","source","parser","str","parseResult","err","error","message","stack","sql_where_context","_vars","_context","try_to_quote_column","colname","h","try_to_quote_order_by_column","resolve_literal","lit","resolve_order_by_literal","ret","key","arguments","cnt","period_type","pt","test","reg","replace","regExp","prnt","ar","match","argel","l","r","inexpr","sql","id_val","res_json","plv8","execute","frst","axis_condition","split","e2","indexOf","substr","fts","tree","ilike","col","ac","eval_sql_where","_expr","predicate","TypeError","list","thisArg","sql_context","q","find_part","p","sel","where","srt","parse_sql_expr","do_select_from","fr","parse_sql_apidb_expr","_forced_table","_forced_where","cache","w","eval_lpe","lpe","isDigit","isLetter","LPESyntaxError","constructor","__proto__","captureStackTrace","name","errorDescription","tokenize","suffix","make","charAt","isFinite","parseInt","String","fromCharCode","db_quote_literal","intxt"],"mappings":"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","file":"lpe.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"lpe\"] = factory();\n\telse\n\t\troot[\"lpe\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap fbb5cc4bcfb493217374","\nexport default console;\n\n\n// WEBPACK FOOTER //\n// ./src/console/console.js","/**\n *  miniMAL lisp interpreter\n *  Copyright (C) 2014 Joel Martin\n *  Licensed under MPL 2.0\n *  https://github.com/kanaka/mal\n * \n */\n/**\n *  The code has been reworked to suite LuxmsBI needs\n *  by esix & Dmitry Dorofeev\n *  2017-2019\n */\n\nimport console from './console/console';\n\n\nconst isArray = (arg) => Object.prototype.toString.call(arg) === '[object Array]';\nconst isString = (arg) => (typeof arg === 'string');\nconst isNumber = (arg) => (typeof arg === 'number');\nconst isHash = (arg) => (typeof arg === 'object') && (arg !== null) && !isArray(arg);\nconst isFunction = (arg) => (typeof arg === 'function');\n\n\n/**\n * Get or Set variable in context\n * @param {*} ctx - array, hashmap or function that stores variables \n * @param {*} varName - the name of variable\n * @param {*} value - optional value to set (undefied if get)\n */\nfunction $var$(ctx, varName, value) {\n  if (isArray(ctx)) {                                                           // contexts chain\n    for (let theCtx of ctx) {\n      const result = $var$(theCtx, varName);\n      if (result === undefined) continue;                                       // no such var in context\n      if (value === undefined) return result;                                   // get => we've got a result\n      return $var$(theCtx, varName, value);                                     // set => redirect 'set' to context with variable.\n    }\n    if (value === undefined) return undefined;                                  // get => variable not found in all contexts\n    if (ctx.length) $var$(ctx[0], varName, value);                              // set => set variable to HEAD context\n    return undefined;                                                           // ??? ctx.length = 0\n  }\n  \n  if (isFunction(ctx)) return ctx(varName, value);\n\n  if (isHash(ctx)) {\n    return (value === undefined) ? ctx[varName] : (ctx[varName] = value);\n  }\n\n  return undefined;\n}\n\n\nexport function makeMacro(fn, ast) {\n  fn.ast = ast || [[], {}, [], 1]; // mark as macro\n  return fn;\n}\n\nfunction isMacro(fn) {\n  if (!isFunction(fn)) return false;\n  if (!isArray(fn.ast)) return false;\n  return !!fn.ast[3];\n}\n\nexport function makeSF(fn) {\n  fn.__isSpecialForm = true;\n  return fn;\n}\n\nfunction isSF(fn) {\n  if (!isFunction(fn)) return false;\n  return !!fn.__isSpecialForm;\n}\n\n\nfunction makeLetBindings(ast, ctx, rs) {\n  let result = {};\n  if (isHash(ast)) {\n    for (let varName in ast) {\n      result[varName] = EVAL(ast[varName], ctx, rs);\n    }\n  } else if (isArray(ast) && isString(ast[0])) {\n    result[ast[0]] = EVAL(ast[1], ctx, rs);\n  } else if (isArray(ast)) {\n    ast.forEach(pair => result[pair[0]] = EVAL(pair[1], ctx, rs));\n  } else if (isFunction(ast)) {\n    return ast;\n  } else {\n    throw new Error('LISP: let expression invalid form in ' + ast);\n  }\n  return result;\n}\n\n\nconst SPECIAL_FORMS = {                                                         // built-in special forms\n  'let': makeSF((ast, ctx, rs) => EVAL(['begin', ...ast.slice(1)], [makeLetBindings(ast[0], ctx, rs), ctx], rs)),\n  '`': makeSF((ast, ctx) => ast[0]),                                            // quote\n  'macroexpand': makeSF(macroexpand),\n  'begin': makeSF((ast, ctx) => ast.reduce((acc, astItem) => EVAL(astItem, ctx), null)),\n  'do': makeSF((ast, ctx) => { throw new Error('DO not implemented') }),\n  'if': makeSF((ast, ctx, rs) => EVAL(ast[0], ctx, false) ? EVAL(ast[1], ctx, rs) : EVAL(ast[2], ctx, rs)),\n  '~': makeSF((ast, ctx, rs) => {                                               // mark as macro\n    const f = EVAL(ast[0], ctx, rs);                                            // eval regular function\n    f.ast.push(1); // mark as macro\n    return f;\n  }),\n  '.-': makeSF((ast, ctx, rs) => {                                              // get or set attribute\n    const [obj, propertyName, value] = ast.map(a => EVAL(a, ctx, rs));\n    return (value !== undefined) ? (obj[propertyName] = value) : obj[propertyName];\n  }),\n  '.': makeSF((ast, ctx, rs) => {                                               // call object method\n    const [obj, methodName, ...args] = ast.map(a => EVAL(a, ctx, rs));\n    const fn = obj[methodName];\n    return fn.apply(obj, args);\n  }),\n  'try': makeSF((ast, ctx, rs) => {                                             // try/catch\n    try {\n      return EVAL(ast[0], ctx, rs);\n    } catch (e) {\n      const errCtx = env_bind([ast[1][0]], ctx, [e]);\n      return EVAL(ast[1][1], errCtx, rs);\n    }\n  }),\n  '||': makeSF((ast, ctx, rs) => ast.some(a => !!EVAL(a, ctx, rs))),            // logical or\n  '&&': makeSF((ast, ctx, rs) => ast.every(a => !!EVAL(a, ctx, rs))),           // logical and\n  'fn': makeSF((ast, ctx, rs) => {                                              // define new function (lambda)\n    const f = (...args) => EVAL(ast[1], env_bind(ast[0], ctx, args), rs);\n    f.ast = [ast[1], ctx, ast[0]];                                              // f.ast compresses more than f.data\n    return f;\n  }),\n  'def': makeSF((ast, ctx, rs) => {                                             // update current environment\n    const value = EVAL(ast[1], ctx, rs);\n    const result = $var$(ctx, ast[0], value);\n    return result;\n  }),\n};\n\n\nconst STDLIB = {\n  // built-in constants\n  '#t': true,\n  '#f': false,\n  'NIL': null,\n  'null': null,                                                                 // js specific\n  'true': true,\n  'false': false,\n  'Array': Array,                                                               // TODO: consider removing these properties\n  'Object': Object,\n  'Date': Date,\n  'console': console,\n  'JSON': JSON,\n\n  // special forms\n  ...SPECIAL_FORMS,\n\n  // built-in function\n  '=': (...args) => args.every(v => v === args[0]),\n  '+': (...args) => args.reduce((a, b) => a + b),\n  '-': (...args) => args.length === 1 ? -args[0] : args.reduce((a, b) => a - b),\n  '*': (...args) => args.reduce((a, b) => a * b),\n  '/': (...args) => args.length === 1 ? 1 / args[0] : args.reduce((a, b) => a / b),\n  '<': (...args) => args.every((v, i) => i === 0 ? true : args[i-1] < args[i]),\n  '>': (...args) => args.every((v, i) => i === 0 ? true : args[i-1] > args[i]),\n  '<=': (...args) => args.every((v, i) => i === 0 ? true : args[i-1] <= args[i]),\n  '>=': (...args) => args.every((v, i) => i === 0 ? true : args[i-1] >= args[i]),\n  '!=': (...args) => !args.every(v => v === args[0]),\n  '[': (...args) => args,\n  'RegExp': (...args) => RegExp.apply(RegExp, args),\n  'count': (a) => a.length,\n  'del': (a, b) => delete a[b],\n  // 'del': (a, b) => Reflect.deleteProperty(a, b),\n  'isa': (a, b) => a instanceof b,\n  'type': a => typeof a,\n  'new': (...args) => new (args[0].bind.apply(args[0], args)),\n  'not': a => !a,\n  'list': (...args) => args,\n  'vector': (...args) => args,\n  'map': (fn, arr) => arr.map(it => fn(it)),\n  'throw': a => { throw(a) },\n  'identity': a => a,\n  'pluck': (c, k) => c.map(el => el[k]),                                        // for each array element, get property value, present result as array.\n  'read-string': a => JSON.parse(a),\n  'rep': (a) => JSON.stringify(EVAL(JSON.parse(a), STDLIB)),                    // TODO: fix ctx and rs arguments\n  'null?': (a) => a === null || a === undefined,                                // ??? add [] ???\n  'true?': (a) => a === true,\n  'false?': (a) => a === false,\n  'string?': isString,\n  'list?': isArray,\n  'contains?': (a, b) =>  a.hasOwnProperty(b),\n  'str': (...args) => args.map(x => isString(x) ? x : JSON.stringify(x)).join(''),\n  'get': (a, b) => a.hasOwnProperty(b) ? a[b] : undefined,\n  'nth': (a, b) => a.hasOwnProperty(b) ? a[b] : undefined,\n  'set': (a, b, c) => (a[b] = c, a),\n  'keys': (a) => Object.keys(a),\n  'vals': (a) => Object.values(a),\n  'rest': (a) => a.slice(1),\n  'println': (...args) => console.log(args.map(x => isString(x) ? x : JSON.stringify(x)).join(' ')),\n  'empty?': (a) => isArray(a) ? a.length === 0 : false,\n  'cons': (a, b) => [].concat([a], b),\n  'prn': (...args) => console.log(args.map((x) => JSON.stringify(x)).join(' ')),\n  'slice': (a, b, ...end) => a.slice(b, end.length > 0 ? end[0] : a.length),\n  'first': (a) => a.length > 0 ? a[0] : null,\n  'last': (a) => a[a.length - 1],\n  'apply': (f, ...b) => f.apply(f, b),\n  'concat': (...a) => [].concat.apply([], a),\n  'pr-str': (...a) => a.map(x => JSON.stringify(x)).join(' '),\n  'classOf': (a) => Object.prototype.toString.call(a),\n\n  // not implemented yet\n  // 'hash-table->alist'\n\n  // macros\n  '\\'': makeMacro(a => a.toString()),\n  '\"': makeMacro(a => a.toString()),\n  '()': makeMacro((...args) => args),                                           // ???\n  '->': makeMacro((acc, ...ast) => {                                            // thread first macro\n    //     ->\n    //   : https://clojuredocs.org/clojure.core/-%3E%3E\n    for (let arr of ast) {\n      if (!isArray(arr)) {\n        arr = [\".-\", acc, arr];                                                 //            ....\n      } else if (arr[0] === \"()\" && arr.length === 2 && (isString(arr[1]) || isNumber(arr[1]))) {\n        arr = [\".-\", acc, arr[1]];\n      } else {\n        arr.splice(1, 0, acc);                                                  //  \"\"      ...  thread first\n      }\n      acc = arr;\n    }\n    return acc;\n  }),\n  '->>': makeMacro((acc, ...ast) => {                                           // thread last macro\n    //     ->>\n    //   : https://clojuredocs.org/clojure.core/-%3E%3E\n    for (let arr of ast) {\n      arr.push(acc);\n      acc = arr;\n    }\n    return acc;\n  }),\n  'invoke': makeMacro((...ast) => {\n    ///       LPE    ,       ->\n    ///        invoke -      .\n    /// invoke    ->\n    ast.splice(0, 0, \".\");\n    return ast;\n  }),\n  'and': makeMacro((...ast) => {\n    if (ast.length === 0) return true;\n    if (ast.length === 1) return ast[0];\n    return [\"let\", [\"__and\", ast[0]],\n                   [\"if\", \"__and\",\n                          [\"and\"].concat(ast.slice(1)),\n                          \"__and\"]];\n  }),\n  'or': makeMacro((...ast) => {\n    if (ast.length === 0) return false;\n    if (ast.length === 1) return ast[0];\n    return [\"let\", [\"__or\", ast[0]],\n                   [\"if\", \"__or\",\n                          \"__or\",\n                          [\"or\"].concat(ast.slice(1))]];\n  }),\n\n\n  // system functions & objects\n  // 'js': eval,\n  eval_context: eval_context,                           // TODO: remove\n  eval: (a) => EVAL(a, STDLIB),\n};\n\n\nfunction macroexpand(ast, ctx, resolveString = true) {\n  while (true) {\n    if (!isArray(ast)) break;\n    if (!isString(ast[0])) break;\n\n    const v = $var$(ctx, ast[0]);\n    if (!isFunction(v)) break;\n\n    if (!isMacro(v)) break;\n\n    ast = v.apply(v, ast.slice(1));                                             //  ! 3-     1  push\n  }\n  return ast;\n}\n\n\n/**\n * Return new ctx with symbols in ast bound to\n * corresponding values in exprs\n * @param ast\n * @param ctx\n * @param exprs\n * @returns {*[]}\n */\nfunction env_bind(ast, ctx, exprs) {\n  let newCtx = {};\n  for (let i = 0; i < ast.length; i++) {\n    if (ast[i] === \"&\") {\n      // variable length arguments\n      newCtx[ast[i + 1]] = Array.prototype.slice.call(exprs, i);\n      break;\n    } else {\n      newCtx[ast[i]] = exprs[i];\n    }\n  }\n  return [newCtx, ctx];\n}\n\n\nfunction EVAL(ast, ctx, resolveString = true) {\n  while (true) {\n    if (!isArray(ast)) {                                                        // atom\n      if (isString(ast)) {\n        const value = $var$(ctx, ast);\n        if (value !== undefined) {                                              // variable\n          return value;\n        }\n        return resolveString ? ast : undefined;                                 // if string and not in ctx\n      }\n      return ast;\n    }\n\n    // apply\n    ast = macroexpand(ast, ctx);\n    if (!Array.isArray(ast)) return ast;                                        // TODO: do we need eval here?\n    if (ast.length === 0) return null;                                          // TODO: [] => empty list (or, maybe return vector [])\n\n    const [opAst, ...argsAst] = ast;\n\n    const op = EVAL(opAst, ctx, resolveString);                                 // evaluate operator\n\n    if (isSF(op)) {                                                             // special form\n      const sfResult = op(argsAst, ctx, resolveString);\n      return sfResult;\n    }\n\n    const args = argsAst.map(a => EVAL(a, ctx, resolveString));                 // evaluate arguments\n\n    if (op.ast) {\n      ast = op.ast[0];\n      ctx = env_bind(op.ast[2], op.ast[1], args);                               // TCO\n    } else {\n      const fnResult = op.apply(op, args);\n      return fnResult;\n    }\n  }\n} // EVAL\n\n\nfunction eval_context(ast, ctx) {\n  const result = EVAL(ast, [ctx || {}, STDLIB]);\n  return result;\n}\n\n\n// Use with care\nexport function init_lisp(ctx) {\n  ctx = [ctx || {}, STDLIB];\n  return {\n    eval: (ast) => eval_context(ast, ctx),\n    val: (varName, value) => $var$(ctx, varName, value),\n  }\n}\n\n\nexport function eval_lisp(ast, ctx) {\n  const result = eval_context(ast, ctx);\n\n  if (isFunction(result)) {\n    return '[\"function\"]';\n  } else {\n    return result;\n  }\n}\n\n\nexport function evaluate(ast, ctx) {\n  return eval_lisp(ast, ctx);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lisp.js","/**\n * LuxPath expressions parser\n *\n * VERSION: 1.0.1\n * \n * DVD: added sexpr property to the token as array to keep s-expressions.\n *      arity and first, second etc will be removed\n * \n */\n\n// Parser for Simplified JavaScript written in Simplified JavaScript\n// From Top Down Operator Precedence\n// http://javascript.crockford.com/tdop/index.html\n// Douglas Crockford\n// 2010-06-26\n//////////////////////////////////////////////////\n// Later hacked to parse LPE instead of JavaScript\n// Dmitry Dorofeev\n// 2017-01-20\n\n\nimport console from './console/console';\nimport {tokenize, makeError, LPESyntaxError} from './lpel';\n\n\nvar make_parse = function () {\n  var symbol_table = {};\n  var token;\n  var tokens;\n  var token_nr;\n\n  //    \n  var expr_scope = { pop: function () {}}; //      (A and B or C)\n\n  //     \n  var operator_aliases = {};\n\n  var operator_alias = function(from, to) {\n    operator_aliases[from] = to;\n  };\n\n  var itself = function () {\n    return this;\n  };\n\n  let scope = {\n    find: function (n) {\n      var e = this, o;\n      var s = Object.create(original_symbol);\n      s.nud      = itself;\n      s.led      = null;\n      s.lbp      = 0;\n      return s;\n    },\n  };\n\n  var expr_logical_scope = {\n    pop: function () {\n      expr_scope = this.parent;\n    },\n    parent: null,\n    tp: \"logical\"\n  };\n\n  var expr_lpe_scope = {\n    pop: function () {\n      expr_scope = this.parent;\n    },\n    parent: null,\n    tp: \"lpe\"\n  };\n\n  var new_expression_scope = function (tp) {\n    var s = expr_scope;\n    expr_scope = Object.create(tp === \"logical\" ? expr_logical_scope : expr_lpe_scope);\n    expr_scope.parent = s;\n    return expr_scope;\n  };\n\n  var advance = function (id) {\n    var a, o, t, v;\n    if (id && token.id !== id) {\n      makeError(token, \"Got \" + token.value + \" but expected '\" + id + \"'.\");\n    }\n    if (token_nr >= tokens.length) {\n      token = symbol_table[\"(end)\"];\n      return;\n    }\n    t = tokens[token_nr];\n    token_nr += 1;\n    v = t.value;\n    a = t.type;\n\n    if (a === \"name\") {\n\n      if (v === 'true' || v === 'false' || v === 'null') {\n        o = symbol_table[v];\n        a = \"literal\";\n      } else if (expr_scope.tp == \"logical\") {\n        if (v === \"or\" || v === \"and\" || v === \"not\" || v === \"in\" || v === \"is\") {\n          a = \"operator\";\n          o = symbol_table[v];\n          if (!o) {\n            makeError(t, \"Unknown logical operator.\");\n          }\n        } else {\n          o = scope.find(v);\n        }\n      } else {\n        o = scope.find(v);\n      }\n    } else if (a === \"operator\") {\n      o = symbol_table[v];\n      if (!o) {\n        makeError(t, \"Unknown operator.\");\n      }\n    } else if (a === \"string_double\") {\n      o = symbol_table[\"(string_literal_double)\"];\n      a = \"literal\";\n    } else if (a === \"string_single\") {\n      o = symbol_table[\"(string_literal_single)\"];\n      a = \"literal\";\n    } else if (a === \"number\") {\n      o = symbol_table[\"(number_literal)\"];\n      a = \"literal\";\n    } else {\n      makeError(t, \"Unexpected token.\");\n    }\n    token = Object.create(o);\n    token.from = t.from;\n    token.to = t.to;\n    token.value = v;\n    token.arity = a;\n    if (a == \"operator\") {\n      token.sexpr = operator_aliases[v];\n    } else {\n      token.sexpr = v; // by dima\n    }\n    return token;\n  };\n\n  var statement = function () {\n    var n = token, v;\n\n    if (n.std) {\n        advance();\n        //scope.reserve(n);\n        return n.std();\n    }\n    v = expression(0);\n    //if (!v.assignment && v.id !== \"(\") {\n    /*  if (v.id !== \"(\" && v.id !== \"name\" && v.id !== \"number\") {\n        console.log(v);\n        v.error(\"Bad expression statement.\");\n    }*/\n    //advance(\";\");\n    return v;\n  };\n\n  var statements = function () {\n    var a = [], s;\n    while (true) {\n        //console.log(token);\n        if ( token.id === \"(end)\") {\n            break;\n        } else if(token.value === ';'){\n          // skip optional ;\n           advance();\n        }\n        s = statement();\n        //console.log(\"STATEMENT \", s);\n        if (s) {\n            a.push(s);\n        }\n    }\n    return a.length === 0 ? null : a.length === 1 ? a[0]: {\"sexpr\": [\"begin\"].concat(a.map(function(el){return el[\"sexpr\"];}))};\n  };\n\n  var expression = function (rbp) {\n    var left;\n    var t = token;\n    advance();\n    left = t.nud();\n    while (rbp < token.lbp) {\n      t = token;\n      advance();\n      left = t.led(left);\n    }\n    return left;\n  };\n\n  var original_symbol = {\n    nud: function () {\n      makeError(this, \"Undefined.\");\n    },\n    led: function (left) {\n      makeError(this, \"Missing operator.\");\n    }\n  };\n\n  var symbol = function (id, bp) {\n    var s = symbol_table[id];\n    bp = bp || 0;\n    if (s) {\n      if (bp >= s.lbp) {\n        s.lbp = bp;\n      }\n    } else {\n      s = Object.create(original_symbol);\n      s.id = s.value = id;\n      s.lbp = bp;\n      symbol_table[id] = s;\n    }\n    operator_alias(id, id);\n    return s;\n  };\n\n  var infix = function (id, bp, led) {\n    var s = symbol(id, bp);\n    s.led = led || function (left) {\n      this.first = left;\n      var right = expression(bp);\n      this.second = right;\n      this.arity = \"binary\";\n      this.sexpr = [this.sexpr, left.sexpr, right.sexpr];\n      return this;\n    };\n    return s;\n  };\n\n  var infixr = function (id, bp, led) {\n    var s = symbol(id, bp);\n    s.led = led || function (left) {\n      this.first = left;\n      var right = expression(bp - 1);\n      this.second = right;\n      this.arity = \"binary\";\n      this.sexpr = [this.sexpr, left.sexpr, right.sexpr];\n      return this;\n    };\n    return s;\n  };\n\n  var prefix = function (id, nud) {\n    var s = symbol(id);\n    s.nud = nud || function () {\n      // scope.reserve(this);\n      var expr = expression(70);\n      this.first = expr;\n      this.arity = \"unary\";\n      this.sexpr = [this.sexpr, expr.sexpr];\n      return this;\n    };\n    return s;\n  };\n\n  symbol(\"(end)\");\n  symbol(\"(name)\");\n  symbol(\"(null)\");\n  symbol(\":\");\n  symbol(\";\");\n  symbol(\")\");\n  symbol(\"]\");\n  symbol(\"}\");\n\n  symbol(\"true\").nud = function () { this.sexpr = true; return this; };\n  symbol(\"false\").nud = function () { this.sexpr = false; return this; };\n  symbol(\"null\").nud = function () { this.sexpr = null; return this; };\n\n  // allow to skip values in function calls....\n  var comma = symbol(\",\");\n\n  symbol(\"(string_literal_double)\").nud = function() {\n    this.first = '\"';\n    this.arity = \"unary\";\n    this.sexpr = ['\"', this.sexpr];\n    return this;\n  };\n\n  symbol(\"(string_literal_single)\").nud = function() {\n    this.first = \"'\";\n    this.arity = \"unary\";\n    this.sexpr = [\"'\", this.sexpr];\n    return this;\n  };\n\n  symbol(\"(number_literal)\").nud = itself;\n\n  // [esix]: commented as in conflict with SQL operator ':'\n  // infix(\"?\", 20, function (left) {\n  //   this.first = left;\n  //   this.second = expression(0);\n  //   advance(\":\");\n  //   this.third = expression(0);\n  //   this.arity = \"ternary\";\n  //   this.sexpr = [\"if\", this.first.sexpr, this.second.sexpr, this.third.sexpr];\n  //   return this;\n  // });\n\n  // [esix]: ternary operator with no conflict on ':' operator\n  infix('?', 20, function (left) {\n    this.first = left;\n    this.second = expression(0);\n    this.arity = 'binary';\n    if (this.second.arity === 'binary' && this.second.value === ':') {\n      this.sexpr = [\"if\", this.first.sexpr, this.second.sexpr[1], this.second.sexpr[2]];\n    } else {\n      makeError(this.second, \"Invalid ternary operator.\");\n    }\n    return this;\n  });\n\n  infixr(\"&&\", 30);\n  infixr(\"\", 30);\n  operator_alias(\"&&\",\"and\");\n  operator_alias(\"\",\"and\");\n\n  infixr(\"||\", 30);\n  infixr(\"\", 30);\n  operator_alias(\"||\",\"or\");\n  operator_alias(\"\",\"or\");\n\n  infixr('', 30); operator_alias('', 'nor');\n  infixr('', 30); operator_alias('', 'nand');\n\n  infixr('', 30); operator_alias('', 'car');\n  infixr('', 30); operator_alias('', 'cdr');\n\n  /* will be used in logical scope */\n  infixr(\"and\", 30);\n  infixr(\"or\", 30);\n  // required for SQL logical scope where a in (1,2,3)\n  infixr(\"in\", 30);\n  infixr(\"is\", 30);\n  prefix(\"not\");\n\n  // for SQL types: '10'::BIGINT\n  infixr(\"::\", 90);\n\n  // for SQL as\n  infixr(\":\", 80);\n\n  infixr('~', 40);\n  infixr('!~', 40);\n\n  infixr('=', 40);\n  infixr('', 40);\n  operator_alias('', '!='); // from to canonical form;\n\n  infixr('==', 40);\n  infixr('!==', 40);\n  infixr('!=', 40);\n  infixr('<', 40);\n  infixr('<=', 40);\n  infixr('', 40);\n  operator_alias('', '<=');\n\n  infixr(\">\", 40);\n  infixr(\">=\", 40);\n  infixr(\"\", 40);\n  operator_alias(\"\",\">=\");\n  infixr(\"<>\", 40);\n\n  infix(\"+\", 50);\n  infix(\"-\", 50);\n\n  infix(\"*\", 60);\n  infix(\"/\", 60);\n\n  infix(\"(\", 80, function (left) {\n    var a = [];\n    if (left.id === \"[\") {\n          // FIXME TODO\n          this.arity = \"ternary\";\n          this.first = left.first;\n          this.second = left.second;\n          this.third = a;\n    } else {\n          this.arity = \"binary\";\n          this.first = left;\n          this.value = \"(\"; // it was '(' by dima\n          this.second = a;\n          if ((left.arity !== \"unary\" || left.id !== \"function\") &&\n              left.arity !== \"name\" && left.id !== \"(\" &&\n              left.id !== \"&&\" && left.id !== \"||\" && left.id !== \"?\") {\n            makeError(left, \"Expected a variable name.\");\n          }\n    }\n    // dima support for missed function arguments...\n    if (token.id !== \")\") {\n      if (false && left.value == \"where\") {\n        //    where - logical expression.\n        //       , and, or, not   ...\n        new_expression_scope(\"logical\");\n        var e = expression(0);\n        expr_scope.pop();\n        a.push(e);\n      } else {\n        new_expression_scope(\"lpe\");\n        while (true) {\n          // console.log(\">\" + token.arity + \" NAME:\" + left.value);\n          if (token.id === ',') {\n            a.push({\n              value: null,\n              arity: \"literal\"\n            });\n            advance();\n          } else if (token.id === ')') {\n            a.push({\n              value: null,\n              arity: \"literal\"\n            });\n            break;\n          } else {\n            new_expression_scope(\"logical\");\n            var e = expression(0);\n            expr_scope.pop();\n            // var e = statements();\n            a.push(e);\n            if (token.id !== \",\") {\n              break;\n            }\n            advance(\",\");\n          }\n        }\n        expr_scope.pop();\n      }\n    }\n\n    this.sexpr = [this.first.value].concat(a.map(function(el){return el.sexpr}));\n    advance(\")\");\n    return this;\n  });\n\n\n  function lift_funseq(node) {\n    if (node.value === \"->\") {\n      return lift_funseq(node.first).concat(lift_funseq(node.second));\n    } else if (node.value === \"()\") {\n      if (node.first.value === \"->\"){\n        //        \"->\",    \n        // if (true).(frst().second()) === if(true) => [->> [first] [second]]   , \n        //   seq     \n          return [[\"->\"].concat(lift_funseq(node.first.first)).concat(lift_funseq(node.first.second))];\n      } else {\n          return lift_funseq(node.first);\n      }\n    } else {\n      return [node.sexpr];\n    }\n  }\n\n  function lift_funseq_2(node) {\n    if (node.value === \"->>\") {\n      return lift_funseq(node.first).concat(lift_funseq(node.second));\n    } else if (node.value === \"()\") {\n      if (node.first.value === \"->>\"){\n        //        \"->\",    \n        // if (true).(frst().second()) === if(true) => [->> [first] [second]]   , \n        //   seq     \n          return [[\"->>\"].concat(lift_funseq(node.first.first)).concat(lift_funseq(node.first.second))];\n      } else {\n          return lift_funseq(node.first);\n      }\n    } else {\n      return [node.sexpr];\n    }\n  }\n\n  infix(\".\", 70, function (left) {\n    this.first = left;\n    // this.second = expression(0);\n    this.second = expression(70);\n    this.arity = \"binary\";\n    this.value = \"->\";\n    this.sexpr = [\"->\"].concat(lift_funseq(this));\n    return this;\n  });\n\n  infix(\"..\", 70, function (left) {\n    this.first = left;\n    // this.second = expression(0);\n    this.second = expression(70);\n    this.arity = \"binary\";\n    this.value = \"->>\";\n    this.sexpr = [\"->>\"].concat(lift_funseq_2(this));\n    return this;\n  });\n\n  // WARNING HACK FIXME DIMA -    order_by(+a)\n  //    /table  +table  htSQL\n  prefix(\"+\");\n\n  prefix(\"!\");\n  prefix(\"not\"); // will be used in logical scope\n  prefix(\"\");\n  operator_alias(\"!\", \"not\");\n  operator_alias(\"\", \"not\");\n\n  // trying to optimize, when we have negated -number\n  prefix(\"-\");\n\n  prefix(\".\",function () {\n    var v = expression(70);\n    if (v.value !== \"(\") {\n      makeError(v, \"Only functions may have dot (.) unary operator.\");\n    }\n    // this.first = v;\n    // this.arity = \"unary\";\n    // return this;\n    // skip unary dot !!!\n    return v;\n  });\n\n  prefix(\"(\", function () {\n    var e = expression(0);\n    if (expr_scope.tp == \"logical\") {\n      // we should remember all brackets to restore original user expression\n      e.sexpr = [\"()\", e.sexpr];\n    } else {\n      if (e.value === \"->\") {\n        //       LPE ,   ,  push \"()\"   AST \n        e = {\n          first: e,\n          value: \"()\",\n          arity: \"unary\",\n          sexpr: [\"()\", e.sexpr]\n        };\n      }\n    }\n    advance(\")\");\n    return e;\n  });\n\n  prefix(\"[\", function () {\n    var a = [];\n    if (token.id !== \"]\") {\n      while (true) {\n        a.push(expression(0));\n        // a.push(statements());\n        if (token.id !== \",\") {\n          break;\n        }\n        advance(\",\");\n      }\n    }\n    advance(\"]\");\n    this.first = a;\n    this.arity = \"unary\";\n    this.sexpr = [\"[\"].concat(a.map((el) => el.sexpr));\n    return this;\n  });\n\n  return function (source) {\n    tokens = tokenize(source, '=<>!+-*&|/%^:.', '=<>&|:.');\n    token_nr = 0;\n    advance();\n    var s = statements();\n    // var s = expression(0);\n    advance(\"(end)\");\n    return s;\n  };\n};\n\n\n\nconst parser = make_parse();\n// console.log('LPE Parser initialized')\n\n\nexport function parse(str) {\n  try {\n    const parseResult = parser(str);   // from, to, value, arity, sexpr\n    return parseResult.sexpr;\n\n  } catch(err) {\n    console.error(\"Error\", err.message);\n    console.error(\"Error\", err.stack);\n    throw err;\n  }\n}\n\nexport {LPESyntaxError};\n\n\n\n// WEBPACK FOOTER //\n// ./src/lpep.js","/**\n Copyright (c) 2019 Luxms Inc.\n\n Permission is hereby granted, free of charge, to any person obtaining\n a copy of this software and associated documentation files (the \"Software\"),\n to deal in the Software without restriction, including without limitation\n the rights to use, copy, modify, merge, publish, distribute, sublicense,\n and/or sell copies of the Software, and to permit persons to whom the Software\n is furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in\n all copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\n IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\n CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\n TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE\n OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport console from './console/console';\nimport {parse} from './lpep';\nimport {db_quote_literal} from './utils/utils';\nimport {eval_lisp} from './lisp';\n\n\n/*\nwhere -    WHERE,   .     WHERE TRUE\nfilter -      \n*/\n\nexport function sql_where_context(_vars) {\n  var _context = _vars;\n\n  var try_to_quote_column = function(colname) {\n    if (typeof _vars['_columns'] == 'object') {\n      var h = _vars['_columns'][colname];\n      if (typeof h == \"object\") {\n        h = h['name'].toString();\n        // console.log(\"-: try_to_quote_column \" + JSON.stringify(h));\n        // console.log(\"-: try_to_quote_column \" + (typeof h));\n        if (h.length > 0) {\n          // return '\"' + h + '\"';\n          return h;\n        }\n      }\n    }\n    return colname.toString();\n  };\n\n  var try_to_quote_order_by_column = function(colname) {\n    if (typeof _vars['_columns'] == 'object') {\n      var h = _vars['_columns'][colname];\n      if (typeof h == \"object\") {\n        var o = h['order'];\n        if (o === undefined) {\n          o = h['name'];\n        }\n        console.log(\"-: try_to_quote_order_by_column \" + JSON.stringify(o));\n        console.log(\"-: try_to_quote_order_by_column \" + (typeof o));\n        if (o !== undefined && o.length > 0) {\n          //return '\"' + o.toString() + '\"';\n          return o.toString();\n        }\n      }\n    }\n    return colname.toString();\n  };\n\n  var resolve_literal = function(lit) {\n    console.log('LITERAL ', lit, '  CONTEXT:', _vars[lit]);\n    if (_vars[lit] == undefined ) {\n      return try_to_quote_column(lit);\n    } else {\n      //     !    - \n      return eval_lisp(lit, _vars);\n    }\n  };\n\n  var resolve_order_by_literal = function(lit) {\n    console.log('OB LITERAL ', lit, ' CONTEXT:', _vars[lit]);\n\n    if (_vars[lit] === undefined ) {\n      return try_to_quote_order_by_column(lit);\n    } else {\n      //     !    - \n      return eval_lisp(lit, _vars);\n    }\n  };\n\n  /*     ,   SQL */\n  _context['order_by'] = function () {\n    var ret = [];\n    var ctx = {};\n    for(var key in _vars) ctx[key] = _vars[key];\n    //   order_by   eval_lisp,       -a,  \n    //    +  -        .\n    //       where -  eval_lisp    ...\n    ctx['+'] = function (a) {\n      if (a instanceof Array) {\n        throw(\"recursive +..-\");\n      } else {\n        return resolve_order_by_literal(a);\n      }\n    }\n    ctx['+'].ast = [[],{},[],1]; // mark as macro\n\n    ctx['-'] = function (a) {\n      //console.log(\"-: call \" + JSON.stringify(a));\n      if (a instanceof Array) {\n        throw(\"recursive -..+\");\n      } else {\n        return resolve_order_by_literal(a) + ' ' + 'DESC';\n      }\n    }\n    ctx['-'].ast = [[],{},[],1]; // mark as macro\n\n    for(var i = 0; i < arguments.length; i++) {\n        if (arguments[i] instanceof Array) {\n          ret.push(eval_lisp(arguments[i], ctx) );\n        } else {\n          // try_to_quote_column        !!!\n          ret.push(resolve_order_by_literal(arguments[i].toString()));\n        }\n    }\n\n    if (ret.length > 0) {\n      return 'ORDER BY ' + ret.join(',');\n    } else {\n      return '';\n    }\n  };\n\n  _context['order_by'].ast = [[],{},[],1]; // mark as macro\n\n\n  _context['pg_interval'] = function (cnt, period_type) {\n    var pt;\n    if (period_type instanceof Object) {\n      pt = period_type[\"unit\"];\n    } else {\n      pt = period_type;\n    }\n\n    if (/^\\d+$/.test(pt)) {\n      // all numbers....\n      switch(pt){\n        case 1: pt = 'second'; break;\n        case 2: pt = 'minute'; break;\n        case 3: pt = 'hour'; break;\n        case 4: pt = 'day'; break;\n        case 5: pt = 'week'; break;\n        case 6: pt = 'month'; break;\n        case 7: pt = 'quarter'; break;\n        case 8: pt = 'year'; break;\n        default: throw(\"wrong period type:\" + pt)\n      }\n    } else {\n      var reg = new RegExp(\"['\\\"]+\",\"g\");\n      pt = pt.replace(reg,\"\");\n    }\n\n    var regExp = new RegExp(/quarter/, \"i\");\n    if (regExp.test(pt)){\n      return \"'\" + (cnt * 3) + \" month'::interval\" ;\n    }\n    return \"'\" + cnt + \" \" + pt + \"'::interval\";\n  }\n\n  // filter\n  _context['filter'] = function () {\n      var ctx = {};\n      for(var key in _vars) ctx[key] = _vars[key];\n\n      var prnt = function(ar) {\n        if (ar instanceof Array) {\n          if (  ar[0] === '$' ||  \n                ar[0] === '\"' || \n                ar[0] === \"'\" || \n                ar[0] === \"[\" || \n                ar[0] === 'parse_kv' || \n                ar[0] === \"=\" ||\n                ar[0] === \"pg_interval\") {\n            return eval_lisp(ar, ctx);\n          } else {\n              if (ar.length == 2) {\n                // unary\n                if (ar[0] == \"not\") {\n                  return ar[0] + ' ' + prnt(ar[1]);\n                } else if (ar[0] == \"()\") {\n                  return \"(\" + prnt(ar[1]) + \")\";\n                } else if (ar[0].match(/^[^\\w]+$/)){\n                  return ar[0] + prnt(ar[1]);\n                } else {\n                  return prnt(ar[0]) + \"(\" + prnt(ar[1]) + \")\";\n                }\n              } else if (ar.length == 3) {\n                if (ar[0] == \"->\") {\n                  //  LPE  ,         ->\n                  //          < >.< >\n                  //return '\"' + ar[1]+ '\".\"' + ar[2] + '\"';\n                  return ar[1] + '.' + ar[2];\n                } else if (ar[0] == \"and\" || ar[0] == \"or\" || ar[0] == \"ilike\" || ar[0] == \"like\" || \n                           ar[0] == \"in\" || ar[0] == \"is\" || ar[0].match(/^[^\\w]+$/)) {\n                  //      \n                  return prnt(ar[1]) + ' ' + ar[0] + ' ' + prnt(ar[2]);\n                } else {\n                  return ar[0] + '(' + prnt(ar[1]) + ',' + prnt(ar[2]) + ')';\n                }\n              } else {\n                //      - \n                return ar[0] + '(' + ar.slice(1).map(\n                  function(argel){return prnt(argel)}\n                ).join(',') + ')';\n              }\n            }\n        } else {\n            return ar;\n        }\n      };\n\n      ctx['\"'] = function (el) {\n        return '\"' + el.toString() + '\"';\n      }\n    \n      ctx[\"'\"] = function (el) {\n        return \"'\" + el.toString() + \"'\";\n      }\n    \n      ctx[\"[\"] = function (el) {\n        return \"[\" + Array.prototype.slice.call(arguments).join(',') + \"]\";\n      }\n\n      ctx['='] = function (l,r) {\n        if (r instanceof Array && r[0] == 'vector') {\n          return prnt(l) + \" in (\" + r.slice(1).map(function(el){return prnt(el)}).join(',') + \")\";\n        }\n        return prnt(l) + \" = \" + prnt(r);\n      }\n      ctx['='].ast = [[],{},[],1]; // mark as macro\n\n      // $(name) will quote text elements !!! suitable for generating things like WHERE title in ('a','b','c')\n      // also, we should evaluate expression, if any.\n      ctx['$'] = function(inexpr) {\n        var expr = eval_lisp(inexpr, _context); // evaluate in a normal LISP context without vars, not in WHERE context\n        if (expr instanceof Array) {\n          // try to print using quotes, use plv8 !!!\n          return expr.map(function(el){\n              if (typeof(el)===\"string\") {\n                return db_quote_literal(el);\n              } else if (typeof(el) === \"number\") {\n                return el;\n              } else {\n                return db_quote_literal(JSON.stringify(el));\n              }\n            }).join(',');\n        }\n        return db_quote_literal(expr);\n      }\n      ctx['$'].ast = [[],{},[],1]; // mark as macro\n\n      //              .\n      ctx['parse_kv'] = function(expr) {\n        if (expr instanceof Array) {\n          if (expr[0] === '->') {\n            var sql = 'select \"' + expr[2]+ '\" from \"'+ expr[1] +'\" where id = $1::INT';\n            var id_val = resolve_literal(expr[1].replace(/.$/,\"_id\"));\n\n            //console.log('SQL: ', sql, \" val:\", id_val);\n\n            var res_json = plv8.execute(sql, [ id_val ] );\n            //var res_json = [{\"src_id\":\"$a::$b:\"}];\n            var frst = res_json[0];\n\n            //console.log('SQL RES: ', frst);\n\n            if (frst !== undefined && frst[expr[2]] !== null && frst[expr[2]].length > 0) {\n                var axis_condition = function(e){\n                  var result = e.split(':').map(function(e2){\n                      e2 = e2.replace(/\\'/g , \"''\"); //' be safe\n                      return (e2.indexOf('$') == 0 ? ' AND '+e2.substr(1)+'=' : \"'\"+e2+\"'\");\n                  }).join('').substr(5);\n                  return result;\n                };\n\n                var result =  axis_condition(frst[expr[2]]);\n                if(result === undefined || result.length == 0) return '(/*kv not resolved*/ 0=1)';\n                return result;\n            }\n          }\n        }\n        return '(/*parse_kv EMPTY*/ 1=0)';\n      };\n      ctx['parse_kv'].ast = [[],{},[],1]; // mark as macro\n\n      var ret = [];\n      //console.log(\"where IN: \", JSON.stringify(Array.prototype.slice.call(arguments)));\n\n      var fts = _vars['fts'];\n      var tree = arguments;\n\n      if ( fts !== undefined && fts.length > 0) {\n        fts = fts.replace(/\\'/g , \"''\"); //' be safe\n        // Full Text Search based on column_list\n        if (typeof _vars['_columns'] == 'object') {\n\n          //console.log(\"FTS: \",  JSON.stringify(fts));\n\n          var ilike = Object.values(_vars['_columns']).map(function(col){\n            col[\"search\"] !== undefined\n            ? [\"ilike\", col[\"search\"], [\"str\", '%' + fts + '%']]\n            : null\n            }).reduce(function(ac, el) {el == null ? ac : ['or',ac,el]});\n\n          //console.log( \"FTS PARSED: \",  JSON.stringify(ilike));\n\n          if (ilike !== undefined && ilike.length > 0) {\n            //   AND   \n            tree = [[\"and\",tree[0],['()',ilike]]];\n          }\n        }\n      }\n\n      for(var i = 0; i < tree.length; i++) {\n          // console.log(\"array \", JSON.stringify(Array.prototype.slice.call(tree[i])));\n          ret.push(prnt( tree[i], ctx));\n      }\n\n      var r = ret[0]; //        !!!\n      if (r == undefined) {\n        r = '';\n      }\n      return r;\n    };\n    _context['filter'].ast = [[],{},[],1]; // mark as macro\n\n\n    // where - we should not eval arguments, so we must mark where as macro!!!\n    _context['where'] = function () {\n      // we should always get ONE argument, for example: [\"=\",[\"$\",[\"->\",\"period\",\"title\"]],3]\n      // BUT if we get two, or more arguments, we eval them one by one, AND combine later with AND operand, skipping empty results...\n      var tree = arguments;\n      var ret = [];\n      for(var i = 0; i < tree.length; i++) {\n        // console.log(\"array \", JSON.stringify(Array.prototype.slice.call(tree[i])));\n        var r = eval_lisp([\"filter\", tree[i]], _context); // r should be string\n        if (r.length > 0) {\n          ret.push(r);\n        }\n      }\n\n      if (ret.length > 0) {\n        if (ret.length > 1) {\n          return 'WHERE (' + ret.join(') AND (') + ')'; \n        } else {\n          return 'WHERE ' + ret[0]; \n        }\n      } else {\n        return 'WHERE TRUE';\n      }\n    };\n    _context['where'].ast = [[],{},[],1]; // mark as macro\n\n  return _context;\n}\n\n\n\n\n\n\n\n\n\nexport function eval_sql_where(_expr, _vars) {\n  if (typeof _vars === 'string') _vars = JSON.parse(_vars);\n\n  var sexpr = parse(_expr);\n\n\n  console.log('sql_where parse: ', JSON.stringify(sexpr));\n\n  if ((sexpr instanceof Array) &&\n     ((sexpr[0]==='filter' && (sexpr.length <=2)) || (sexpr[0]==='order_by') || (sexpr[0]==='if') || (sexpr[0]==='where') )) {\n    // ok\n  } else {\n    throw(\"only single where() or order_by() could be evaluated.\")\n  }\n\n\n  var _context = sql_where_context(_vars);\n\n  var ret = eval_lisp(sexpr, _context);\n\n  // console.log('ret: ',  JSON.stringify(ret));\n  return ret;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/sql_where.js","/**\n    Copyright (c) 2019 Luxms Inc.\n\n    Permission is hereby granted, free of charge, to any person obtaining\n    a copy of this software and associated documentation files (the \"Software\"),\n    to deal in the Software without restriction, including without limitation\n    the rights to use, copy, modify, merge, publish, distribute, sublicense,\n    and/or sell copies of the Software, and to permit persons to whom the Software\n    is furnished to do so, subject to the following conditions:\n\n    The above copyright notice and this permission notice shall be included in\n    all copies or substantial portions of the Software.\n\n    THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n    EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n    OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\n    IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\n    CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\n    TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE\n    OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\n\nimport console from './console/console';\nimport {eval_lisp} from './lisp';\nimport {sql_where_context} from './sql_where';\nimport {parse} from './lpep';\n\n// polyfill = remove in 2020 !!!\n\nif (!Array.prototype.find) {\n  Array.prototype.find = function(predicate) {\n    if (this == null) {\n      throw new TypeError('Array.prototype.find called on null or undefined');\n    }\n    if (typeof predicate !== 'function') {\n      throw new TypeError('predicate must be a function');\n    }\n    var list = Object(this);\n    var length = list.length >>> 0;\n    var thisArg = arguments[1];\n    var value;\n\n    for (var i = 0; i < length; i++) {\n      value = list[i];\n      if (predicate.call(thisArg, value, i, list)) {\n        return value;\n      }\n    }\n    return undefined;\n  };\n}\n\n\nexport function sql_context(_vars) {\n  var _context = sql_where_context(_vars);\n\n  /*     ,   SQL */\n  _context['sql'] = function() {\n    var q; // resulting sql\n    var args = Array.prototype.slice.call(arguments);\n    console.log('SQL IN: ', args);\n\n    var find_part = function(p) {\n      return args.find((el) => p == el[0]);\n    };\n\n    var sel = find_part('select');\n    console.log('FOUND select: ', sel);\n    q = eval_lisp(sel, _context);\n\n    var from = find_part('from');\n    console.log('FOUND from: ', from);\n    q = q + ' ' + eval_lisp(from, _context);\n\n    var where = find_part('where');\n    console.log(\"FOUND where: \", where);\n    if (where instanceof Array && where.length > 1) {\n      q = q + ' ' + eval_lisp(where, _context );\n    }\n\n    var srt = find_part('sort');\n    console.log('FOUND sort: ', srt);\n    if (srt instanceof Array && srt.length > 1) {\n      q = q + ' ' + eval_lisp( srt, _context );\n    }\n\n    return q;\n  };\n  _context['sql'].ast = [[],{},[],1]; // mark as macro\n\n  function prnt(a) {\n    console.log('prnt IN: ', a);\n    if (a instanceof Array){\n      if (a.length > 0) {\n        if (a[0] === '::' && a.length == 3) {\n          return a[1] + '::' + a[2];\n        } else if (a[0] === ':') {\n          return prnt(a[1]) + ' as \"' + a[2].replace(/\"/,'\\\\\"') + '\"';\n        } else {\n          return a[0] + '(' + a.slice(1).map(\n            function(argel) { return prnt(argel) }\n          ).join(',') + ')';\n        }\n      } else {\n        return '';\n      }\n    } else {\n      return a;\n    }\n  }\n\n    //   \n  _context['select'] = function() {\n    var a = Array.prototype.slice.call(arguments);\n    console.log(\"select IN: \",  JSON.stringify(a));\n    if (a.length < 1) {\n      return \"SELECT *\";\n    } else {\n      return \"SELECT \" + a.map(prnt).join(',');\n    }\n  }\n  _context['select'].ast = [[],{},[],1]; // mark as macro\n\n  _context['from'] = function() {\n    var a = Array.prototype.slice.call(arguments);\n    console.log('from IN: ', a);\n    if (a.length < 1) {\n      return \"\";\n    } else {\n      return \"FROM \" + a.map(prnt).join(',');\n    }\n  }\n  _context['from'].ast = [[],{},[],1]; // mark as macro\n\n  return _context;\n}\n\n\n/*\n  !!!    ,   htSQL.  +table(col1,col2).where(col1>3)\n ,   ?    ,        +sch.table(col1,col2)\n ....\n\nselect lpe.parse_sql_expr($$metrics(id).where(id='abcd')$$);\n\n\n htSQL:\n/course.filter(credits<3).select(department_code, no, title)\n/course.sort(credits-).limit(10){department_code, no, credits}\n/course.limit(10).sort(credits-){department_code, no, credits}\n\n ,         .  LuxPath  \n htSQL select    {}    +_(...)\n   +  /    htSQL    ,      !!!\n\n*/\n\nexport function parse_sql_expr(_expr, _vars) {\n  var ctx = sql_context(_vars);\n  var _context = ctx;\n  // for(var key in _vars) _context[key] = _vars[key];\n\n  _context['->'] = function() {\n    var ret = [];\n\n    for (var i = 0; i < arguments.length; i++) {\n      ret.push(eval_lisp( arguments[i], _context));\n    }\n\n    return ret.join(',');\n  }\n  _context['->'].ast = [[],{},[],1]; // mark as macro\n\n  var sexpr = parse(_expr);\n  console.log(\"IN: \", sexpr);\n\n  /*\n  if (ctx.hasOwnProperty('where')){\n    console.log('W O W');\n  }\n  */\n\n  //      ->,     ->  c   \n  //      .from()\n  if (sexpr[0] !== '->') {\n    sexpr = ['->',sexpr];\n  }\n\n  //           .\n  //       : (seq sql(select() from()) sql(...) sql(...) )\n  // [\"seq\",[\"metrics\",\"a\",\"d\",[\"max\",\"c\"]],[\"where\"]]\n  // [\"seq\",[\"+\",[\"metrics\",\"a\",\"d\",[\"max\",\"c\"]]],[\"where\"]]\n\n  /*    IN:\n    metrics(a,d,max(c)).where(a>1 and i < 4).periods.where(a>4)\n    [\"seq\",[\"metrics\",\"a\",\"d\",[\"max\",\"c\"]],[\"where\",[\"and\",[\">\",\"a\",\"1\"],[\"<\",\"i\",\"4\"]]],\"periods\",[\"where\",[\">\",\"a\",\"4\"]]]\n    [\"seq\",[\"sql\",[\"select\",\"a\",\"d\",[\"max\",\"c\"]],[\"from\",\"metrics\"],[\"filter\",[\"and\",[\">\",\"a\",\"1\"],[\"<\",\"i\",\"4\"]]]],[\"sql\",[\"select\"],[\"from\",\"periods\"],[\"filter\",[\">\",\"a\",\"4\"]]]]\n  */\n\n  var sql = ['sql'];\n  var do_select_from = function(sel) {\n    if (!(sel instanceof Array)) {\n      sel = [sel];\n    }\n    var fr = sel[0];\n    var p = false;\n    if (fr != 'where' && fr != 'select' && fr != 'sort' && fr != 'filter' && fr != 'from') {\n      sel[0] = 'select';\n      p = true;\n    }\n    sql.push(sel);\n    if (p) {\n      sql.push([\"from\",fr]);\n    }\n    console.log(\"parse do_select_from: \", sql);\n  };\n\n  for (var i=1; i<sexpr.length; i++){\n    var expr = sexpr[i];\n    if (expr instanceof Array) {\n      // expr: [\"metrics\",\"a\",\"d\",[\"max\",\"c\"]]\n      if (expr[0] === 'order_by') {expr[0]='sort'};\n      if (expr[0] === 'where') {expr[0]='where'};\n      if ( expr[0] === '+' ){\n        // expr: [\"+\",[\"metrics\",\"a\",\"d\",[\"max\",\"c\"]]]\n        do_select_from(expr[1]);\n      } else if (_context[expr[0].toString()] === undefined) {\n        //   ...       ,\n        //   \n        // expr: [\"metrics\",\"a\",\"d\",[\"max\",\"c\"]]\n        do_select_from(expr);\n      } else {\n        sql.push(sexpr[i]);\n      }\n    } else if (_context[expr.toString()] === undefined) {\n      //   =  ...\n      // expr: \"metrics\"\n      do_select_from(expr);\n    } else {\n      throw('unexpected call: ' + JSON.stringify(expr));\n    }\n  }\n\n  console.log('parse: ', sql);\n\n  var ret = eval_lisp(sql, _context);\n  // console.log(\"parse: \", ret);\n\n  return ret;\n}\n\n\n\nexport function parse_sql_apidb_expr(_expr, _vars, _forced_table, _forced_where) {\n  var ctx = sql_context(_vars);\n  var _context = ctx;\n  // for(var key in _vars) _context[key] = _vars[key];\n\n  var sexpr = parse(_expr);\n  console.log(\"DBAPI IN: \", sexpr);\n\n  /*\n  if (ctx.hasOwnProperty('where')){\n    console.log('W O W');\n  }\n  */\n\n\n  //           .\n  //          sql()   select().from().where()\n  //  \n  // select(a,b) === select(a).select(b)\n  // order_by(a,b) === order_by(a).order_by(b)\n  // where(a>1).where(b<1) === where(a>1 and b<1)\n  // from(a).from(b).from(c) === from(c)\n  //      from,     !!!!\n\n  var sql = ['sql']; // wrapped by sql call...\n  var cache = {\"where\":[], \"select\":[], \"order_by\":[],\"from\":[]};\n  for (var i=1; i<sexpr.length; i++){\n    var expr = sexpr[i];\n    if (expr instanceof Array) {\n      var fr = expr[0];\n      if (fr != 'where' && fr != 'select' && fr != 'order_by' && fr != 'from' && fr != ':') {\n        throw('unexpected func: ' + JSON.stringify(fr));\n      }\n      // have no idea how to support aliases for selects...\n      if (fr === ':' && expr[1][0] === 'select') {\n        cache[\"select\"].push(expr[1]);\n      } else {\n        cache[fr].push(expr);\n      }\n    } else {\n      throw('unexpected literal: ' + JSON.stringify(expr));\n    }\n  }\n\n  if (_forced_table !== undefined) {\n    cache[fr].push([\"from\", _forced_table]);\n  }\n\n  var args = cache[\"select\"].map(ar => ar.slice(1));\n  var sel = [].concat.apply([\"select\"], args); //flat\n  sql.push(sel);\n\n  sql.push( cache[\"from\"].pop() );\n\n  args = cache[\"where\"].map(ar => ar.slice(1));\n  args = [].concat.apply([], args); //flat\n\n  var w = [\"()\", args[0]];\n  if (args.length > 1) {\n    for (var i=1; i<args.length; i++){\n      w = [\"and\", w, [\"()\", args[i]]];\n    }\n  }\n\n  sql.push([\"where\", w]);\n\n  console.log(\"WHERE\", JSON.stringify(w));\n\n  console.log('DBAPI parse: ', sql);\n\n  var ret = eval_lisp(sql, _context);\n\n  return ret;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/sql_context.js","import console from './console/console';\nimport {parse, LPESyntaxError} from './lpep';\nimport {eval_lisp, evaluate} from './lisp';\nimport {sql_where_context, eval_sql_where} from './sql_where';\nimport {sql_context, parse_sql_expr, parse_sql_apidb_expr} from './sql_context';\n\n\nfunction eval_lpe(lpe, ctx) {\n  const ast = parse(lpe);\n  return eval_lisp(ast, ctx);\n}\n\n\nexport {\n  parse,\n  LPESyntaxError,\n  evaluate,                         // deprecated\n  eval_lisp,\n  eval_lpe,\n  eval_sql_where,\n  parse_sql_expr,\n  parse_sql_apidb_expr,\n};\n\n\n\n// test:\n// var ast = parse('2+2*2');\n// console.log(ast);\n// var res = evaluate(ast, []);\n// console.log(res);\n\n// test:\n// var result = eval_sql_where(\"where(id=[1,2,3,4] and metric.tree_level(id) = 3 and max(id)=now() and $metric_id = 3)\", {\"$metric_id\":\"COOL\",\"id\":\"ID\"});\n// console.log(result);\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","\n// http://javascript.crockford.com/tdop/tdop.html\n\n// 2010-02-23\n\n// (c) 2006 Douglas Crockford\n\n// Produce an array of simple token objects from a string.\n// A simple token object contains these members:\n//      type: 'name', 'string', 'number', 'operator'\n//      value: string or number value of the token\n//      from: index of first character of the token\n//      to: index of the last character + 1\n\n// Comments of the // type are ignored.\n\n// Operators are by default single characters. Multicharacter\n// operators can be made by supplying a string of prefix and\n// suffix characters.\n// characters. For example,\n//      '<>+-&', '=>&:'\n// will match any of these:\n//      <=  >>  >>>  <>  >=  +: -: &: &&: &&\n\nimport console from './console/console';\n\n\nconst isDigit = (c) => (c >= '0' && c <= '9');\nconst isLetter = (c) => (c >= 'a' && c <= 'z') || (c >= 'A' && c <= 'Z');\n\n\n// Transform a token object into an exception object and throw it.\nexport function LPESyntaxError(message) {\n  this.constructor.prototype.__proto__ = Error.prototype;\n  Error.call(this);\n  Error.captureStackTrace(this, this.constructor);\n  this.name = this.constructor.name;\n  this.message = message;\n  // this.stack = (new Error()).stack;\n}\n\n\nexport function makeError(t, message) {\n  t.message = message;\n\n  const errorDescription = JSON.stringify(\n      t,\n      ['name', 'message', 'from', 'to', 'key', 'value', 'arity', 'first', 'second', 'third', 'fourth'],\n      4);\n\n  throw new LPESyntaxError(errorDescription);\n}\n\n\nexport function tokenize(s, prefix = '<>+-&', suffix = '=>&:') {\n  let c;                      // The current character.\n  let from;                   // The index of the start of the token.\n  let i = 0;                  // The index of the current character.\n  let length = s.length;\n  let n;                      // The number value.\n  let q;                      // The quote character.\n  let str;                    // The string value.\n  let result = [];            // An array to hold the results.\n  const make = (type, value) => ({type, value, from, to: i});                   // Make a token object.\n\n  // If the source string is empty, return nothing.\n  if (!s) {\n    return [];\n  }\n\n  // Loop through this text, one character at a time.\n  c = s.charAt(i);\n  while (c) {\n    from = i;\n\n    // Ignore whitespace.\n    if (c <= ' ') {\n      i += 1;\n      c = s.charAt(i);\n\n    // name.\n    } else if (isLetter(c) || c === '_' || c === '$' || c === '#') {                         // first char of name. TODO: remove #\n      str = c;\n      i += 1;\n      for (;;) {\n        c = s.charAt(i);\n        if (isLetter(c) || isDigit(c) || c === '_' || c === '$') {\n          str += c;\n          i += 1;\n        } else {\n          break;\n        }\n      }\n\n      result.push(make('name', str));\n    // number.\n\n    // A number cannot start with a decimal point. It must start with a digit,\n    // possibly '0'.\n\n    } else if (c >= '0' && c <= '9') {\n      str = c;\n      i += 1;\n\n      // Look for more digits.\n\n      for (;;) {\n        c = s.charAt(i);\n        if (c < '0' || c > '9') {\n          break;\n        }\n        i += 1;\n        str += c;\n      }\n\n      // Look for a decimal fraction part.\n\n      if (c === '.') {\n        i += 1;\n        str += c;\n        for (;;) {\n          c = s.charAt(i);\n          if (c < '0' || c > '9') {\n            break;\n          }\n          i += 1;\n          str += c;\n        }\n      }\n\n      // Look for an exponent part.\n      if (c === 'e' || c === 'E') {\n        i += 1;\n        str += c;\n        c = s.charAt(i);\n        if (c === '-' || c === '+') {\n          i += 1;\n          str += c;\n          c = s.charAt(i);\n        }\n        if (c < '0' || c > '9') {\n          makeError(make('number', str), \"Bad exponent\");\n        }\n        do {\n          i += 1;\n          str += c;\n          c = s.charAt(i);\n        } while (c >= '0' && c <= '9');\n      }\n\n      // Make sure the next character is not a letter.\n\n      if (c >= 'a' && c <= 'z') {\n                str += c;\n                i += 1;\n                makeError(make('number', str), \"Bad number\");\n      }\n\n      // Don't convert the string value to a number. If it is finite, then it is a good\n      // token.\n      // result.push(make('number', parseFloat(str)));\n      // result.push(make('number', str));\n\n      \n      n = +str;\n      if (isFinite(n)) {\n        result.push(make('number', n));\n      } else {\n        makeError(make('number', str), \"Bad number\");\n      }\n      \n\n    // string\n\n    } else if (c === '\\'' || c === '\"') {\n      str = '';\n      q = c;\n      i += 1;\n      for (;;) {\n        c = s.charAt(i);\n        if (c < ' ') {\n          // make('string', str).error(c === '\\n' || c === '\\r' || c === '' ?\n          //     \"Unterminated string.\" :\n          //     \"Control character in string.\", make('', str));\n          makeError(make('', str) || make(q==='\"'?'string_double':'string_single', str),\n                    c === '\\n' || c === '\\r' || c === '' ?\n                         \"Unterminated string.\" :\n                         \"Control character in string.\");\n        }\n\n        // Look for the closing quote.\n\n        if (c === q) {\n          break;\n        }\n\n        // Look for escapement.\n\n        if (c === '\\\\') {\n          i += 1;\n          if (i >= length) {\n            makeError(make(q==='\"'?'string_double':'string_single', str), \"Unterminated string\");\n          }\n          c = s.charAt(i);\n          switch (c) {\n          case 'b':\n            c = '\\b';\n            break;\n          case 'f':\n            c = '\\f';\n            break;\n          case 'n':\n            c = '\\n';\n            break;\n          case 'r':\n            c = '\\r';\n            break;\n          case 't':\n            c = '\\t';\n            break;\n          case 'u':\n            if (i >= length) {\n              makeError(make(q==='\"'?'string_double':'string_single', str), \"Unterminated string\");\n            }\n            c = parseInt(s.substr(i + 1, 4), 16);\n            if (!isFinite(c) || c < 0) {\n              makeError(make(q==='\"'?'string_double':'string_single', str), \"Unterminated string\");\n            }\n            c = String.fromCharCode(c);\n            i += 4;\n            break;\n          }\n        }\n        str += c;\n        i += 1;\n      }\n      i += 1;\n      result.push(make(q==='\"'?'string_double':'string_single', str));\n      c = s.charAt(i);\n\n    // comment.\n    } else if (c === '/' && s.charAt(i + 1) === '/') {\n      i += 1;\n      for (;;) {\n        c = s.charAt(i);\n        if (c === '\\n' || c === '\\r' || c === '') {\n          break;\n        }\n        i += 1;\n      }\n\n    // combining\n\n    } else if (prefix.indexOf(c) >= 0) {\n      str = c;\n      i += 1;\n      while (true) {\n        c = s.charAt(i);\n        if (i >= length || suffix.indexOf(c) < 0) {\n          break;\n        }\n        str += c;\n        i += 1;\n      }\n      result.push(make('operator', str));\n\n   // single-character operator\n    } else {\n      i += 1;\n      result.push(make('operator', c));\n      c = s.charAt(i);\n    }\n  }\n  return result;\n}\n\nexport default tokenize;\n\n\n\n// WEBPACK FOOTER //\n// ./src/lpel.js","\nexport function db_quote_literal(intxt) {\n     return \"'\" + intxt.toString().replace(/\\'/g , \"''\") + \"'\";\n} \n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/utils.js"],"sourceRoot":""}