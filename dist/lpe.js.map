{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 36eb71a25dd3d98d2b0c","webpack:///./src/console/console.js","webpack:///./src/lisp.js","webpack:///./src/lpep.js","webpack:///./src/sql_where.js","webpack:///./src/sql_context.js","webpack:///./src/index.js","webpack:///./src/lpel.js","webpack:///./src/utils/utils.js"],"names":["console","isArray","arg","Object","prototype","toString","call","isString","isNumber","isHash","isFunction","$var$","ctx","varName","value","theCtx","result","undefined","length","makeMacro","fn","ast","isMacro","makeLetBindings","rs","EVAL","forEach","pair","Error","SPECIAL_FORMS","slice","macroexpand","reduce","acc","astItem","f","push","eval_ast","obj","propertyName","methodName","args","apply","e","errCtx","env_bind","some","a","every","STDLIB","Array","Date","JSON","v","b","i","bind","map","c","k","el","RegExp","parse","stringify","hasOwnProperty","x","join","keys","values","arr","splice","concat","eval_context","eval","minimal","resolveString","exprs","newCtx","op","init_lisp","val","eval_lisp","evaluate","make_parse","symbol_table","token","tokens","token_nr","expr_scope","pop","operator_aliases","operator_alias","from","to","itself","scope","find","n","o","s","create","original_symbol","nud","led","lbp","expr_logical_scope","parent","tp","expr_lpe_scope","new_expression_scope","advance","id","t","makeError","type","arity","sexpr","statement","std","expression","statements","rbp","left","symbol","bp","infix","first","right","second","infixr","prefix","expr","comma","third","lift_funseq","node","lift_funseq_2","source","parser","str","parseResult","err","error","message","stack","sql_where_context","_vars","_context","try_to_quote_column","colname","h","try_to_quote_order_by_column","log","resolve_literal","lit","resolve_order_by_literal","ret","key","arguments","cnt","period_type","pt","test","reg","replace","regExp","prnt","ar","match","argel","l","r","inexpr","sql","id_val","res_json","plv8","execute","frst","axis_condition","split","e2","indexOf","substr","fts","tree","ilike","col","ac","eval_sql_where","_expr","predicate","TypeError","list","thisArg","sql_context","q","find_part","p","sel","where","srt","parse_sql_expr","do_select_from","fr","parse_sql_apidb_expr","_forced_table","_forced_where","cache","w","eval_lpe","lpe","isDigit","LPESyntaxError","constructor","__proto__","captureStackTrace","name","errorDescription","tokenize","suffix","make","charAt","isFinite","parseInt","String","fromCharCode","db_quote_literal","intxt"],"mappings":"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","file":"lpe.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"lpe\"] = factory();\n\telse\n\t\troot[\"lpe\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 36eb71a25dd3d98d2b0c","\nexport default console;\n\n\n// WEBPACK FOOTER //\n// ./src/console/console.js","/**\n *  miniMAL lisp interpreter\n *  Copyright (C) 2014 Joel Martin\n *  Licensed under MPL 2.0\n *  https://github.com/kanaka/mal\n * \n */\n/**\n *  The code has been reworked to suite LuxmsBI needs\n *  by esix & Dmitry Dorofeev\n *  2017-2019\n */\n\nimport console from './console/console';\n\n\nconst isArray = (arg) => Object.prototype.toString.call(arg) === '[object Array]';\nconst isString = (arg) => (typeof arg === 'string');\nconst isNumber = (arg) => (typeof arg === 'number');\nconst isHash = (arg) => (typeof arg === 'object') && (arg !== null) && !isArray(arg);\nconst isFunction = (arg) => (typeof arg === 'function');\n\n\n/**\n * Get or Set variable in context\n * @param {*} ctx - array, hashmap or function that stores variables \n * @param {*} varName - the name of variable\n * @param {*} value - optional value to set (undefied if get)\n */\nfunction $var$(ctx, varName, value) {\n  if (isArray(ctx)) {                                                           // contexts chain\n    for (let theCtx of ctx) {\n      const result = $var$(theCtx, varName);\n      if (result === undefined) continue;                                       // no such var in context\n      if (value === undefined) return result;                                   // get => we've got a result\n      return $var$(theCtx, varName, value);                                     // set => redirect 'set' to context with variable.\n    }\n    if (value === undefined) return undefined;                                  // get => variable not found in all contexts\n    if (ctx.length) $var$(ctx[0], varName, value);                              // set => set variable to HEAD context\n    return undefined;                                                           // ??? ctx.length = 0\n  }\n  \n  if (isFunction(ctx)) return ctx(varName, value);\n\n  if (isHash(ctx)) {\n    return (value === undefined) ? ctx[varName] : (ctx[varName] = value);\n  }\n\n  return undefined;\n}\n\n\nfunction makeMacro(fn, ast) {\n  fn.ast = ast || [[], {}, [], 1]; // mark as macro\n  return fn;\n}\n\nfunction isMacro(fn) {\n  if (!isFunction(fn)) return false;\n  if (!isArray(fn.ast)) return false;\n  return !!fn.ast[3];\n}\n\n\nfunction makeLetBindings(ast, ctx, rs) {\n  let result = {};\n  if (isHash(ast)) {\n    for (let varName in ast) {\n      result[varName] = EVAL(ast[varName], ctx, rs);\n    }\n  } else if (isArray(ast) && isString(ast[0])) {\n    result[ast[0]] = EVAL(ast[1], ctx, rs);\n  } else if (isArray(ast)) {\n    ast.forEach(pair => result[pair[0]] = EVAL(pair[1], ctx, rs));\n  } else if (isFunction(ast)) {\n    return ast;\n  } else {\n    throw new Error('LISP: let expression invalid form in ' + ast);\n  }\n  return result;\n}\n\n\nconst SPECIAL_FORMS = {                                                         // built-in special forms\n  'let': (ast, ctx, rs) => EVAL(['begin', ...ast.slice(1)], [makeLetBindings(ast[0], ctx, rs), ctx], rs),\n  '`': (ast, ctx) => ast[0],                                                    // quote\n  'macroexpand': macroexpand,\n  'begin': (ast, ctx) => ast.reduce((acc, astItem) => EVAL(astItem, ctx), null),\n  'do': (ast, ctx) => { throw new Error('DO not implemented') },\n  'if': (ast, ctx, rs) => {\n    return EVAL(ast[0], ctx, false) ? EVAL(ast[1], ctx, rs) : EVAL(ast[2], ctx, rs);\n  },\n  '~': (ast, ctx, rs) => {                                                      // mark as macro\n    const f = EVAL(ast[0], ctx, rs);                                            // eval regular function\n    f.ast.push(1); // mark as macro\n    return f;\n  },\n  '.-': (ast, ctx, rs) => {                                                     // get or set attribute\n    const [obj, propertyName, value] = eval_ast(ast, ctx, rs);\n    return (value !== undefined) ? (obj[propertyName] = value) : obj[propertyName];\n  },\n  '.': (ast, ctx, rs) => {                                                      // call object method\n    const [obj, methodName, ...args] = eval_ast(ast, ctx, rs);\n    const fn = obj[methodName];\n    return fn.apply(obj, args);\n  },\n  'try': (ast, ctx, rs) => {                                                    // try/catch\n    try {\n      return EVAL(ast[0], ctx, rs);\n    } catch (e) {\n      const errCtx = env_bind([ast[1][0]], ctx, [e]);\n      return EVAL(ast[1][1], errCtx, rs);\n    }\n  },\n  '||': (ast, ctx, rs) => ast.some(a => !!EVAL(a, ctx, rs)),                    // logical or\n  '&&': (ast, ctx, rs) => ast.every(a => !!EVAL(a, ctx, rs)),                   // logical and\n  'fn': (ast, ctx, rs) => {                                                     // define new function (lambda)\n    const f = (...args) => EVAL(ast[1], env_bind(ast[0], ctx, args), rs);\n    f.ast = [ast[1], ctx, ast[0]];                                              // f.ast compresses more than f.data\n    return f;\n  },\n  'def': (ast, ctx, rs) => {                                                    // update current environment\n    const value = EVAL(ast[1], ctx, rs);\n    const result = $var$(ctx, ast[0], value);\n    return result;\n  },\n};\n\n\nconst STDLIB = {\n  // built-in constants\n  '#t': true,\n  '#f': false,\n  'NIL': null,\n  'null': null,                                                                 // js specific\n  'true': true,\n  'false': false,\n  'Array': Array,                                                               // TODO: consider removing these properties\n  'Object': Object,\n  'Date': Date,\n  'console': console,\n  'JSON': JSON,\n\n  // built-in function\n  '=': (...args) => args.every(v => v === args[0]),\n  '+': (...args) => args.reduce((a, b) => a + b),\n  '-': (...args) => args.length === 1 ? -args[0] : args.reduce((a, b) => a - b),\n  '*': (...args) => args.reduce((a, b) => a * b),\n  '/': (...args) => args.length === 1 ? 1 / args[0] : args.reduce((a, b) => a / b),\n  '<': (...args) => args.every((v, i) => i === 0 ? true : args[i-1] < args[i]),\n  '>': (...args) => args.every((v, i) => i === 0 ? true : args[i-1] > args[i]),\n  '<=': (...args) => args.every((v, i) => i === 0 ? true : args[i-1] <= args[i]),\n  '>=': (...args) => args.every((v, i) => i === 0 ? true : args[i-1] >= args[i]),\n  '!=': (...args) => !args.every(v => v === args[0]),\n  'not': a => !a,\n  'isa': (a, b) => a instanceof b,\n  'type': a => typeof a,\n  'new': (...args) => {\n    debugger;\n    return new (args[0].bind.apply(args[0], args));\n  },\n  'del': (a, b) => delete a[b],\n  'list': (...args) => args,\n  'vector': (...args) => args,\n  '[': (...args) => args,\n  'map': (a, b) => b.map(a),\n  'throw': a => { throw(a) },\n  'identity': a => a,\n  'pluck': (c, k) => c.map(el => el[k]),                                        // for each array element, get property value, present result as array.\n  'RegExp': (...args) => RegExp.apply(RegExp, args),\n  'read-string': a => JSON.parse(a),\n  'rep': (a) => JSON.stringify(EVAL(JSON.parse(a), STDLIB)),                    // TODO: fix ctx and rs arguments\n  'null?': (a) => a === null || a === undefined,                                // ??? add [] ???\n  'true?': (a) => a === true,\n  'false?': (a) => a === false,\n  'string?': isString,\n  'list?': isArray,\n  'contains?': (a, b) =>  a.hasOwnProperty(b),\n  'str': (...args) => args.map(x => isString(x) ? x : JSON.stringify(x)).join(''),\n  'count': (a) => a.length,\n  'get': (a, b) => a.hasOwnProperty(b) ? a[b] : undefined,\n  'set': (a, b, c) => (a[b] = c, a),\n  'keys': (a) => Object.keys(a),\n  'vals': (a) => Object.values(a),\n\n  // not implemented yet\n  // 'hash-table->alist'\n\n  // macros\n  '\\'': makeMacro(a => a.toString()),\n  '\"': makeMacro(a => a.toString()),\n  '()': makeMacro((...args) => args),                                           // ???\n  '->': makeMacro((acc, ...ast) => {                                            // thread first macro\n    //     ->\n    //   : https://clojuredocs.org/clojure.core/-%3E%3E\n    for (let arr of ast) {\n      if (!isArray(arr)) {\n        arr = [\".-\", acc, arr];                                                 //            ....\n      } else if (arr[0] === \"()\" && arr.length === 2 && (isString(arr[1]) || isNumber(arr[1]))) {\n        arr = [\".-\", acc, arr[1]];\n      } else {\n        arr.splice(1, 0, acc);                                                  //  \"\"      ...  thread first\n      }\n      acc = arr;\n    }\n    return acc;\n  }),\n  '->>': makeMacro((acc, ...ast) => {                                           // thread last macro\n    //     ->>\n    //   : https://clojuredocs.org/clojure.core/-%3E%3E\n    for (let arr of ast) {\n      arr.push(acc);\n      acc = arr;\n    }\n    return acc;\n  }),\n  'invoke': makeMacro((...ast) => {\n    ///       LPE    ,       ->\n    ///        invoke -      .\n    /// invoke    ->\n    ast.splice(0, 0, \".\");\n    return ast;\n  }),\n  'and': makeMacro((...ast) => {\n    if (ast.length === 0) return true;\n    if (ast.length === 1) return ast[0];\n    return [\"let\", [\"__and\", ast[0]],\n                   [\"if\", \"__and\",\n                          [\"and\"].concat(ast.slice(1)),\n                          \"__and\"]];\n  }),\n  'or': makeMacro((...ast) => {\n    if (ast.length === 0) return false;\n    if (ast.length === 1) return ast[0];\n    return [\"let\", [\"__or\", ast[0]],\n                   [\"if\", \"__or\",\n                          \"__or\",\n                          [\"or\"].concat(ast.slice(1))]];\n  }),\n\n\n  // system functions & objects\n  // 'js': eval,\n  eval_context: eval_context,                           // TODO: remove\n  eval: (a) => EVAL(a, STDLIB),\n};\n\n\nvar minimal = [\"begin\",\n  [\"def\", \"del\", [\"fn\", [\"a\", \"b\"],\n    [\".\", \"Reflect\", [\"`\", \"deleteProperty\"], \"a\", \"b\"]]],\n  [\"def\", \"map\", [\"fn\", [\"a\", \"b\"],\n    [\".\", \"b\", [\"`\", \"map\"], [\"fn\", [\"x\"], [\"a\", \"x\"]]]]],\n  [\"def\", \"classOf\", [\"fn\", [\"a\"],\n    [\".\", [\".-\", [\".-\", \"Object\", [\"`\", \"prototype\"]], [\"`\", \"toString\"]],\n      [\"`\", \"call\"], \"a\"]]],\n\n  [\"def\", \"pr-str\", [\"fn\", [\"&\", \"a\"],\n    [\".\", [\"map\", [\".-\", \"JSON\", [\"`\", \"stringify\"]], \"a\"],\n      [\"`\", \"join\"], [\"`\", \" \"]]]],\n\n  [\"def\", \"prn\", [\"fn\", [\"&\", \"a\"],\n    [\"begin\",\n      [\".\", \"console\", [\"`\", \"log\"],\n          [\".\", [\"map\", [\".-\", \"JSON\", [\"`\", \"stringify\"]], \"a\"],\n        [\"`\", \"join\"], [\"`\", \" \"]]],\n      null]]],\n  [\"def\", \"println\", [\"fn\", [\"&\", \"a\"],\n    [\"begin\", [\".\", \"console\", [\"`\", \"log\"],\n      [\".\", [\"map\", [\"fn\", [\"x\"],\n        [\"if\", [\"string?\", \"x\"],\n          \"x\",\n          [\".\", \"JSON\", [\"`\", \"stringify\"], \"x\"]]],\n        \"a\"],\n        [\"`\", \"join\"], [\"`\", \" \"]]],\n      null]]],\n\n  [\"def\", \"cons\", [\"fn\", [\"a\", \"b\"],\n    [\".\", [\"`\", []],\n      [\"`\", \"concat\"], [\"list\", \"a\"], \"b\"]]],\n  [\"def\", \"concat\", [\"fn\", [\"&\", \"a\"],\n    [\".\", [\".-\", [\"list\"], [\"`\", \"concat\"]],\n      [\"`\", \"apply\"], [\"list\"], \"a\"]]],\n  [\"def\", \"nth\", \"get\"],\n  [\"def\", \"first\", [\"fn\", [\"a\"],\n    [\"if\", [\">\", [\".-\", \"a\", [\"`\", \"length\"]], 0],\n      [\"nth\", \"a\", 0],\n      null]]],\n  [\"def\", \"last\", [\"fn\", [\"a\"],\n    [\"nth\", \"a\", [\"-\", [\".-\", \"a\", [\"`\", \"length\"]], 1]]]],\n\n  [\"def\", \"empty?\", [\"fn\", [\"a\"],\n    [\"if\", [\"list?\", \"a\"],\n      [\"=\", 0, [\".-\", \"a\", [\"`\", \"length\"]]],\n      [\"=\", \"a\", null]]]],\n  [\"def\", \"slice\", [\"fn\", [\"a\", \"b\", \"&\", \"end\"],\n    [\".\", \"a\", [\"`\", \"slice\"], \"b\",\n      [\"if\", [\">\", [\".-\", \"end\", [\"`\", \"length\"]], 0],\n        [\"get\", \"end\", 0],\n        [\".-\", \"a\", [\"`\", \"length\"]]]]]],\n  [\"def\", \"rest\", [\"fn\", [\"a\"], [\"slice\", \"a\", 1]]],\n\n  [\"def\", \"apply\", [\"fn\", [\"f\", \"&\", \"b\"],\n    [\".\", \"f\", [\"`\", \"apply\"], \"f\",\n      [\"concat\", [\"slice\", \"b\", 0, -1], [\"last\", \"b\"]]]]],\n\n  null\n];\n\nEVAL(minimal, STDLIB);\n\n\nfunction macroexpand(ast, ctx, resolveString = true) {\n  while (true) {\n    if (!isArray(ast)) break;\n    if (!isString(ast[0])) break;\n\n    const v = $var$(ctx, ast[0]);\n    if (!isFunction(v)) break;\n\n    if (!isMacro(v)) break;\n\n    ast = v.apply(v, ast.slice(1));                                             //  ! 3-     1  push\n  }\n  return ast;\n}\n\n\n/**\n * Return new ctx with symbols in ast bound to\n * corresponding values in exprs\n * @param ast\n * @param ctx\n * @param exprs\n * @returns {*[]}\n */\nfunction env_bind(ast, ctx, exprs) {\n  let newCtx = {};\n  for (var i = 0; i < ast.length; i++) {\n    if (ast[i] === \"&\") {\n      // variable length arguments\n      newCtx[ast[i + 1]] = Array.prototype.slice.call(exprs, i);\n      break;\n    } else {\n      newCtx[ast[i]] = exprs[i];\n    }\n  }\n  return [newCtx, ctx];\n}\n\n\nfunction eval_ast(ast, ctx, resolveString = true) {\n  if (isArray(ast)) {                                                           // list?\n    return ast.map(e => EVAL(e, ctx, resolveString));\n  }\n\n  if (isString(ast)) {\n    const value = $var$(ctx, ast);\n\n    if (value !== undefined) {                                                  // variable\n      return value;\n    }\n\n    return resolveString ? ast : undefined;                                     // if string and not in ctx:\n  }\n\n  return ast;\n}\n\n\nfunction EVAL(ast, ctx, resolveString = true) {\n  while (true) {\n    if (!isArray(ast)) {\n      return eval_ast(ast, ctx, resolveString);\n    }\n\n    // apply\n    ast = macroexpand(ast, ctx);\n    if (!Array.isArray(ast)) return ast;                                        // do we need eval here?\n    if (ast.length === 0) return null;                                          // [] => empty list (or, maybe return vector [])\n\n    const op = ast[0];\n\n    if (isString(op) && (op in SPECIAL_FORMS)) {\n      return SPECIAL_FORMS[op](ast.slice(1), ctx, resolveString);\n    }\n\n    const el = ast.map(ast => EVAL(ast, ctx, resolveString));\n    const f = el[0];\n    if (f.ast) {\n      ast = f.ast[0];\n      ctx = env_bind(f.ast[2], f.ast[1], el.slice(1));                          // TCO\n    } else {\n      return f.apply(f, el.slice(1));\n    }\n  }\n} // EVAL\n\n\nfunction eval_context(ast, ctx) {\n  const result = EVAL(ast, [ctx || {}, STDLIB]);\n  return result;\n}\n\n\n// Use with care\nexport function init_lisp(ctx) {\n  ctx = [ctx || {}, STDLIB];\n  return {\n    eval: (ast) => eval_context(ast, ctx),\n    val: (varName, value) => $var$(ctx, varName, value),\n  }\n}\n\n\nexport function eval_lisp(ast, ctx) {\n  const result = eval_context(ast, ctx);\n\n  if (isFunction(result)) {\n    return '[\"function\"]';\n  } else {\n    return result;\n  }\n}\n\n\nexport function evaluate(ast, ctx) {\n  return eval_lisp(ast, ctx);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lisp.js","/**\n * LuxPath expressions parser\n *\n * VERSION: 1.0.1\n * \n * DVD: added sexpr property to the token as array to keep s-expressions.\n *      arity and first, second etc will be removed\n * \n */\n\n// Parser for Simplified JavaScript written in Simplified JavaScript\n// From Top Down Operator Precedence\n// http://javascript.crockford.com/tdop/index.html\n// Douglas Crockford\n// 2010-06-26\n//////////////////////////////////////////////////\n// Later hacked to parse LPE instead of JavaScript\n// Dmitry Dorofeev\n// 2017-01-20\n\n\nimport console from './console/console';\nimport {tokenize, makeError, LPESyntaxError} from './lpel';\n\n\nvar make_parse = function () {\n  var symbol_table = {};\n  var token;\n  var tokens;\n  var token_nr;\n\n  //    \n  var expr_scope = { pop: function () {}}; //      (A and B or C)\n\n  //     \n  var operator_aliases = {};\n\n  var operator_alias = function(from, to) {\n    operator_aliases[from] = to;\n  };\n\n  var itself = function () {\n    return this;\n  };\n\n  let scope = {\n    find: function (n) {\n      var e = this, o;\n      var s = Object.create(original_symbol);\n      s.nud      = itself;\n      s.led      = null;\n      s.lbp      = 0;\n      return s;\n    },\n  };\n\n  var expr_logical_scope = {\n    pop: function () {\n      expr_scope = this.parent;\n    },\n    parent: null,\n    tp: \"logical\"\n  };\n\n  var expr_lpe_scope = {\n    pop: function () {\n      expr_scope = this.parent;\n    },\n    parent: null,\n    tp: \"lpe\"\n  };\n\n  var new_expression_scope = function (tp) {\n    var s = expr_scope;\n    expr_scope = Object.create(tp == \"logical\"?expr_logical_scope:expr_lpe_scope);\n    expr_scope.parent = s;\n    return expr_scope;\n  };\n\n  var advance = function (id) {\n    var a, o, t, v;\n    if (id && token.id !== id) {\n      makeError(token, \"Got \" + token.value + \" but expected '\" + id + \"'.\");\n    }\n    if (token_nr >= tokens.length) {\n      token = symbol_table[\"(end)\"];\n      return;\n    }\n    t = tokens[token_nr];\n    token_nr += 1;\n    v = t.value;\n    a = t.type;\n\n    if (a === \"name\") {\n\n      if (v === 'true' || v === 'false' || v === 'null') {\n        o = symbol_table[v];\n        a = \"literal\";\n      } else if (expr_scope.tp == \"logical\") {\n        if (v === \"or\" || v === \"and\" || v === \"not\" || v === \"in\" || v === \"is\") {\n          a = \"operator\";\n          o = symbol_table[v];\n          if (!o) {\n            makeError(t, \"Unknown logical operator.\");\n          }\n        } else {\n          o = scope.find(v);\n        }\n      } else {\n        o = scope.find(v);\n      }\n    } else if (a === \"operator\") {\n      o = symbol_table[v];\n      if (!o) {\n        makeError(t, \"Unknown operator.\");\n      }\n    } else if (a === \"string_double\") {\n      o = symbol_table[\"(string_literal_double)\"];\n      a = \"literal\";\n    } else if (a === \"string_single\") {\n      o = symbol_table[\"(string_literal_single)\"];\n      a = \"literal\";\n    } else if (a === \"number\") {\n      o = symbol_table[\"(number_literal)\"];\n      a = \"literal\";\n    } else {\n      makeError(t, \"Unexpected token.\");\n    }\n    token = Object.create(o);\n    token.from = t.from;\n    token.to = t.to;\n    token.value = v;\n    token.arity = a;\n    if (a == \"operator\") {\n      token.sexpr = operator_aliases[v];\n    } else {\n      token.sexpr = v; // by dima\n    }\n    return token;\n  };\n\n  var statement = function () {\n    var n = token, v;\n\n    if (n.std) {\n        advance();\n        //scope.reserve(n);\n        return n.std();\n    }\n    v = expression(0);\n    //if (!v.assignment && v.id !== \"(\") {\n    /*  if (v.id !== \"(\" && v.id !== \"name\" && v.id !== \"number\") {\n        console.log(v);\n        v.error(\"Bad expression statement.\");\n    }*/\n    //advance(\";\");\n    return v;\n  };\n\n  var statements = function () {\n    var a = [], s;\n    while (true) {\n        //console.log(token);\n        if ( token.id === \"(end)\") {\n            break;\n        } else if(token.value === ';'){\n          // skip optional ;\n           advance();\n        }\n        s = statement();\n        //console.log(\"STATEMENT \", s);\n        if (s) {\n            a.push(s);\n        }\n    }\n    return a.length === 0 ? null : a.length === 1 ? a[0]: {\"sexpr\": [\"begin\"].concat(a.map(function(el){return el[\"sexpr\"];}))};\n  };\n\n  var expression = function (rbp) {\n    var left;\n    var t = token;\n    advance();\n    left = t.nud();\n    while (rbp < token.lbp) {\n      t = token;\n      advance();\n      left = t.led(left);\n    }\n    return left;\n  };\n\n  var original_symbol = {\n    nud: function () {\n      makeError(this, \"Undefined.\");\n    },\n    led: function (left) {\n      makeError(this, \"Missing operator.\");\n    }\n  };\n\n  var symbol = function (id, bp) {\n    var s = symbol_table[id];\n    bp = bp || 0;\n    if (s) {\n      if (bp >= s.lbp) {\n        s.lbp = bp;\n      }\n    } else {\n      s = Object.create(original_symbol);\n      s.id = s.value = id;\n      s.lbp = bp;\n      symbol_table[id] = s;\n    }\n    operator_alias(id, id);\n    return s;\n  };\n\n  var infix = function (id, bp, led) {\n    var s = symbol(id, bp);\n    s.led = led || function (left) {\n      this.first = left;\n      var right = expression(bp);\n      this.second = right;\n      this.arity = \"binary\";\n      this.sexpr = [this.sexpr, left.sexpr, right.sexpr];\n      return this;\n    };\n    return s;\n  };\n\n  var infixr = function (id, bp, led) {\n    var s = symbol(id, bp);\n    s.led = led || function (left) {\n      this.first = left;\n      var right = expression(bp - 1);\n      this.second = right;\n      this.arity = \"binary\";\n      this.sexpr = [this.sexpr, left.sexpr, right.sexpr];\n      return this;\n    };\n    return s;\n  };\n\n  var prefix = function (id, nud) {\n    var s = symbol(id);\n    s.nud = nud || function () {\n      // scope.reserve(this);\n      var expr = expression(70);\n      this.first = expr;\n      this.arity = \"unary\";\n      this.sexpr = [this.sexpr, expr.sexpr];\n      return this;\n    };\n    return s;\n  };\n\n  symbol(\"(end)\");\n  symbol(\"(name)\");\n  symbol(\"(null)\");\n  symbol(\":\");\n  symbol(\";\");\n  symbol(\")\");\n  symbol(\"]\");\n  symbol(\"}\");\n\n  symbol(\"true\").nud = function () { this.sexpr = true; return this; };\n  symbol(\"false\").nud = function () { this.sexpr = false; return this; };\n  symbol(\"null\").nud = function () { this.sexpr = null; return this; };\n\n  // allow to skip values in function calls....\n  var comma = symbol(\",\");\n\n  symbol(\"(string_literal_double)\").nud = function() {\n    this.first = '\"';\n    this.arity = \"unary\";\n    this.sexpr = ['\"', this.sexpr];\n    return this;\n  };\n\n  symbol(\"(string_literal_single)\").nud = function() {\n    this.first = \"'\";\n    this.arity = \"unary\";\n    this.sexpr = [\"'\", this.sexpr];\n    return this;\n  };\n\n  symbol(\"(number_literal)\").nud = itself;\n\n  infix(\"?\", 20, function (left) {\n    // FIXME TODO - need sexpr !!!\n    this.first = left;\n    this.second = expression(0);\n    advance(\":\");\n    this.third = expression(0);\n    this.arity = \"ternary\";\n    return this;\n  });\n\n  infixr(\"&&\", 30);\n  infixr(\"\", 30);\n  operator_alias(\"&&\",\"and\");\n  operator_alias(\"\",\"and\");\n\n  infixr(\"||\", 30);\n  infixr(\"\", 30);\n\n  operator_alias(\"||\",\"or\");\n  operator_alias(\"\",\"or\");\n\n  /* will be used in logical scope */\n  infixr(\"and\", 30);\n  infixr(\"or\", 30);\n  // required for SQL logical scope where a in (1,2,3)\n  infixr(\"in\", 30);\n  infixr(\"is\", 30);\n  prefix(\"not\");\n\n  // for SQL types: '10'::BIGINT\n  infixr(\"::\", 90);\n\n  // for SQL as\n  infixr(\":\", 80);\n\n  infixr('~', 40);\n  infixr('!~', 40);\n  infixr('=', 40);\n  infixr('', 40);\n  operator_alias('', '!='); // from to canonical form;\n\n  infixr('==', 40);\n  infixr('!==', 40);\n  infixr('!=', 40);\n  infixr('<', 40);\n  infixr('<=', 40);\n  infixr('', 40);\n  operator_alias('', '<=');\n\n  infixr(\">\", 40);\n  infixr(\">=\", 40);\n  infixr(\"\", 40);\n  operator_alias(\"\",\">=\");\n  infixr(\"<>\", 40);\n\n  infix(\"+\", 50);\n  infix(\"-\", 50);\n\n  infix(\"*\", 60);\n  infix(\"/\", 60);\n\n  infix(\"(\", 80, function (left) {\n    var a = [];\n    if (left.id === \"[\") {\n          // FIXME TODO\n          this.arity = \"ternary\";\n          this.first = left.first;\n          this.second = left.second;\n          this.third = a;\n    } else {\n          this.arity = \"binary\";\n          this.first = left;\n          this.value = \"(\"; // it was '(' by dima\n          this.second = a;\n          if ((left.arity !== \"unary\" || left.id !== \"function\") &&\n              left.arity !== \"name\" && left.id !== \"(\" &&\n              left.id !== \"&&\" && left.id !== \"||\" && left.id !== \"?\") {\n            makeError(left, \"Expected a variable name.\");\n          }\n    }\n    // dima support for missed function arguments...\n    if (token.id !== \")\") {\n      if (false && left.value == \"where\") {\n        //    where - logical expression.\n        //       , and, or, not   ...\n        new_expression_scope(\"logical\");\n        var e = expression(0);\n        expr_scope.pop();\n        a.push(e);\n      } else {\n        new_expression_scope(\"lpe\");\n        while (true) {\n          // console.log(\">\" + token.arity + \" NAME:\" + left.value);\n          if (token.id === ',') {\n            a.push({\n              value: null,\n              arity: \"literal\"\n            });\n            advance();\n          } else if (token.id === ')') {\n            a.push({\n              value: null,\n              arity: \"literal\"\n            });\n            break;\n          } else {\n            new_expression_scope(\"logical\");\n            var e = expression(0);\n            expr_scope.pop();\n            // var e = statements();\n            a.push(e);\n            if (token.id !== \",\") {\n              break;\n            }\n            advance(\",\");\n          }\n        }\n        expr_scope.pop();\n      }\n    }\n\n    this.sexpr = [this.first.value].concat(a.map(function(el){return el.sexpr}));\n    advance(\")\");\n    return this;\n  });\n\n\n  function lift_funseq(node) {\n    if (node.value === \"->\") {\n      return lift_funseq(node.first).concat(lift_funseq(node.second));\n    } else if (node.value === \"()\") {\n      if (node.first.value === \"->\"){\n        //        \"->\",    \n        // if (true).(frst().second()) === if(true) => [->> [first] [second]]   , \n        //   seq     \n          return [[\"->\"].concat(lift_funseq(node.first.first)).concat(lift_funseq(node.first.second))];\n      } else {\n          return lift_funseq(node.first);\n      }\n    } else {\n      return [node.sexpr];\n    }\n  }\n\n  function lift_funseq_2(node) {\n    if (node.value === \"->>\") {\n      return lift_funseq(node.first).concat(lift_funseq(node.second));\n    } else if (node.value === \"()\") {\n      if (node.first.value === \"->>\"){\n        //        \"->\",    \n        // if (true).(frst().second()) === if(true) => [->> [first] [second]]   , \n        //   seq     \n          return [[\"->>\"].concat(lift_funseq(node.first.first)).concat(lift_funseq(node.first.second))];\n      } else {\n          return lift_funseq(node.first);\n      }\n    } else {\n      return [node.sexpr];\n    }\n  }\n\n  infix(\".\", 70, function (left) {\n    this.first = left;\n    // this.second = expression(0);\n    this.second = expression(70);\n    this.arity = \"binary\";\n    this.value = \"->\";\n    this.sexpr = [\"->\"].concat(lift_funseq(this));\n    return this;\n  });\n\n  infix(\"..\", 70, function (left) {\n    this.first = left;\n    // this.second = expression(0);\n    this.second = expression(70);\n    this.arity = \"binary\";\n    this.value = \"->>\";\n    this.sexpr = [\"->>\"].concat(lift_funseq_2(this));\n    return this;\n  });\n\n  // WARNING HACK FIXME DIMA -    order_by(+a)\n  //    /table  +table  htSQL\n  prefix(\"+\");\n\n  prefix(\"!\");\n  prefix(\"not\"); // will be used in logical scope\n  prefix(\"\");\n  operator_alias(\"!\", \"not\");\n  operator_alias(\"\", \"not\");\n\n  // trying to optimize, when we have negated -number\n  prefix(\"-\");\n\n  prefix(\".\",function () {\n    var v = expression(70);\n    if (v.value !== \"(\") {\n      makeError(v, \"Only functions may have dot (.) unary operator.\");\n    }\n    // this.first = v;\n    // this.arity = \"unary\";\n    // return this;\n    // skip unary dot !!!\n    return v;\n  });\n\n  prefix(\"(\", function () {\n    var e = expression(0);\n    if (expr_scope.tp == \"logical\") {\n      // we should remember all brackets to restore original user expression\n      e.sexpr = [\"()\", e.sexpr];\n    } else {\n      if (e.value === \"->\") {\n        //       LPE ,   ,  push \"()\"   AST \n        e = {\n          first: e,\n          value: \"()\",\n          arity: \"unary\",\n          sexpr: [\"()\", e.sexpr]\n        };\n      }\n    }\n    advance(\")\");\n    return e;\n  });\n\n  prefix(\"[\", function () {\n    var a = [];\n    if (token.id !== \"]\") {\n      while (true) {\n        a.push(expression(0));\n        // a.push(statements());\n        if (token.id !== \",\") {\n          break;\n        }\n        advance(\",\");\n      }\n    }\n    advance(\"]\");\n    this.first = a;\n    this.arity = \"unary\";\n    this.sexpr = [\"[\"].concat(a.map((el) => el.sexpr));\n    return this;\n  });\n\n  return function (source) {\n    tokens = tokenize(source, '=<>!+-*&|/%^:.', '=<>&|:.');\n    token_nr = 0;\n    advance();\n    var s = statements();\n    // var s = expression(0);\n    advance(\"(end)\");\n    return s;\n  };\n};\n\n\n\nconst parser = make_parse();\n// console.log('LPE Parser initialized')\n\n\nexport function parse(str) {\n  try {\n    const parseResult = parser(str);   // from, to, value, arity, sexpr\n    return parseResult.sexpr;\n\n  } catch(err) {\n    console.error(\"Error\", err.message);\n    console.error(\"Error\", err.stack);\n    throw err;\n  }\n}\n\nexport {LPESyntaxError};\n\n\n\n// WEBPACK FOOTER //\n// ./src/lpep.js","/**\n Copyright (c) 2019 Luxms Inc.\n\n Permission is hereby granted, free of charge, to any person obtaining\n a copy of this software and associated documentation files (the \"Software\"),\n to deal in the Software without restriction, including without limitation\n the rights to use, copy, modify, merge, publish, distribute, sublicense,\n and/or sell copies of the Software, and to permit persons to whom the Software\n is furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in\n all copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\n IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\n CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\n TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE\n OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport console from './console/console';\nimport {parse} from './lpep';\nimport {db_quote_literal} from './utils/utils';\nimport {eval_lisp} from './lisp';\n\n\n/*\nwhere -    WHERE,   .     WHERE TRUE\nfilter -      \n*/\n\nexport function sql_where_context(_vars) {\n  var _context = _vars;\n\n  var try_to_quote_column = function(colname) {\n    if (typeof _vars['_columns'] == 'object') {\n      var h = _vars['_columns'][colname];\n      if (typeof h == \"object\") {\n        h = h['name'].toString();\n        // console.log(\"-: try_to_quote_column \" + JSON.stringify(h));\n        // console.log(\"-: try_to_quote_column \" + (typeof h));\n        if (h.length > 0) {\n          // return '\"' + h + '\"';\n          return h;\n        }\n      }\n    }\n    return colname.toString();\n  };\n\n  var try_to_quote_order_by_column = function(colname) {\n    if (typeof _vars['_columns'] == 'object') {\n      var h = _vars['_columns'][colname];\n      if (typeof h == \"object\") {\n        var o = h['order'];\n        if (o === undefined) {\n          o = h['name'];\n        }\n        console.log(\"-: try_to_quote_order_by_column \" + JSON.stringify(o));\n        console.log(\"-: try_to_quote_order_by_column \" + (typeof o));\n        if (o !== undefined && o.length > 0) {\n          //return '\"' + o.toString() + '\"';\n          return o.toString();\n        }\n      }\n    }\n    return colname.toString();\n  };\n\n  var resolve_literal = function(lit) {\n    console.log('LITERAL ', lit, '  CONTEXT:', _vars[lit]);\n    if (_vars[lit] == undefined ) {\n      return try_to_quote_column(lit);\n    } else {\n      //     !    - \n      return eval_lisp(lit, _vars);\n    }\n  };\n\n  var resolve_order_by_literal = function(lit) {\n    console.log('OB LITERAL ', lit, ' CONTEXT:', _vars[lit]);\n\n    if (_vars[lit] === undefined ) {\n      return try_to_quote_order_by_column(lit);\n    } else {\n      //     !    - \n      return eval_lisp(lit, _vars);\n    }\n  };\n\n  /*     ,   SQL */\n  _context['order_by'] = function () {\n    var ret = [];\n    var ctx = {};\n    for(var key in _vars) ctx[key] = _vars[key];\n    //   order_by   eval_lisp,       -a,  \n    //    +  -        .\n    //       where -  eval_lisp    ...\n    ctx['+'] = function (a) {\n      if (a instanceof Array) {\n        throw(\"recursive +..-\");\n      } else {\n        return resolve_order_by_literal(a);\n      }\n    }\n    ctx['+'].ast = [[],{},[],1]; // mark as macro\n\n    ctx['-'] = function (a) {\n      //console.log(\"-: call \" + JSON.stringify(a));\n      if (a instanceof Array) {\n        throw(\"recursive -..+\");\n      } else {\n        return resolve_order_by_literal(a) + ' ' + 'DESC';\n      }\n    }\n    ctx['-'].ast = [[],{},[],1]; // mark as macro\n\n    for(var i = 0; i < arguments.length; i++) {\n        if (arguments[i] instanceof Array) {\n          ret.push(eval_lisp(arguments[i], ctx) );\n        } else {\n          // try_to_quote_column        !!!\n          ret.push(resolve_order_by_literal(arguments[i].toString()));\n        }\n    }\n\n    if (ret.length > 0) {\n      return 'ORDER BY ' + ret.join(',');\n    } else {\n      return '';\n    }\n  };\n\n  _context['order_by'].ast = [[],{},[],1]; // mark as macro\n\n\n  _context['pg_interval'] = function (cnt, period_type) {\n    var pt;\n    if (period_type instanceof Object) {\n      pt = period_type[\"unit\"];\n    } else {\n      pt = period_type;\n    }\n\n    if (/^\\d+$/.test(pt)) {\n      // all numbers....\n      switch(pt){\n        case 1: pt = 'second'; break;\n        case 2: pt = 'minute'; break;\n        case 3: pt = 'hour'; break;\n        case 4: pt = 'day'; break;\n        case 5: pt = 'week'; break;\n        case 6: pt = 'month'; break;\n        case 7: pt = 'quarter'; break;\n        case 8: pt = 'year'; break;\n        default: throw(\"wrong period type:\" + pt)\n      }\n    } else {\n      var reg = new RegExp(\"['\\\"]+\",\"g\");\n      pt = pt.replace(reg,\"\");\n    }\n\n    var regExp = new RegExp(/quarter/, \"i\");\n    if (regExp.test(pt)){\n      return \"'\" + (cnt * 3) + \" month'::interval\" ;\n    }\n    return \"'\" + cnt + \" \" + pt + \"'::interval\";\n  }\n\n  // filter\n  _context['filter'] = function () {\n      var ctx = {};\n      for(var key in _vars) ctx[key] = _vars[key];\n\n      var prnt = function(ar) {\n        if (ar instanceof Array) {\n          if (  ar[0] === '$' ||  \n                ar[0] === '\"' || \n                ar[0] === \"'\" || \n                ar[0] === \"[\" || \n                ar[0] === 'parse_kv' || \n                ar[0] === \"=\" ||\n                ar[0] === \"pg_interval\") {\n            return eval_lisp(ar, ctx);\n          } else {\n              if (ar.length == 2) {\n                // unary\n                if (ar[0] == \"not\") {\n                  return ar[0] + ' ' + prnt(ar[1]);\n                } else if (ar[0] == \"()\") {\n                  return \"(\" + prnt(ar[1]) + \")\";\n                } else if (ar[0].match(/^[^\\w]+$/)){\n                  return ar[0] + prnt(ar[1]);\n                } else {\n                  return prnt(ar[0]) + \"(\" + prnt(ar[1]) + \")\";\n                }\n              } else if (ar.length == 3) {\n                if (ar[0] == \"->\") {\n                  //  LPE  ,         ->\n                  //          < >.< >\n                  //return '\"' + ar[1]+ '\".\"' + ar[2] + '\"';\n                  return ar[1] + '.' + ar[2];\n                } else if (ar[0] == \"and\" || ar[0] == \"or\" || ar[0] == \"ilike\" || ar[0] == \"like\" || \n                           ar[0] == \"in\" || ar[0] == \"is\" || ar[0].match(/^[^\\w]+$/)) {\n                  //      \n                  return prnt(ar[1]) + ' ' + ar[0] + ' ' + prnt(ar[2]);\n                } else {\n                  return ar[0] + '(' + prnt(ar[1]) + ',' + prnt(ar[2]) + ')';\n                }\n              } else {\n                //      - \n                return ar[0] + '(' + ar.slice(1).map(\n                  function(argel){return prnt(argel)}\n                ).join(',') + ')';\n              }\n            }\n        } else {\n            return ar;\n        }\n      };\n\n      ctx['\"'] = function (el) {\n        return '\"' + el.toString() + '\"';\n      }\n    \n      ctx[\"'\"] = function (el) {\n        return \"'\" + el.toString() + \"'\";\n      }\n    \n      ctx[\"[\"] = function (el) {\n        return \"[\" + Array.prototype.slice.call(arguments).join(',') + \"]\";\n      }\n\n      ctx['='] = function (l,r) {\n        if (r instanceof Array && r[0] == 'vector') {\n          return prnt(l) + \" in (\" + r.slice(1).map(function(el){return prnt(el)}).join(',') + \")\";\n        }\n        return prnt(l) + \" = \" + prnt(r);\n      }\n      ctx['='].ast = [[],{},[],1]; // mark as macro\n\n      // $(name) will quote text elements !!! suitable for generating things like WHERE title in ('a','b','c')\n      // also, we should evaluate expression, if any.\n      ctx['$'] = function(inexpr) {\n        var expr = eval_lisp(inexpr, _context); // evaluate in a normal LISP context without vars, not in WHERE context\n        if (expr instanceof Array) {\n          // try to print using quotes, use plv8 !!!\n          return expr.map(function(el){\n              if (typeof(el)===\"string\") {\n                return db_quote_literal(el);\n              } else if (typeof(el) === \"number\") {\n                return el;\n              } else {\n                return db_quote_literal(JSON.stringify(el));\n              }\n            }).join(',');\n        }\n        return db_quote_literal(expr);\n      }\n      ctx['$'].ast = [[],{},[],1]; // mark as macro\n\n      //              .\n      ctx['parse_kv'] = function(expr) {\n        if (expr instanceof Array) {\n          if (expr[0] === '->') {\n            var sql = 'select \"' + expr[2]+ '\" from \"'+ expr[1] +'\" where id = $1::INT';\n            var id_val = resolve_literal(expr[1].replace(/.$/,\"_id\"));\n\n            //console.log('SQL: ', sql, \" val:\", id_val);\n\n            var res_json = plv8.execute(sql, [ id_val ] );\n            //var res_json = [{\"src_id\":\"$a::$b:\"}];\n            var frst = res_json[0];\n\n            //console.log('SQL RES: ', frst);\n\n            if (frst !== undefined && frst[expr[2]] !== null && frst[expr[2]].length > 0) {\n                var axis_condition = function(e){\n                  var result = e.split(':').map(function(e2){\n                      e2 = e2.replace(/\\'/g , \"''\"); //' be safe\n                      return (e2.indexOf('$') == 0 ? ' AND '+e2.substr(1)+'=' : \"'\"+e2+\"'\");\n                  }).join('').substr(5);\n                  return result;\n                };\n\n                var result =  axis_condition(frst[expr[2]]);\n                if(result === undefined || result.length == 0) return '(/*kv not resolved*/ 0=1)';\n                return result;\n            }\n          }\n        }\n        return '(/*parse_kv EMPTY*/ 1=0)';\n      };\n      ctx['parse_kv'].ast = [[],{},[],1]; // mark as macro\n\n      var ret = [];\n      //console.log(\"where IN: \", JSON.stringify(Array.prototype.slice.call(arguments)));\n\n      var fts = _vars['fts'];\n      var tree = arguments;\n\n      if ( fts !== undefined && fts.length > 0) {\n        fts = fts.replace(/\\'/g , \"''\"); //' be safe\n        // Full Text Search based on column_list\n        if (typeof _vars['_columns'] == 'object') {\n\n          //console.log(\"FTS: \",  JSON.stringify(fts));\n\n          var ilike = Object.values(_vars['_columns']).map(function(col){\n            col[\"search\"] !== undefined\n            ? [\"ilike\", col[\"search\"], [\"str\", '%' + fts + '%']]\n            : null\n            }).reduce(function(ac, el) {el == null ? ac : ['or',ac,el]});\n\n          //console.log( \"FTS PARSED: \",  JSON.stringify(ilike));\n\n          if (ilike !== undefined && ilike.length > 0) {\n            //   AND   \n            tree = [[\"and\",tree[0],['()',ilike]]];\n          }\n        }\n      }\n\n      for(var i = 0; i < tree.length; i++) {\n          // console.log(\"array \", JSON.stringify(Array.prototype.slice.call(tree[i])));\n          ret.push(prnt( tree[i], ctx));\n      }\n\n      var r = ret[0]; //        !!!\n      if (r == undefined) {\n        r = '';\n      }\n      return r;\n    };\n    _context['filter'].ast = [[],{},[],1]; // mark as macro\n\n\n    // where - we should not eval arguments, so we must mark where as macro!!!\n    _context['where'] = function () {\n      // we should always get ONE argument, for example: [\"=\",[\"$\",[\"->\",\"period\",\"title\"]],3]\n      // BUT if we get two, or more arguments, we eval them one by one, AND combine later with AND operand, skipping empty results...\n      var tree = arguments;\n      var ret = [];\n      for(var i = 0; i < tree.length; i++) {\n        // console.log(\"array \", JSON.stringify(Array.prototype.slice.call(tree[i])));\n        var r = eval_lisp([\"filter\", tree[i]], _context); // r should be string\n        if (r.length > 0) {\n          ret.push(r);\n        }\n      }\n\n      if (ret.length > 0) {\n        if (ret.length > 1) {\n          return 'WHERE (' + ret.join(') AND (') + ')'; \n        } else {\n          return 'WHERE ' + ret[0]; \n        }\n      } else {\n        return 'WHERE TRUE';\n      }\n    };\n    _context['where'].ast = [[],{},[],1]; // mark as macro\n\n  return _context;\n}\n\n\n\n\n\n\n\n\n\nexport function eval_sql_where(_expr, _vars) {\n  if (typeof _vars === 'string') _vars = JSON.parse(_vars);\n\n  var sexpr = parse(_expr);\n\n\n  console.log('sql_where parse: ', JSON.stringify(sexpr));\n\n  if ((sexpr instanceof Array) &&\n     ((sexpr[0]==='filter' && (sexpr.length <=2)) || (sexpr[0]==='order_by') || (sexpr[0]==='if') || (sexpr[0]==='where') )) {\n    // ok\n  } else {\n    throw(\"only single where() or order_by() could be evaluated.\")\n  }\n\n\n  var _context = sql_where_context(_vars);\n\n  var ret = eval_lisp(sexpr, _context);\n\n  // console.log('ret: ',  JSON.stringify(ret));\n  return ret;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/sql_where.js","/**\n    Copyright (c) 2019 Luxms Inc.\n\n    Permission is hereby granted, free of charge, to any person obtaining\n    a copy of this software and associated documentation files (the \"Software\"),\n    to deal in the Software without restriction, including without limitation\n    the rights to use, copy, modify, merge, publish, distribute, sublicense,\n    and/or sell copies of the Software, and to permit persons to whom the Software\n    is furnished to do so, subject to the following conditions:\n\n    The above copyright notice and this permission notice shall be included in\n    all copies or substantial portions of the Software.\n\n    THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n    EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n    OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\n    IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\n    CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\n    TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE\n    OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\n\nimport console from './console/console';\nimport {eval_lisp} from './lisp';\nimport {sql_where_context} from './sql_where';\nimport {parse} from './lpep';\n\n// polyfill = remove in 2020 !!!\n\nif (!Array.prototype.find) {\n  Array.prototype.find = function(predicate) {\n    if (this == null) {\n      throw new TypeError('Array.prototype.find called on null or undefined');\n    }\n    if (typeof predicate !== 'function') {\n      throw new TypeError('predicate must be a function');\n    }\n    var list = Object(this);\n    var length = list.length >>> 0;\n    var thisArg = arguments[1];\n    var value;\n\n    for (var i = 0; i < length; i++) {\n      value = list[i];\n      if (predicate.call(thisArg, value, i, list)) {\n        return value;\n      }\n    }\n    return undefined;\n  };\n}\n\n\nexport function sql_context(_vars) {\n  var _context = sql_where_context(_vars);\n\n  /*     ,   SQL */\n  _context['sql'] = function() {\n    var q; // resulting sql\n    var args = Array.prototype.slice.call(arguments);\n    console.log('SQL IN: ', args);\n\n    var find_part = function(p) {\n      return args.find((el) => p == el[0]);\n    };\n\n    var sel = find_part('select');\n    console.log('FOUND select: ', sel);\n    q = eval_lisp(sel, _context);\n\n    var from = find_part('from');\n    console.log('FOUND from: ', from);\n    q = q + ' ' + eval_lisp(from, _context);\n\n    var where = find_part('where');\n    console.log(\"FOUND where: \", where);\n    if (where instanceof Array && where.length > 1) {\n      q = q + ' ' + eval_lisp(where, _context );\n    }\n\n    var srt = find_part('sort');\n    console.log('FOUND sort: ', srt);\n    if (srt instanceof Array && srt.length > 1) {\n      q = q + ' ' + eval_lisp( srt, _context );\n    }\n\n    return q;\n  };\n  _context['sql'].ast = [[],{},[],1]; // mark as macro\n\n  function prnt(a) {\n    console.log('prnt IN: ', a);\n    if (a instanceof Array){\n      if (a.length > 0) {\n        if (a[0] === '::' && a.length == 3) {\n          return a[1] + '::' + a[2];\n        } else if (a[0] === ':') {\n          return prnt(a[1]) + ' as \"' + a[2].replace(/\"/,'\\\\\"') + '\"';\n        } else {\n          return a[0] + '(' + a.slice(1).map(\n            function(argel) { return prnt(argel) }\n          ).join(',') + ')';\n        }\n      } else {\n        return '';\n      }\n    } else {\n      return a;\n    }\n  }\n\n    //   \n  _context['select'] = function() {\n    var a = Array.prototype.slice.call(arguments);\n    console.log(\"select IN: \",  JSON.stringify(a));\n    if (a.length < 1) {\n      return \"SELECT *\";\n    } else {\n      return \"SELECT \" + a.map(prnt).join(',');\n    }\n  }\n  _context['select'].ast = [[],{},[],1]; // mark as macro\n\n  _context['from'] = function() {\n    var a = Array.prototype.slice.call(arguments);\n    console.log('from IN: ', a);\n    if (a.length < 1) {\n      return \"\";\n    } else {\n      return \"FROM \" + a.map(prnt).join(',');\n    }\n  }\n  _context['from'].ast = [[],{},[],1]; // mark as macro\n\n  return _context;\n}\n\n\n/*\n  !!!    ,   htSQL.  +table(col1,col2).where(col1>3)\n ,   ?    ,        +sch.table(col1,col2)\n ....\n\nselect lpe.parse_sql_expr($$metrics(id).where(id='abcd')$$);\n\n\n htSQL:\n/course.filter(credits<3).select(department_code, no, title)\n/course.sort(credits-).limit(10){department_code, no, credits}\n/course.limit(10).sort(credits-){department_code, no, credits}\n\n ,         .  LuxPath  \n htSQL select    {}    +_(...)\n   +  /    htSQL    ,      !!!\n\n*/\n\nexport function parse_sql_expr(_expr, _vars) {\n  var ctx = sql_context(_vars);\n  var _context = ctx;\n  // for(var key in _vars) _context[key] = _vars[key];\n\n  _context['->'] = function() {\n    var ret = [];\n\n    for (var i = 0; i < arguments.length; i++) {\n      ret.push(eval_lisp( arguments[i], _context));\n    }\n\n    return ret.join(',');\n  }\n  _context['->'].ast = [[],{},[],1]; // mark as macro\n\n  var sexpr = parse(_expr);\n  console.log(\"IN: \", sexpr);\n\n  /*\n  if (ctx.hasOwnProperty('where')){\n    console.log('W O W');\n  }\n  */\n\n  //      ->,     ->  c   \n  //      .from()\n  if (sexpr[0] !== '->') {\n    sexpr = ['->',sexpr];\n  }\n\n  //           .\n  //       : (seq sql(select() from()) sql(...) sql(...) )\n  // [\"seq\",[\"metrics\",\"a\",\"d\",[\"max\",\"c\"]],[\"where\"]]\n  // [\"seq\",[\"+\",[\"metrics\",\"a\",\"d\",[\"max\",\"c\"]]],[\"where\"]]\n\n  /*    IN:\n    metrics(a,d,max(c)).where(a>1 and i < 4).periods.where(a>4)\n    [\"seq\",[\"metrics\",\"a\",\"d\",[\"max\",\"c\"]],[\"where\",[\"and\",[\">\",\"a\",\"1\"],[\"<\",\"i\",\"4\"]]],\"periods\",[\"where\",[\">\",\"a\",\"4\"]]]\n    [\"seq\",[\"sql\",[\"select\",\"a\",\"d\",[\"max\",\"c\"]],[\"from\",\"metrics\"],[\"filter\",[\"and\",[\">\",\"a\",\"1\"],[\"<\",\"i\",\"4\"]]]],[\"sql\",[\"select\"],[\"from\",\"periods\"],[\"filter\",[\">\",\"a\",\"4\"]]]]\n  */\n\n  var sql = ['sql'];\n  var do_select_from = function(sel) {\n    if (!(sel instanceof Array)) {\n      sel = [sel];\n    }\n    var fr = sel[0];\n    var p = false;\n    if (fr != 'where' && fr != 'select' && fr != 'sort' && fr != 'filter' && fr != 'from') {\n      sel[0] = 'select';\n      p = true;\n    }\n    sql.push(sel);\n    if (p) {\n      sql.push([\"from\",fr]);\n    }\n    console.log(\"parse do_select_from: \", sql);\n  };\n\n  for (var i=1; i<sexpr.length; i++){\n    var expr = sexpr[i];\n    if (expr instanceof Array) {\n      // expr: [\"metrics\",\"a\",\"d\",[\"max\",\"c\"]]\n      if (expr[0] === 'order_by') {expr[0]='sort'};\n      if (expr[0] === 'where') {expr[0]='where'};\n      if ( expr[0] === '+' ){\n        // expr: [\"+\",[\"metrics\",\"a\",\"d\",[\"max\",\"c\"]]]\n        do_select_from(expr[1]);\n      } else if (_context[expr[0].toString()] === undefined) {\n        //   ...       ,\n        //   \n        // expr: [\"metrics\",\"a\",\"d\",[\"max\",\"c\"]]\n        do_select_from(expr);\n      } else {\n        sql.push(sexpr[i]);\n      }\n    } else if (_context[expr.toString()] === undefined) {\n      //   =  ...\n      // expr: \"metrics\"\n      do_select_from(expr);\n    } else {\n      throw('unexpected call: ' + JSON.stringify(expr));\n    }\n  }\n\n  console.log('parse: ', sql);\n\n  var ret = eval_lisp(sql, _context);\n  // console.log(\"parse: \", ret);\n\n  return ret;\n}\n\n\n\nexport function parse_sql_apidb_expr(_expr, _vars, _forced_table, _forced_where) {\n  var ctx = sql_context(_vars);\n  var _context = ctx;\n  // for(var key in _vars) _context[key] = _vars[key];\n\n  var sexpr = parse(_expr);\n  console.log(\"DBAPI IN: \", sexpr);\n\n  /*\n  if (ctx.hasOwnProperty('where')){\n    console.log('W O W');\n  }\n  */\n\n\n  //           .\n  //          sql()   select().from().where()\n  //  \n  // select(a,b) === select(a).select(b)\n  // order_by(a,b) === order_by(a).order_by(b)\n  // where(a>1).where(b<1) === where(a>1 and b<1)\n  // from(a).from(b).from(c) === from(c)\n  //      from,     !!!!\n\n  var sql = ['sql']; // wrapped by sql call...\n  var cache = {\"where\":[], \"select\":[], \"order_by\":[],\"from\":[]};\n  for (var i=1; i<sexpr.length; i++){\n    var expr = sexpr[i];\n    if (expr instanceof Array) {\n      var fr = expr[0];\n      if (fr != 'where' && fr != 'select' && fr != 'order_by' && fr != 'from' && fr != ':') {\n        throw('unexpected func: ' + JSON.stringify(fr));\n      }\n      // have no idea how to support aliases for selects...\n      if (fr === ':' && expr[1][0] === 'select') {\n        cache[\"select\"].push(expr[1]);\n      } else {\n        cache[fr].push(expr);\n      }\n    } else {\n      throw('unexpected literal: ' + JSON.stringify(expr));\n    }\n  }\n\n  if (_forced_table !== undefined) {\n    cache[fr].push([\"from\", _forced_table]);\n  }\n\n  var args = cache[\"select\"].map(ar => ar.slice(1));\n  var sel = [].concat.apply([\"select\"], args); //flat\n  sql.push(sel);\n\n  sql.push( cache[\"from\"].pop() );\n\n  args = cache[\"where\"].map(ar => ar.slice(1));\n  args = [].concat.apply([], args); //flat\n\n  var w = [\"()\", args[0]];\n  if (args.length > 1) {\n    for (var i=1; i<args.length; i++){\n      w = [\"and\", w, [\"()\", args[i]]];\n    }\n  }\n\n  sql.push([\"where\", w]);\n\n  console.log(\"WHERE\", JSON.stringify(w));\n\n  console.log('DBAPI parse: ', sql);\n\n  var ret = eval_lisp(sql, _context);\n\n  return ret;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/sql_context.js","import console from './console/console';\nimport {parse, LPESyntaxError} from './lpep';\nimport {eval_lisp, evaluate} from './lisp';\nimport {sql_where_context, eval_sql_where} from './sql_where';\nimport {sql_context, parse_sql_expr, parse_sql_apidb_expr} from './sql_context';\n\n\nfunction eval_lpe(lpe, ctx) {\n  const ast = parse(lpe);\n  return eval_lisp(ast, ctx);\n}\n\n\nexport {\n  parse,\n  LPESyntaxError,\n  evaluate,                         // deprecated\n  eval_lisp,\n  eval_lpe,\n  eval_sql_where,\n  parse_sql_expr,\n  parse_sql_apidb_expr,\n};\n\n\n\n// test:\n// var ast = parse('2+2*2');\n// console.log(ast);\n// var res = evaluate(ast, []);\n// console.log(res);\n\n// test:\n// var result = eval_sql_where(\"where(id=[1,2,3,4] and metric.tree_level(id) = 3 and max(id)=now() and $metric_id = 3)\", {\"$metric_id\":\"COOL\",\"id\":\"ID\"});\n// console.log(result);\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","\n// http://javascript.crockford.com/tdop/tdop.html\n\n// 2010-02-23\n\n// (c) 2006 Douglas Crockford\n\n// Produce an array of simple token objects from a string.\n// A simple token object contains these members:\n//      type: 'name', 'string', 'number', 'operator'\n//      value: string or number value of the token\n//      from: index of first character of the token\n//      to: index of the last character + 1\n\n// Comments of the // type are ignored.\n\n// Operators are by default single characters. Multicharacter\n// operators can be made by supplying a string of prefix and\n// suffix characters.\n// characters. For example,\n//      '<>+-&', '=>&:'\n// will match any of these:\n//      <=  >>  >>>  <>  >=  +: -: &: &&: &&\n\nimport console from './console/console';\n\nconst isDigit = (c) => c >= '0' && c <= '9';\n\n\n// Transform a token object into an exception object and throw it.\nexport function LPESyntaxError(message) {\n  this.constructor.prototype.__proto__ = Error.prototype;\n  Error.call(this);\n  Error.captureStackTrace(this, this.constructor);\n  this.name = this.constructor.name;\n  this.message = message;\n  // this.stack = (new Error()).stack;\n}\n\n\nexport function makeError(t, message) {\n  t.message = message;\n\n  const errorDescription = JSON.stringify(\n      t,\n      ['name', 'message', 'from', 'to', 'key', 'value', 'arity', 'first', 'second', 'third', 'fourth'],\n      4);\n\n  throw new LPESyntaxError(errorDescription);\n}\n\n\nexport function tokenize(s, prefix = '<>+-&', suffix = '=>&:') {\n  let c;                      // The current character.\n  let from;                   // The index of the start of the token.\n  let i = 0;                  // The index of the current character.\n  let length = s.length;\n  let n;                      // The number value.\n  let q;                      // The quote character.\n  let str;                    // The string value.\n  let result = [];            // An array to hold the results.\n  const make = (type, value) => ({type, value, from, to: i});                   // Make a token object.\n\n  // If the source string is empty, return nothing.\n  if (!s) {\n    return [];\n  }\n\n  // Loop through this text, one character at a time.\n  c = s.charAt(i);\n  while (c) {\n    from = i;\n\n    // Ignore whitespace.\n    if (c <= ' ') {\n      i += 1;\n      c = s.charAt(i);\n\n    // name.\n    } else if ((c >= 'a' && c <= 'z') || (c >= 'A' && c <= 'Z') || c === '$' || c === '#') {\n      str = c;\n      i += 1;\n      for (;;) {\n        c = s.charAt(i);\n        if ((c >= 'a' && c <= 'z') || (c >= 'A' && c <= 'Z') || (c >= '0' && c <= '9') || c === '_' || c === '$') {\n          str += c;\n          i += 1;\n        } else {\n          break;\n        }\n      }\n\n      result.push(make('name', str));\n    // number.\n\n    // A number cannot start with a decimal point. It must start with a digit,\n    // possibly '0'.\n\n    } else if (c >= '0' && c <= '9') {\n      str = c;\n      i += 1;\n\n      // Look for more digits.\n\n      for (;;) {\n        c = s.charAt(i);\n        if (c < '0' || c > '9') {\n          break;\n        }\n        i += 1;\n        str += c;\n      }\n\n      // Look for a decimal fraction part.\n\n      if (c === '.') {\n        i += 1;\n        str += c;\n        for (;;) {\n          c = s.charAt(i);\n          if (c < '0' || c > '9') {\n            break;\n          }\n          i += 1;\n          str += c;\n        }\n      }\n\n      // Look for an exponent part.\n      if (c === 'e' || c === 'E') {\n        i += 1;\n        str += c;\n        c = s.charAt(i);\n        if (c === '-' || c === '+') {\n          i += 1;\n          str += c;\n          c = s.charAt(i);\n        }\n        if (c < '0' || c > '9') {\n          makeError(make('number', str), \"Bad exponent\");\n        }\n        do {\n          i += 1;\n          str += c;\n          c = s.charAt(i);\n        } while (c >= '0' && c <= '9');\n      }\n\n      // Make sure the next character is not a letter.\n\n      if (c >= 'a' && c <= 'z') {\n                str += c;\n                i += 1;\n                makeError(make('number', str), \"Bad number\");\n      }\n\n      // Don't convert the string value to a number. If it is finite, then it is a good\n      // token.\n      // result.push(make('number', parseFloat(str)));\n      // result.push(make('number', str));\n\n      \n      n = +str;\n      if (isFinite(n)) {\n        result.push(make('number', n));\n      } else {\n        makeError(make('number', str), \"Bad number\");\n      }\n      \n\n    // string\n\n    } else if (c === '\\'' || c === '\"') {\n      str = '';\n      q = c;\n      i += 1;\n      for (;;) {\n        c = s.charAt(i);\n        if (c < ' ') {\n          // make('string', str).error(c === '\\n' || c === '\\r' || c === '' ?\n          //     \"Unterminated string.\" :\n          //     \"Control character in string.\", make('', str));\n          makeError(make('', str) || make(q==='\"'?'string_double':'string_single', str),\n                    c === '\\n' || c === '\\r' || c === '' ?\n                         \"Unterminated string.\" :\n                         \"Control character in string.\");\n        }\n\n        // Look for the closing quote.\n\n        if (c === q) {\n          break;\n        }\n\n        // Look for escapement.\n\n        if (c === '\\\\') {\n          i += 1;\n          if (i >= length) {\n            makeError(make(q==='\"'?'string_double':'string_single', str), \"Unterminated string\");\n          }\n          c = s.charAt(i);\n          switch (c) {\n          case 'b':\n            c = '\\b';\n            break;\n          case 'f':\n            c = '\\f';\n            break;\n          case 'n':\n            c = '\\n';\n            break;\n          case 'r':\n            c = '\\r';\n            break;\n          case 't':\n            c = '\\t';\n            break;\n          case 'u':\n            if (i >= length) {\n              makeError(make(q==='\"'?'string_double':'string_single', str), \"Unterminated string\");\n            }\n            c = parseInt(s.substr(i + 1, 4), 16);\n            if (!isFinite(c) || c < 0) {\n              makeError(make(q==='\"'?'string_double':'string_single', str), \"Unterminated string\");\n            }\n            c = String.fromCharCode(c);\n            i += 4;\n            break;\n          }\n        }\n        str += c;\n        i += 1;\n      }\n      i += 1;\n      result.push(make(q==='\"'?'string_double':'string_single', str));\n      c = s.charAt(i);\n\n    // comment.\n    } else if (c === '/' && s.charAt(i + 1) === '/') {\n      i += 1;\n      for (;;) {\n        c = s.charAt(i);\n        if (c === '\\n' || c === '\\r' || c === '') {\n          break;\n        }\n        i += 1;\n      }\n\n    // combining\n\n    } else if (prefix.indexOf(c) >= 0) {\n      str = c;\n      i += 1;\n      while (true) {\n        c = s.charAt(i);\n        if (i >= length || suffix.indexOf(c) < 0) {\n          break;\n        }\n        str += c;\n        i += 1;\n      }\n      result.push(make('operator', str));\n\n   // single-character operator\n    } else {\n      i += 1;\n      result.push(make('operator', c));\n      c = s.charAt(i);\n    }\n  }\n  return result;\n}\n\nexport default tokenize;\n\n\n\n// WEBPACK FOOTER //\n// ./src/lpel.js","\nexport function db_quote_literal(intxt) {\n     return \"'\" + intxt.toString().replace(/\\'/g , \"''\") + \"'\";\n} \n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/utils.js"],"sourceRoot":""}